<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Here are some helpful networking diagrams to better explain the desired state before and after the end of Lab 4. In all of these diagrams, I am using a sample network with the IP address 192.168.40.0. You will have to adapt the IPs to match your network configuration. In addition, each network address will need to be updated with your unique eID as directed in the lab assignment.
After Lab 3 Once you’ve completed all of Lab 3, your network diagram should resemble the one shown above."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lab 4 Networking Diagrams :: CIS 527 Textbook"><meta name=twitter:description content="Here are some helpful networking diagrams to better explain the desired state before and after the end of Lab 4. In all of these diagrams, I am using a sample network with the IP address 192.168.40.0. You will have to adapt the IPs to match your network configuration. In addition, each network address will need to be updated with your unique eID as directed in the lab assignment.
After Lab 3 Once you’ve completed all of Lab 3, your network diagram should resemble the one shown above."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/4-directory-services/12-lab4-networking/"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="Lab 4 Networking Diagrams :: CIS 527 Textbook"><meta property="og:description" content="Here are some helpful networking diagrams to better explain the desired state before and after the end of Lab 4. In all of these diagrams, I am using a sample network with the IP address 192.168.40.0. You will have to adapt the IPs to match your network configuration. In addition, each network address will need to be updated with your unique eID as directed in the lab assignment.
After Lab 3 Once you’ve completed all of Lab 3, your network diagram should resemble the one shown above."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Directory Services"><meta property="article:modified_time" content="2024-10-02T15:46:11-05:00"><meta itemprop=name content="Lab 4 Networking Diagrams :: CIS 527 Textbook"><meta itemprop=description content="Here are some helpful networking diagrams to better explain the desired state before and after the end of Lab 4. In all of these diagrams, I am using a sample network with the IP address 192.168.40.0. You will have to adapt the IPs to match your network configuration. In addition, each network address will need to be updated with your unique eID as directed in the lab assignment.
After Lab 3 Once you’ve completed all of Lab 3, your network diagram should resemble the one shown above."><meta itemprop=dateModified content="2024-10-02T15:46:11-05:00"><meta itemprop=wordCount content="1698"><title>Lab 4 Networking Diagrams :: CIS 527 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis527/4-directory-services/12-lab4-networking/ rel=canonical type=text/html title="Lab 4 Networking Diagrams :: CIS 527 Textbook"><link href=/cis527/4-directory-services/12-lab4-networking/index.xml rel=alternate type=application/rss+xml title="Lab 4 Networking Diagrams :: CIS 527 Textbook"><link href=/cis527/4-directory-services/12-lab4-networking/tele.html rel=alternate type=text/html title="Lab 4 Networking Diagrams :: CIS 527 Textbook"><link href=/cis527/4-directory-services/12-lab4-networking/embed.html rel=alternate type=text/html title="Lab 4 Networking Diagrams :: CIS 527 Textbook"><link href=/cis527/css/fontawesome-all.min.css?1728073625 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fontawesome-all.min.css?1728073625 rel=stylesheet></noscript><link href=/cis527/css/nucleus.css?1728073625 rel=stylesheet><link href=/cis527/css/auto-complete.css?1728073625 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/auto-complete.css?1728073625 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar.min.css?1728073625 rel=stylesheet><link href=/cis527/css/fonts.css?1728073625 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fonts.css?1728073625 rel=stylesheet></noscript><link href=/cis527/css/theme.css?1728073625 rel=stylesheet><link href=/cis527/css/theme-auto.css?1728073625 rel=stylesheet id=R-variant-style><link href=/cis527/css/chroma-auto.css?1728073625 rel=stylesheet id=R-variant-chroma-style><link href=/cis527/css/variant.css?1728073625 rel=stylesheet><link href=/cis527/css/print.css?1728073625 rel=stylesheet media=print><link href=/cis527/css/format-print.css?1728073625 rel=stylesheet><script src=/cis527/js/variant.js?1728073625></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.index_js_url="/cis527/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis527/css/custom.css?1728073625 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis527/4-directory-services/12-lab4-networking/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis527/4-directory-services/><span itemprop=name>Directory Services</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Lab 4 Networking Diagrams</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis527/4-directory-services/11-adds-netbios/ title="AD and NETBIOS Names (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis527/4-directory-services/13-azurevms/ title="Creating Azure VMs (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=lab-4-networking-diagrams>Lab 4 Networking Diagrams</h1><p>Here are some helpful networking diagrams to better explain the desired state before and after the end of Lab 4. In all of these diagrams, I am using a sample network with the IP address <code>192.168.40.0</code>. You will have to adapt the IPs to match your network configuration. In addition, each network address will need to be updated with your unique eID as directed in the lab assignment.</p><h3 id=after-lab-3>After Lab 3</h3><p><a href=#R-image-e8eb1d8a9e28a48c351b06c64422508c class=lightbox-link><img alt="After Lab 3" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis527/images/net-afterlab3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e8eb1d8a9e28a48c351b06c64422508c><img alt="After Lab 3" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis527/images/net-afterlab3.png></a></p><p>Once you&rsquo;ve completed all of Lab 3, your network diagram should resemble the one shown above. Recall that all systems are currently configured to get DHCP and DNS information from your Ubuntu VM labelled Server, so in general it must be running at all times for this network to function. In addition, the Ubuntu VM labelled Server does not use itself for DNS, but still uses the VMare built-in DNS server, though you may have configured an alternate entry so it can refer to itself for DNS as well. This is the most likely starting point for this lab if you completed Lab 3.</p><h3 id=starting-lab-4-with-a-working-lab-3-solution>Starting Lab 4 with a Working Lab 3 Solution</h3><p><a href=#R-image-8b05b40acd3c73b17488057aa3fa5813 class=lightbox-link><img alt="Before Lab 4 with Working Lab 3" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis527/images/net-beforelab4working3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8b05b40acd3c73b17488057aa3fa5813><img alt="Before Lab 4 with Working Lab 3" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis527/images/net-beforelab4working3.png></a></p><p>This diagram shows what an ideal network setup would look like, provided you have a working Lab 3 solution. In Lab 4, most of the changes required to get from the final Lab 3 network to this configuration are spread across multiple tasks. However, here are the major highlights:</p><ol start=0><li><strong>VMware NAT Network</strong> - the built-in DHCP server should still be disabled as it was in Lab 3.</li><li><strong>Ubuntu Server VM</strong> - now uses itself as a primary DNS entry, with an alternate entry set to the VMware DNS server (Lab 4, Task 4). Must be able to resolve <code>ldap.&lt;your eID>.cis527.org</code></li><li><strong>Ubuntu Client VM</strong> - no changes, still gets both DNS and DHCP from the Ubuntu Server VM (Lab 4, Task 5). Must be able to resolve <code>ldap.&lt;your eID>.cis527.org</code></li><li><strong>Windows Server VM</strong> - new VM (Lab 4, Task 1). Should have a static IP address of <code>192.168.40.42</code> and a primary static DNS entry pointing to itself, with an alternate entry set to the Ubuntu Server VM or the VMware DNS server (Lab 4, Task 2). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>.</li><li><strong>Windows 10 VM</strong> - now has a static DNS entry to point to the Windows Server VM, with an alternate entry set to the Ubuntu Server VM or the VMware DNS server (Lab 4, Task 3). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>.</li><li><strong>Ubuntu Client VM - Windows Snapshot</strong> - when configuring the Ubuntu Client VM to connect to Windows Active Directory, it should have a static DNS entry pointing to the Windows Server VM, with an alternate entry set to the Ubuntu Server VM or the VMware DNS server (Lab 4, Task 6). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>.</li></ol><p>This is the ideal setup for a this lab, but it depends on a fully working Lab 3 solution. In addition, you&rsquo;ll need to keep the Ubuntu Server VM running at all times, which may present a problem on systems that struggle to run multiple VMs concurrently. So, below I discuss two alternative options.</p><h4 id=lab-4-alternative-network-setup---option-1-static-dns-entries>Lab 4 Alternative Network Setup - Option 1 (Static DNS Entries)</h4><p><a href=#R-image-9d4d6184b4848edb6d603e440ee01051 class=lightbox-link><img alt="Before Lab 4 Alternate 1" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis527/images/net-beforelab4alt1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9d4d6184b4848edb6d603e440ee01051><img alt="Before Lab 4 Alternate 1" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis527/images/net-beforelab4alt1.png></a></p><p>In this diagram, we are bypassing the DHCP server configured in Lab 3, and reverting our network back to using the VMware DHCP server. In addition, we are avoiding using our own DNS server running on the Ubuntu Server VM unless absolutely necessary. So, the following changes are made to the network from Lab 3:</p><ol start=0><li><strong>VMware NAT Network</strong> - the built-in DHCP server must be re-enabled if it was disabled in Lab 3.</li><li><strong>Ubuntu Server VM</strong> - now uses itself as a primary DNS entry, with an alternate entry set to the VMware DNS server (Lab 4, Task 4). The DHCP server that was configured in Lab 3 is disabled using <code>sudo systemctl disable isc-dhcp-server</code>. Must still be able to resolve <code>ldap.&lt;your eID>.cis527.org</code></li><li><strong>Ubuntu Client VM</strong> - now gets a DHCP address from VMware. We must set a primary static DNS entry to point to the Ubuntu Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 5). Must be able to resolve <code>ldap.&lt;your eID>.cis527.org</code></li><li><strong>Windows Server VM</strong> - new VM (Lab 4, Task 1). Should have a static IP address of <code>192.168.40.42</code> and a primary static DNS entry pointing to itself, with an alternate entry set to the the VMware DNS server (Lab 4, Task 2). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>.</li><li><strong>Windows 10 VM</strong> - now has a static DNS entry to point to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 3). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>.</li><li><strong>Ubuntu Client VM - Windows Snapshot</strong> - when configuring the Ubuntu Client VM to connect to Windows Active Directory, it should have a static DNS entry pointing to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 6). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>.</li></ol><p>In effect, each system that is getting automatic IP addresses is now using the VMware DHCP server. However, since that DHCP server does not give the correct DNS addresses, we must set static DNS entries on <strong>everything</strong>, with the Ubuntu Server VM and Ubuntu Client VM pointing to the DNS server running on the Ubuntu Server VM, and the Windows Server, Windows 10 Client, and the Ubuntu Client VM&rsquo;s Windows Snapshot pointing to the DNS server running on the Windows Server (after Active Directory is installed). In addition, each of those systems should have an alternate DNS entry that points to the VMware DNS server, allowing them to still access the internet properly.</p><p>However, if you are still having issues with your DNS entries or DNS servers not working correctly, fear not! There is one more alternative option available to you.</p><h4 id=lab-4-alternative-network-setup---option-2-hosts-file-entries>Lab 4 Alternative Network Setup - Option 2 (Hosts File Entries)</h4><p><a href=#R-image-0bd27fe75d4ceb50f8b8a02e2a961489 class=lightbox-link><img alt="Before Lab 4 Alternate 2" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis527/images/net-beforelab4alt2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0bd27fe75d4ceb50f8b8a02e2a961489><img alt="Before Lab 4 Alternate 2" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis527/images/net-beforelab4alt2.png></a></p><p>In this diagram, we are bypassing the DHCP server configured in Lab 3, and reverting our network back to using the VMware DHCP server. In addition, we are avoiding using our own DNS server running on the Ubuntu Server VM unless absolutely necessary. Finally, we are adding entries to the <code>hosts</code> file on each system to bypass DNS completely, ensuring that we can still complete this lab even if our DNS systems are not working at all. So, the following changes are made to the network from Lab 3:</p><ol start=0><li><strong>VMware NAT Network</strong> - the built-in DHCP server must be re-enabled if it was disabled in Lab 3.</li><li><strong>Ubuntu Server VM</strong> - now uses itself as a primary DNS entry, with an alternate entry set to the VMware DNS server (Lab 4, Task 4). The DHCP server that was configured in Lab 3 is disabled using <code>sudo systemctl disable isc-dhcp-server</code>. Must still be able to resolve <code>ldap.&lt;your eID>.cis527.org</code>. If it cannot, add an entry to the <code>/etc/hosts</code> file that links <code>192.168.40.41</code> to <code>ldap.&lt;your eID>.cis527.org</code>.</li><li><strong>Ubuntu Client VM</strong> - now gets a DHCP address from VMware. We must set a primary static DNS entry to point to the Ubuntu Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 5). Must be able to resolve <code>ldap.&lt;your eID>.cis527.org</code>. If it cannot, add an entry to the <code>/etc/hosts</code> file that links <code>192.168.40.41</code> to <code>ldap.&lt;your eID>.cis527.org</code>.</li><li><strong>Windows Server VM</strong> - new VM (Lab 4, Task 1). Should have a static IP address of <code>192.168.40.42</code> and a primary static DNS entry pointing to itself, with an alternate entry set to the the VMware DNS server (Lab 4, Task 2). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>. If it cannot, you are better off just rebuilding your AD server - this should always work on a working AD server!</li><li><strong>Windows 10 VM</strong> - now has a static DNS entry to point to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 3). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>. If it cannot, add an entry to the <code>C:\Windows\System32\drivers\etc\hosts</code> file that links <code>192.168.40.42</code> to <code>ad.&lt;your eID>.cis527.org</code>.</li><li><strong>Ubuntu Client VM - Windows Snapshot</strong> - when configuring the Ubuntu Client VM to connect to Windows Active Directory, it should have a static DNS entry pointing to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 6). Once the Active Directory server is installed, it should be able to resolve <code>ad.&lt;your eID>.cis527.org</code>. If it cannot, add an entry to the <code>/etc/hosts</code> file that links <code>192.168.40.42</code> to <code>ad.&lt;your eID>.cis527.org</code>.</li></ol><p>In essence, we still configure each system with the correct static DNS entries. However, as a fallback in case those DNS entries are not working properly, we can use entries in the <code>hosts</code> file to bypass DNS completely and guarantee that we&rsquo;re always going to get to the correct system.</p><p>This is a very useful workaround, and while an <em>ideal</em> network in the real world shouldn&rsquo;t require it, many times system administrators include entries in the <code>hosts</code> file to ensure that systems can still be used in the event of DNS failure. Otherwise, an innocuous DNS failure could prevent users from even logging on to the system, either via LDAP or Active Directory.</p><p>As shown in the diagram above, the only DNS entry that <strong>must</strong> work is the Windows Server VM must be able to use itself for DNS. If that does not work, then most likely your Active Directory configuration failed and you will need to try again. Windows Active Directory relies heavily on DNS to function properly. I&rsquo;ve not ever had this happen in my experience, so I highly doubt this failure case will be common.</p><p>You can find more information about how to edit your hosts file at <a href=https://www.ionos.com/digitalguide/server/configuration/hosts-file/ rel=external target=_blank>this resource</a>.</p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis527/commit/355804b09e7dbd46f5bfc2a6573050256f6897d4>Oct 2, 2024</a></p></div></div><script src=/cis527/js/clipboard.min.js?1728073625 defer></script><script src=/cis527/js/perfect-scrollbar.min.js?1728073625 defer></script><script src=/cis527/js/theme.js?1728073625 defer></script></body></html>