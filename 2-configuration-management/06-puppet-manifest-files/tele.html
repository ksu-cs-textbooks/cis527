<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ"><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis527/images/hero.png"><meta name=twitter:title content="Puppet Manifest Files :: CIS 527 Textbook"><meta name=twitter:description content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/2-configuration-management/06-puppet-manifest-files/index.html"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="Puppet Manifest Files :: CIS 527 Textbook"><meta property="og:description" content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Configuration Management"><meta property="article:modified_time" content="2024-06-27T15:05:08-05:00"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis527/images/hero.png"><meta itemprop=name content="Puppet Manifest Files :: CIS 527 Textbook"><meta itemprop=description content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ"><meta itemprop=dateModified content="2024-06-27T15:05:08-05:00"><meta itemprop=wordCount content="864"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis527/images/hero.png"><title>Puppet Manifest Files :: CIS 527 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis527/2-configuration-management/06-puppet-manifest-files/index.html rel=canonical type=text/html title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/2-configuration-management/06-puppet-manifest-files/index.xml rel=alternate type=application/rss+xml title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/2-configuration-management/06-puppet-manifest-files/index.print.html rel=alternate type=text/html title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/2-configuration-management/06-puppet-manifest-files/embed.html rel=alternate type=text/html title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/css/auto-complete/auto-complete.min.css?1755708857 rel=stylesheet><script src=/cis527/js/auto-complete/auto-complete.min.js?1755708857 defer></script><script src=/cis527/js/search-lunr.min.js?1755708857 defer></script><script src=/cis527/js/search.min.js?1755708857 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis527/searchindex.en.js?1755708857"</script><script src=/cis527/js/lunr/lunr.min.js?1755708857 defer></script><script src=/cis527/js/lunr/lunr.stemmer.support.min.js?1755708857 defer></script><script src=/cis527/js/lunr/lunr.multi.min.js?1755708857 defer></script><script src=/cis527/js/lunr/lunr.en.min.js?1755708857 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis527/fonts/fontawesome/css/fontawesome-all.min.css?1755708857 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/fonts/fontawesome/css/fontawesome-all.min.css?1755708857 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar/perfect-scrollbar.min.css?1755708857 rel=stylesheet><link href=/cis527/css/theme.min.css?1755708857 rel=stylesheet><link href=/cis527/css/format-html.min.css?1755708857 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/2-configuration-management/06-puppet-manifest-files/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis527/css/custom.css?1755708857 rel=stylesheet></head><body class="mobile-support html" data-url=/cis527/2-configuration-management/06-puppet-manifest-files/index.html><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable 2-configuration-management" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=puppet-manifest-files>Puppet Manifest Files</h1><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Puppet Learning VM Deprecated</summary><div class=box-content><p><em>As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I&rsquo;ll keep these videos up for demonstration purposes.</em> &ndash;Russ</p></div></details><a href="https://www.youtube.com/watch?v=3QFCLHACFIM">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/2-configuration-management/06-puppet-manifest-files-slides/index.html>Slides</a></strong></li><li><a href=https://www.digitalocean.com/community/tutorials/configuration-management-101-writing-puppet-manifests rel=external target=_blank>Configuration Management 101: Writing Puppet Manifests</a> from DigitalOcean</li><li><a href=https://puppet.com/docs/puppet/latest/lang_visual_index.html rel=external target=_blank>Language: Visual Index</a> from Puppet</li><li><a href=https://puppet.com/docs/puppet/latest/puppet_language.html rel=external target=_blank>Language: Basics</a> from Puppet</li></ul><h4 id=video-script>Video Script</h4><p>Now, let&rsquo;s take a look at how we can use Puppet to create defined configurations to be applied to our systems. In Puppet, we refer to those defined configurations as manifest files. Each manifest file defines a set of resources to be configured on the system. Then, the Puppet Agent tool compares the configuration defined in the manifest file and the system&rsquo;s current configuration, making changes as needed to the system until they match. In addition, each manifest file should be written in a way that it can be repeatedly applied to a system, since it is only defining the configuration desired and not the steps to accomplish it. This makes Puppet a very powerful tool for managing system configuration across a variety of systems and platforms.</p><p>When you apply a manifest file, Puppet will go through a compilation process to convert the manifest file into a catalog. When working in a larger organization with a Puppet master server containing several manifest files, this allows the system to distill all of that information into a single place. We&rsquo;ll talk a bit more about that when we look at a master/agent setup using Puppet.</p><p>Now, let&rsquo;s create our first Puppet Manifest files. Once again, I&rsquo;m using the Learning Puppet VM during the <code>hello_puppet</code> quest, but you can follow along on your own Windows or Linux VM as well. I&rsquo;ll use SSH to connect to the <code>hello.puppet.vm</code> node, then make sure the Puppet Agent is installed.</p><p>To make this process simpler, I&rsquo;m also going to install the Nano text editor. For most beginners, I feel that Nano is the easiest command-line text editor to learn, though it may not be the most powerful. If you are familiar with Vim, feel free to use it as it is already installed on this system. Since the Learning Puppet VM is using CentOS as its Linux distribution of choice, the command to install packages is a bit different than on Ubuntu. To install Nano, type the following:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install nano</span></span></code></pre></div><p>Now, let&rsquo;s open a new text file using Nano, called <code>manifest.pp</code>. In that file, we can define a file resource as follows:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-pp data-lang=pp><span style=display:flex><span><span style=color:#66d9ef>file</span> <span style=color:#75715e>{ &#39;/tmp/testfile&#39;:
</span></span></span><span style=display:flex><span><span style=color:#75715e>  ensure =&gt; &#39;file&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>  content =&gt; &#39;Manifest File!&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>  mode =&gt; &#39;0644&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>}</span></span></span></code></pre></div><p>Once you have created that file, press <kbd>CTRL</kbd>+<kbd>X</kbd>, then <kbd>Y</kbd>, then <kbd>ENTER</kbd> to save and close the file in Nano. Then, you can apply the file using this command:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo puppet apply manifest.pp</span></span></code></pre></div><p>It should successfully apply, and give you a message that the file was created. You can then use either</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo puppet resource file /tmp/testfile</span></span></code></pre></div><p>or</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls -l /tmp/testfile</span></span></code></pre></div><p>to verify that the file exists and has the correct permissions. You can also view the file&rsquo;s contents using</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat /tmp/testfile</span></span></code></pre></div><p>It&rsquo;s that easy! Most of the attributes displayed when you use the puppet resource command are configurable in a manifest file, so you can use puppet resource to determine how a system is currently configured, then copy the desired attributes into a manifest file to define that configuration. Let&rsquo;s add a few more things to our manifest:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-pp data-lang=pp><span style=display:flex><span><span style=color:#66d9ef>package</span> <span style=color:#75715e>{  &#39;nano&#39;:
</span></span></span><span style=display:flex><span><span style=color:#75715e>  ensure =&gt; &#39;present&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>user <span style=color:#75715e>{ &#39;cis527&#39;:
</span></span></span><span style=display:flex><span><span style=color:#75715e>  ensure =&gt; &#39;present&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>  shell =&gt; &#39;/bin/zsh&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>  home =&gt; &#39;/home/cis527&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>  managehome =&gt; true
</span></span></span><span style=display:flex><span><span style=color:#75715e>}</span></span></span></code></pre></div><p>Once you&rsquo;ve edited a manifest file, you can verify that your syntax is correct using the following command:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>puppet parser validate manifest.pp</span></span></code></pre></div><p>If you have any errors in your manifest file, it will give you the approximate line and column number. Be careful about your use of colons, commas, quotes, and brackets. As with any programming language, Puppet is very particular about the correct use of syntax.</p><p>Now, let&rsquo;s apply that manifest and see what happens:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo puppet apply manifest.pp</span></span></code></pre></div><p>Since the Nano package is already installed, it probably won&rsquo;t do much at this point. However, it should create the cis527 user. We can verify that it worked by switching to that user account. First, we&rsquo;ll need to set a password for it:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo passwd cis527</span></span></code></pre></div><p>Then, we can use that password and the switch user command to log in as that user:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>su cis527</span></span></code></pre></div><p>If all goes well, our terminal should change to show that we are logged in as the cis527 user. Of course, it is possible to define the desired password in the manifest file, but that is something you&rsquo;ll have to figure out on your own as you complete Lab 2. (I can&rsquo;t give everything away, can I?)</p><p>Before moving on to the next video, I encourage you to play around with this temporary manifest file a bit and see what other changes you can make to the resources we&rsquo;ve defined, or what other resources you can use here.</p><footer class=footline></footer></article></div></main></div><script src=/cis527/js/clipboard/clipboard.min.js?1755708857 defer></script><script src=/cis527/js/perfect-scrollbar/perfect-scrollbar.min.js?1755708857 defer></script><script src=/cis527/js/theme.min.js?1755708857 defer></script></div><script src=/cis527/js/tele-scroll.min.js?1755708857 defer></script></body></html>