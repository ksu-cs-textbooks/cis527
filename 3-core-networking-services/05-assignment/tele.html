<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Lab 3 - Core Networking Services Instructions Create three virtual machines meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Assignment :: CIS 527 Textbook"><meta name=twitter:description content="Lab 3 - Core Networking Services Instructions Create three virtual machines meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/3-core-networking-services/05-assignment/"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="Assignment :: CIS 527 Textbook"><meta property="og:description" content="Lab 3 - Core Networking Services Instructions Create three virtual machines meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Core Networking Services"><meta property="article:modified_time" content="2024-09-26T09:59:30-05:00"><meta itemprop=name content="Assignment :: CIS 527 Textbook"><meta itemprop=description content="Lab 3 - Core Networking Services Instructions Create three virtual machines meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta itemprop=dateModified content="2024-09-26T09:59:30-05:00"><meta itemprop=wordCount content="3707"><title>Assignment :: CIS 527 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis527/3-core-networking-services/05-assignment/ rel=canonical type=text/html title="Assignment :: CIS 527 Textbook"><link href=/cis527/3-core-networking-services/05-assignment/index.xml rel=alternate type=application/rss+xml title="Assignment :: CIS 527 Textbook"><link href=/cis527/3-core-networking-services/05-assignment/index.print.html rel=alternate type=text/html title="Assignment :: CIS 527 Textbook"><link href=/cis527/3-core-networking-services/05-assignment/embed.html rel=alternate type=text/html title="Assignment :: CIS 527 Textbook"><link href=/cis527/css/fontawesome-all.min.css?1737134625 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fontawesome-all.min.css?1737134625 rel=stylesheet></noscript><link href=/cis527/css/nucleus.css?1737134625 rel=stylesheet><link href=/cis527/css/auto-complete.css?1737134625 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/auto-complete.css?1737134625 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar.min.css?1737134625 rel=stylesheet><link href=/cis527/css/fonts.css?1737134625 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fonts.css?1737134625 rel=stylesheet></noscript><link href=/cis527/css/theme.css?1737134625 rel=stylesheet><link href=/cis527/css/theme-auto.css?1737134625 rel=stylesheet id=R-variant-style><link href=/cis527/css/chroma-auto.css?1737134625 rel=stylesheet id=R-variant-chroma-style><link href=/cis527/css/variant.css?1737134625 rel=stylesheet><link href=/cis527/css/print.css?1737134625 rel=stylesheet media=print><script src=/cis527/js/variant.js?1737134625></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.index_js_url="/cis527/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis527/css/custom.css?1737134625 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis527/3-core-networking-services/05-assignment/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=assignment>Assignment</h1><h3 id=lab-3---core-networking-services>Lab 3 - Core Networking Services</h3><h4 id=instructions>Instructions</h4><p>Create <strong>three</strong> virtual machines meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.</p><p>If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p><em>To be more blunt - this specification may be purposefully designed to be vague, and it is your responsibility to ask questions about any vagaries you find. Once you begin the grading process, you cannot go back and change things, so be sure that your machines meet the expected specification regardless of what is written here. &ndash;Russ</em></p></div></div><p>Also, to complete many of these items, you may need to refer to additional materials and references not included in this document. System administrators must learn how to make use of available resources, so this is a good first step toward that. Of course, there&rsquo;s always <a href=http://www.google.com rel=external target=_blank>Google</a>!</p><h4 id=time-expectation>Time Expectation</h4><p>This lab may take anywhere from <strong>1 - 6 hours</strong> to complete, depending on your previous experience working with these tools and the speed of the hardware you are using. Installing virtual machines and operating systems is very time-consuming the first time through the process, but it will be much more familiar by the end of this course.</p><hr><h3 id=task-0-create-3-vms>Task 0: Create 3 VMs</h3><p>For this lab, you&rsquo;ll need to have <strong>ONE Windows 11 VM</strong>, and <strong>TWO Ubuntu 24.04 VMs</strong> available. You may reuse existing VMs from Lab 1 or Lab 2. In either case, they should have the full expected configuration applied, either manually as in Lab 1 or via the Puppet Manifest files created for Lab 2.</p><p>For the second Ubuntu VM, you may either quickly install and configure a new VM from scratch following the Lab 1 guide or using the Puppet Manifest from Lab 2, or you may choose to create a copy of one of your existing Ubuntu VMs. If you choose to copy one, follow these steps:</p><ol><li>Completely shut down the VM - do not suspend it.</li><li>Close VMware Workstation.</li><li>Make a copy of the entire folder containing the VM.</li><li>Open the new VM in VMware Workstation (look for the .VMX file in the copied folder).</li><li>When prompted, select &ldquo;I copied it&rdquo; to reinitialize the network interface. <strong>THIS IS IMPORTANT!</strong></li><li>Boot the new VM, and change the hostname to <code>cis527s-&lt;your eID></code>.<ul><li><a href=https://linuxconfig.org/setting-the-hostname-on-ubuntu-24-04 rel=external target=_blank>Setting the Hostname on Ubuntu 24.04</a> from LinuxConfig.org<div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p><em>If you do not follow these instructions carefully, the two VMs may have conflicts on the network since they&rsquo;ll have identical networking hardware and names, making this lab much more difficult or impossible to complete. <strong>You have been warned!</strong> &ndash;Russ</em></p></div></div></li></ul></li></ol><p>Clearly label your original Ubuntu VM as <strong>CLIENT</strong> and the new Ubuntu VM as <strong>SERVER</strong> in VMware Workstation so you know which is which. For this lab, we&rsquo;ll mostly be using the <strong>SERVER</strong> VM, but will use the <strong>CLIENT</strong> VM for some testing and as part of the SNMP example in Task 5.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p><strong>VMware Fusion (Mac) Users</strong> - Before progressing any further, I recommend creating a new NAT virtual network configuration and moving all of your VMs to that network, instead of the default &ldquo;Share with my Mac&rdquo; (vmnet8) network. In this lab, you&rsquo;ll need to disable DHCP on the network you are using, which is very difficult to do on the default networks. You can find relevant instructions in <a href=https://docs.vmware.com/en/VMware-Fusion/13/com.vmware.fusion.using.doc/GUID-7D8E5A7D-FF0C-4975-A794-FF5A9AE83234.html rel=external target=_blank>Add a NAT Configuration</a> and <a href=https://docs.vmware.com/en/VMware-Fusion/13/com.vmware.fusion.using.doc/GUID-84AC2D7D-4A44-4AB6-BAF8-F12C55E71A2F.html rel=external target=_blank>Connect and Set Up the Network Adapter</a> in the VMware Fusion 13 Documentation.</p></div></div><hr><h3 id=task-1-remote-connections>Task 1: Remote Connections</h3><p><strong>PART A:</strong> On your Windows 11 VM, activate the <strong>Remote Desktop</strong> feature to allow remote access.</p><ul><li>Both the <code>cis527</code> and <code>AdminAccount</code> accounts should be able to access the system remotely, as well as the default system <code>Administrator</code> account.</li><li>In addition, <strong>change the port</strong> used by Remote Desktop to be 34567.<div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>You&rsquo;ll need to edit the registry and reboot the computer to accomplish this task. &ndash;Russ</em></p></div></div></li><li>You&rsquo;ll also need to make sure appropriate firewall rules are in place to accept these incoming connections, and ensure the firewall is properly enabled.</li><li>You can test your connection from your Linux VM using the <strong>Remmina</strong> program.</li></ul><p><strong>PART B:</strong> On your Ubuntu 24.04 VM labelled <strong>SERVER</strong>, install and activate the <strong>OpenSSH Server</strong> for remote access.</p><ul><li>Both the <code>cis527</code> and <code>AdminUser</code> accounts should be able to access the system remotely.</li><li>In addition, <strong>change the port</strong> used by the SSH server to 23456.<div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>In the SSH configuration file, the entries starting with a <code>#</code> are comments. Typically the default values for each setting are included in the configuration file but commented out. In Ubuntu 24.04, you need to fully reboot the system for changes to the SSH configuration file to take effect! &ndash;Russ</em></p></div></div></li><li>You&rsquo;ll also need to make sure the appropriate firewall rules are in place to accept these incoming connections, and ensure the firewall is properly enabled.</li><li>You can test your connection from your Windows VM using the <code>ssh</code> command in PowerShell, or from the Ubuntu 24.04 VM labelled <strong>CLIENT</strong> using the <code>ssh</code> command.<div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>See the appropriate pages in the Extras module for more information about WSL and SSH. &ndash;Russ</em></p></div></div></li></ul><h4 id=resources>Resources</h4><ul><li><a href=https://learn.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-allow-access rel=external target=_blank>Enable Remote Desktop on your PC</a> from Microsoft Support</li><li><a href=https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/change-listening-port rel=external target=_blank>How to Change the Listening Port for Remote Desktop</a> from Microsoft Support</li><li><a href=https://tweaks.com/windows/50743/change-remote-desktop-rdp-port/ rel=external target=_blank>Change Remote Desktop RDP Port</a> from Tweaks.com</li><li><a href=https://ubuntu.com/server/docs/service-openssh rel=external target=_blank>OpenSSH Server</a> from the Ubuntu Server Guide</li><li><a href=https://help.ubuntu.com/community/SSH/OpenSSH/Configuring rel=external target=_blank>Configuring OpenSSH</a> from Ubuntu Community Help Wiki</li><li><a href=https://linuxconfig.org/quick-guide-to-enabling-ssh-on-ubuntu-24-04 rel=external target=_blank>Quick Guide to Enabling SSH on Ubuntu 24.04</a> from LinuxConfig.org</li></ul><hr><h3 id=task-2-ubuntu-static-ip-address>Task 2: Ubuntu Static IP Address</h3><p>On your Ubuntu 24.04 VM labelled <strong>SERVER</strong>, set up a static IP address. The host part of the IP address should end in <code>.41</code>, and the network part should remain the same as the one automatically assigned by VMware.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>So, if your VMware is configured to give IP addresses in the <code>192.168.138.0/24</code> network, you&rsquo;ll set the computer to use the <code>192.168.138.41</code> address.</p></div></div><p>You&rsquo;ll need to set the following settings correctly:</p><ul><li>IP Address</li><li>Subnet Mask</li><li>Default Gateway<div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>VMware typically uses host <code>2</code> as its internal router to avoid conflicts with home routers, which are typically on host <code>1</code>. So, on the <code>192.168.138.0/24</code> network, the default gateway would usually be <code>192.168.138.2</code>. When in doubt, you may want to record these settings on one of your working VMs before changing them.</p></div></div></li><li>DNS Servers. Use one of the following options:<ul><li>Your Default Gateway Address (easiest). VMware&rsquo;s internal router also acts as a DNS resolver for you, just like a home router would</li><li>Off Campus: <a href=https://www.opendns.com/setupguide/ rel=external target=_blank>OpenDNS</a> (<code>208.67.222.222</code> and <code>208.67.220.220</code>) or <a href=https://developers.google.com/speed/public-dns/ rel=external target=_blank>Google DNS</a> (<code>8.8.8.8</code> and <code>8.8.4.4</code>)</li><li>On Campus: <a href=https://www.k-state.edu/its/dns/registration.html rel=external target=_blank>K-State&rsquo;s DNS Servers</a> (<code>10.130.30.52</code> and <code>10.130.30.53</code>)</li></ul></li></ul><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>I personally recommend using the graphical tools in Ubuntu to configure a static IP address. There are many resources online that direct you to use netplan or edit configuration files manually, but I&rsquo;ve found that those methods aren&rsquo;t as simple and many times lead to an unusable system if done incorrectly. In any case, <strong>making a snapshot before this step</strong> is recommended, in case you have issues. &ndash;Russ</em></p></div></div><h4 id=resources-1>Resources</h4><ul><li><a href=https://linuxconfig.org/how-to-configure-static-ip-address-on-ubuntu-20-04-focal-fossa-desktop-server rel=external target=_blank>How to Configure Static IP Address on Ubuntu 20.04 Focal Fossa Desktop/Server</a> from LinuxConfig.org</li><li><a href=https://linoxide.com/linux-how-to/configure-static-ip-address-ubuntu/ rel=external target=_blank>How to Configure Static IP Address on Ubuntu 18.04</a> from LinOxide (should work for 20.04 as well)</li><li><em>The Command Line Way: <a href=https://ubuntu.com/server/docs/network-configuration rel=external target=_blank>Network Configuration</a> from Ubuntu Server Guide.</em></li></ul><hr><h3 id=task-3-dns-server>Task 3: DNS Server</h3><p>For this step, install the <code>bind9</code> package on the Ubuntu 24.04 VM labelled <strong>SERVER</strong>, and configure it to act as a <strong>primary master</strong> and <strong>caching nameserver</strong> for your network. You&rsquo;ll need to include the configuration for both types of uses in your config file. In addition, you&rsquo;ll need to configure both the <strong>zone file</strong> and <strong>reverse zone file</strong>, as well as <strong>forwarders</strong>.</p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>These instructions were built based on the <a href=https://www.digitalocean.com/community/tutorials/how-to-configure-bind-as-a-private-network-dns-server-on-ubuntu-22-04 rel=external target=_blank>How To Configure BIND as a Private Network DNS Server on Ubuntu 22.04</a> guide from DigitalOcean. In general, you can follow the first part of that guide to configure a Primary DNS Server, making the necessary substitutions listed below. The guide works for Ubuntu 24.04 as well. &ndash;Russ</em></p></div></div><p>In your configuration, include the following items:</p><ul><li><p>All files:</p><ul><li>Since you are not creating a Secondary DNS Server, you can leave out any <code>allow-transfer</code> entries from all configuration files.</li></ul></li><li><p><code>named.conf.options</code> file:</p><ul><li>Create an ACL called <code>cis527</code> that includes your entire VM network in CIDR notation. Do not list individual IP addresses.</li><li>Enable recursion, and allow all computers in the <code>cis527</code> ACL to perform recursive queries.</li><li>Configure DNS forwarding, using one of the options given above in Task 2. I recommend using the same option as above, since you have (<em>hopefully</em>) already confirmed that it works for your situation.</li></ul></li><li><p><code>named.conf.local</code> file:</p><ul><li>Create a zone file and reverse zone file, stored in <code>/etc/bind/zones</code>.<div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>The DigitalOcean guide uses a <code>/16</code> subnet of <code>10.128.0.0/16</code>, and includes the <code>10.128</code> portion in the reverse zone file name and configuration. For your VM network, you are most likely using a <code>/24</code> subnet, such as <code>192.168.40.0/24</code>, so you can include the <code>192.168.40</code> portion in your zone file name and configuration. In that case, the zone name would be <code>40.168.192.in-addr.arpa</code>, and the file could be named accordingly. Similarly, in the reverse zone file itself, you would only need to include the last segment of the IP address for each PTR record, instead of the last two. Either way is correct.</p></div></div></li><li>List those files by path in this file in the correct zone definitions.</li></ul></li><li><p>Zone files:</p><ul><li>Use <code>&lt;your eID>.cis527.org</code> as your fully qualified domain name (FQDN) in your configuration file. (Example: <code>russfeld.cis527.org</code>)<div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Domain Ownership</div><div class=box-content><em>For full disclosure, I own the <code>cis527.org</code> domain name, so you don&rsquo;t have to worry about any configurations causing issues with an actual website.&ndash;Russ</em></div></div></li><li>Use <code>ns.&lt;your eID>.cis527.org</code> as the name of your authoritative nameserver. You can use <code>admin.&lt;your eID>.cis527.org</code> for the contact email address.<div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>Since the at symbol <code>@</code> has other uses in the DNS Zone file, the email address uses a period <code>.</code> instead. So, the email address <code>admin@&lt;your eID>.cis527.org</code> would be written as <code>admin.&lt;your eID>.cis527.org</code>.</p></div></div></li><li>Don&rsquo;t forget to increment the <code>serial</code> field in the <code>SOA</code> record each time you edit the file. Otherwise your changes may not take effect.</li><li>Create an NS record for <code>ns.&lt;your eID>.cis527.org</code>.<div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>HINT: The DigitalOcean guide does not include an at symbol <code>@</code> at the beginning of that record, but I&rsquo;ve found that sometimes it is necessary to include it in order to make the <code>named-checkzone</code> command happy. See a related post on <a href=https://serverfault.com/questions/802762/reverse-dns-bind-named-checkzone-zone-ns-has-no-address-records-a-or-aaaa-err rel=external target=_blank>ServerFault</a> for additional ways to solve that common error.&ndash;Russ</em></p></div></div></li></ul></li><li><p>Forward Zone File:</p><ul><li>Create an A record for <code>ns.&lt;your eID>.cis527.org</code> that points to your Ubuntu 24.04 VM labelled <strong>SERVER</strong> using the IP address in your network ending in <code>41</code> as described above.</li><li>Create an A record for <code>ad.&lt;your eID>.cis527.org</code> that points to the IP address in your network ending in <code>42</code>. <em>(You&rsquo;ll use that IP address in the next assignment for your Windows server.)</em> This record will be for the Active Directory server in Lab 4</li><li>Create a CNAME record for <code>ubuntu.&lt;your eID>.cis527.org</code> that redirects to <code>ns.&lt;your eID>.cis527.org</code>.</li><li>Create a CNAME record for <code>ldap.&lt;your eID>.cis527.org</code> that redirects to <code>ns.&lt;your eID>.cis527.org</code>.</li><li>Create a CNAME record for <code>windows.&lt;your eID>.cis527.org</code> that redirects to <code>ad.&lt;your eID>.cis527.org</code>.</li></ul></li><li><p>Reverse Zone File:</p><ul><li>Create a PTR record for the IP address ending in <code>41</code> that points to <code>ns.&lt;your eID>.cis527.org</code>.</li><li>Create a PTR record for the IP address ending in <code>42</code> that points to <code>ad.&lt;your eID>.cis527.org</code>.</li></ul></li></ul><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>HINT: The periods, semicolons, and whitespace in the DNS configuration files are very important! Be very careful about formatting, including the trailing periods after full DNS names such as <code>ad.&lt;your eID>.cis527.org.</code>. &ndash;Russ</em></p></div></div><p>Once you are done, I recommend checking your configuration using the <code>named-checkconf</code> and <code>named-checkzone</code> commands. Note that the second argument to the <code>named-checkzone</code> command is the full path to your zone file, so you may need to include the file path and not just the name of the file. Example: <code>named-checkzone russfeld.cis527.org /etc/bind/zones/db.russfeld.cis527.org</code></p><p>Of course, you may need to update your firewall configuration to allow incoming DNS requests to this system! <strong>If your firewall is disabled and/or not configured, there will be a deduction of up to 10% of the total points on this lab</strong></p><p>To test your DNS server, you can set a static DNS address on either your Windows or Ubuntu VM labelled <strong>CLIENT</strong>, and use the <code>dig</code> or <code>nslookup</code> commands to verify that each DNS name and IP address is resolved properly.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>See the <a href=/cis527/3-core-networking-services/17-bind-troubleshooting/>Bind Troubleshooting</a> page for some helpful screenshots of using <code>dig</code> to debug DNS server configuration.</p></div></div><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>As of 2023, the DNS servers on campus do not seem to support DNSSEC, which may cause issues with forwarders. If you are connected to the campus network, I recommend changing the setting in <code>named.conf.options</code> to <code>dnssec-validation no;</code> to disable DNSSEC validation - that seems to resolve the issue.</p></div></div><h4 id=resources-2>Resources</h4><ul><li><a href=https://www.digitalocean.com/community/tutorials/how-to-configure-bind-as-a-private-network-dns-server-on-ubuntu-22-04 rel=external target=_blank>How To Configure BIND as a Private Network DNS Server on Ubuntu 22.04</a> from DigitalOcean (works for Ubuntu 24.04)</li><li><a href=https://help.ubuntu.com/community/BIND9ServerHowto rel=external target=_blank>Bind9 Server How-To</a> from Ubuntu Community Help Wiki</li><li><a href=https://ubuntu.com/server/docs/domain-name-service-dns rel=external target=_blank>DNS Configuration</a> from Ubuntu Server Guide</li><li><a href=https://serverfault.com/questions/802762/reverse-dns-bind-named-checkzone-zone-ns-has-no-address-records-a-or-aaaa-err rel=external target=_blank>Reverse DNS/bind named-checkzone &ldquo;zone NS has no address records (A or AAAA) error&rdquo;</a> on ServerFault (<em>common error in previous semesters</em>)</li></ul><hr><h3 id=task-4-dhcp-server>Task 4: DHCP Server</h3><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><h3 id=read-this-carefully>READ THIS CAREFULLY</h3><p><em>Make ABSOLUTELY sure that the VMware virtual network you are using is not a &ldquo;Bridged&rdquo; or &ldquo;Shared&rdquo; network before continuing. It <strong>MUST</strong> be using &ldquo;NAT&rdquo;. You can check by going to <strong>Edit > Virtual Network Editor</strong> in VMware Workstation or <strong>VMware Fusion > Preferences > Network</strong> in VMware Fusion and looking for the settings of the network each of your VMs is configured to use.</em></p><p><em>Having your network configured incorrectly while performing this step is a great way to break the network your host computer is currently connected to, and in a worst case scenario will earn you a visit from K-State&rsquo;s IT staff (and they won&rsquo;t be happy)! &ndash;Russ</em></p></div></div><p>Next, install the <code>isc-dhcp-server</code> package on the Ubuntu 24.04 VM labelled <strong>SERVER</strong>, and configure it to act as a DHCP server for your internal VM network.</p><p>In your configuration, include the following items:</p><ul><li><p>In general, the network settings used by this DHCP server should match those used by VMware&rsquo;s internal router.</p><ul><li>You can also look at the network settings received by your Windows 11 VM, which at this point are from VMware&rsquo;s internal router.</li></ul></li><li><p>Use <code>&lt;your eID>.cis527.org</code> as the domain name. (Example: <code>russfeld.cis527.org</code>)</p></li><li><p>For the dynamic IP range, use IPs ending in <code>.100</code>-<code>.250</code> in your network.</p></li><li><p>For DNS servers, enter the <strong>IP address</strong> of your Ubuntu 24.04 VM labelled <strong>SERVER</strong> ending in <code>.41</code>. This will direct all DHCP clients to use the DNS server configured in Task 3.</p><ul><li>Do not use the domain name of your DNS server in your DHCP config file. While it <em>can</em> work, it depends on your DNS server being properly configured in Task 3.</li><li>Alternatively, for testing if your DNS server is not working properly, you can use one of the other DNS options given above in Task 2. However, you must be using the DNS server from Task 3 when graded for full credit.</li></ul></li></ul><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>A working solution can be fewer than 20 lines of actual settings (not including comments) in the settings file. If you find that your configuration is becoming much longer than that, you are probably making it too difficult and complex. &ndash;Russ</em></p></div></div><p>Of course, you may need to update your firewall configuration to allow incoming DHCP requests to this system! <strong>If your firewall is disabled and/or not configured, there will be a deduction of up to 10% of the total points on this lab</strong></p><p>Once your DHCP server is installed, configured, and running properly, turn off the DHCP server in VMware. Go to <strong>Edit > Virtual Network Editor</strong> in VMware Workstation or <strong>VMware Fusion > Preferences > Network</strong> in VMware Fusion and look for the NAT network you are using. There should be an option to disable the DHCP server for that network there.</p><p>Once that is complete, you can test the DHCP server using the Windows VM. To do so, restart your Windows VM so it will completely forget any current DHCP settings. When it reboots, if everything works correctly, it should get an IP address and network information from your DHCP server configured in this step. It should also be able to access the internet with those settings. An easy way to check is to run the command <code>ipconfig</code> in PowerShell and look for the DNS suffix of <code>&lt;your eID>.cis527.org</code> in the output.</p><h4 id=resources-3>Resources</h4><ul><li><a href=https://ubuntu.com/server/docs/how-to-install-and-configure-isc-dhcp-server rel=external target=_blank>Install and Configure ISC DHCP Server</a> from Ubuntu Documentation</li><li><a href=https://ubuntu.com/server/docs/network-dhcp rel=external target=_blank>Dynamic Host Configuration Protocol (DHCP)</a> from Ubuntu Server Guide</li><li><a href=https://tecadmin.net/install-dhcp-server-in-ubuntu/ rel=external target=_blank>How to Install DHCP Server in Ubuntu & Debian</a> from TecAdmin.net</li></ul><hr><h3 id=task-5-snmp-daemon>Task 5: SNMP Daemon</h3><p>Install an SNMP Daemon on the Ubuntu 24.04 VM labelled <strong>SERVER</strong>, and connect to it from your Ubuntu 24.04 VM labelled <strong>CLIENT</strong>. The DigitalOcean and Kifarunix tutorials linked below are a very good resource to follow for this part of the assignment. In that tutorial, the <strong>agent server</strong> will be your <strong>SERVER</strong> VM, and the <strong>manager server</strong> will be your <strong>CLIENT</strong> VM.</p><ol><li>In the tutorial, configure a user <code>cis527</code> using the password <code>cis527_snmp</code> for both the authentication and encryption passphrases.<ul><li>This user <strong>should not</strong> be created in the <code>snmpd.conf</code> file, and any &ldquo;bootstrap&rdquo; users should be removed.</li></ul></li><li>The DigitalOcean tutorial includes information for modifying the configuration file to make SNMP listen on all interfaces.</li><li>The DigitalOcean method for creating users does not work. Use the method in the Kifarunix tutorial for configuring SNMP version 3 users.</li><li>The DigitalOcean tutorial includes information for downloading the MIBS and configuring a <code>~/.snmp/snmp.conf</code> file that can store your user information.</li></ol><p>Of course, you may need to update your firewall configuration to allow incoming SNMP requests to this system! <strong>If your firewall is disabled and/or not configured, there will be a deduction of up to 10% of the total points on this lab</strong></p><p>Then, perform the following quick activity:</p><ol><li>While logged into the <strong>CLIENT</strong> VM, use the SNMP tools to query the number of ICMP Echos (pings) that have been received by the <strong>SERVER</strong> VM. Take a <strong>screenshot</strong> with the command used and the result clearly highlighted in the terminal output.<ul><li>You may use either <code>snmpget</code> and the OID number or name, or use <code>snmpwalk</code> and <code>grep</code> to find the requested information.</li></ul></li><li>Sent at least 10 ICMP Echos (pings) from the <strong>CLIENT</strong> VM to the <strong>SERVER</strong> VM and make sure they were properly received. Take a <strong>screenshot</strong> of the output, clearly showing how many pings were sent.<ul><li>If they weren&rsquo;t received, check your firewall settings.</li></ul></li><li>Once again, use the SNMP tools from the <strong>CLIENT</strong> VM to query the number of ICMP Echos (pings) that have been received by the <strong>SERVER</strong> VM. It should clearly show that it has increased by the number sent during the previous command. Take a <strong>screenshot</strong> with the command used and the result clearly highlighted in the terminal output. It should match the expected output based on the previous two screenshots.</li></ol><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p><em>You will present the screenshots as proof that you performed this activity for grading. You may preform all three commands in a single screenshot if desired. See <a href=/cis527/images/lab3-hint.png>this example</a> for an idea of what the output should look like. &ndash;Russ</em></p></div></div><h4 id=resources-4>Resources</h4><ul><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-an-snmp-daemon-and-client-on-ubuntu-18-04 rel=external target=_blank>How to Install and Configure an SNMP Daemon and Client on Ubuntu 18.04</a> from DigitalOcean (works for 24.04 as well)</li><li><a href=https://kifarunix.com/install-and-configure-snmp-on-ubuntu-debian/ rel=external target=_blank>Install and Configure SNMP on Ubuntu 22.04/Debian 11</a> from Kifarunix (includes correct command to create user accounts)</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-use-the-net-snmp-tool-suite-to-manage-and-monitor-servers rel=external target=_blank>How to Use The Net-SNMP Tool Suite to Manage and Monitor Servers</a> from DigitalOcean (works for 22.04)</li><li><a href=https://help.ubuntu.com/community/SNMPAgent rel=external target=_blank>SNMP Agent</a> from Ubuntu Community Help Wiki</li></ul><hr><h3 id=task-6-wireshark>Task 6: Wireshark</h3><p>Install Wireshark on the Ubuntu 24.04 VM labelled <strong>SERVER</strong>.</p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>Firefox recently released an update the enables <a href=https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/ rel=external target=_blank>DNS over HTTPS</a> by default. So, in order to use Firefox to request DNS packets that can be captured, you&rsquo;ll need to <a href=https://support.mozilla.org/en-US/kb/firefox-dns-over-https rel=external target=_blank>disable DNS over HTTPS</a> in Firefox. Alternatively, you can use <code>dig</code> to query DNS and capture the desired packets - this seems to be much easier to replicate easily.</p></div></div><p>Then, using Wireshark, create <strong>screenshots</strong> showing that you captured and can show the packet content of each of the following types of packets:</p><ol><li>A DNS standard query for an A record for <code>people.cs.ksu.edu</code></li><li>A DNS standard query response for <code>people.cs.ksu.edu</code><ul><li><em>HINT: It should respond with a CNAME record pointing to <code>invicta.cs.ksu.edu</code></em></li></ul></li><li>A DNS standard query response for a PTR record for <code>208.67.222.222</code> (it will look like <code>222.222.67.208.in-addr.arpa</code>)<ul><li><em>HINT: It should respond with a PTR record for <code>resolver1.opendns.com</code></em></li></ul></li><li>An ICMP Echo (ping) request</li><li>An encrypted SNMP packet showing <code>cis527</code> or <code>bootstrap</code> as the username (look for the <code>msgUserName</code> field)<ul><li><em>HINT: Use the commands from Task 5</em></li></ul></li><li>A DHCP Offer packet showing the Domain Name of <code>&lt;your ID>.cis527.cs.ksu.edu</code><ul><li><em>HINT: Reboot one of your other VMs to force it to request a new IP address, or use the <code>ipconfig</code> (Windows) or <code>dhclient</code> (Ubuntu) commands to renew the IP address</em></li></ul></li><li>An HTTP 301: Moved Permanently or HTTP 302: Found redirect response<ul><li><em>HINT: Clear the cache in your web browser, then navigate to <code>http://people.cs.ksu.edu/~sgsax</code> (without a trailing slash). It should redirect to <code>http://people.cs.ksu.edu/~sgsax/</code> (with a trailing slash).</em></li></ul></li><li>An HTTP Basic Authentication request, <strong>clearly showing the username and password in plaintext</strong> (expand the entries in the middle pane to find it).<ul><li><em>HINT: Visit <code>http://httpbin.org/basic-auth/testuser/testpass</code> and use <code>testuser</code> | <code>testpass</code> to log in</em></li></ul></li></ol><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>You&rsquo;ll present those 8 screenshots as part of the grading process for this lab, so I recommend storing them on the desktop of that VM so they are easy to find. Make sure your screenshot <strong>CLEARLY</strong> shows the data requested. Often you may have to expand sections of the packet analysis (lower-left pane) to find the requested information. &ndash;Russ</em></p></div></div><h4 id=resources-5>Resources</h4><ul><li><a href=https://itsfoss.com/install-wireshark-ubuntu/ rel=external target=_blank>Install and Use Wireshark on Ubuntu Linux</a> from It&rsquo;s FOSS</li></ul><hr><h3 id=task-7-make-snapshots>Task 7: Make Snapshots</h3><p>In each of the virtual machines created above, create a snapshot labelled &ldquo;Lab 3 Submit&rdquo; before you submit the assignment. The grading process may require making changes to the VMs, so this gives you a restore point before grading starts.</p><h3 id=task-8-schedule-a-grading-time>Task 8: Schedule A Grading Time</h3><p>Contact the instructor and schedule a time for interactive grading. You may continue with the next module once grading has been completed.</p><footer class=footline></footer></article></div></main></div></div><script src=/cis527/js/clipboard.min.js?1737134625 defer></script><script src=/cis527/js/perfect-scrollbar.min.js?1737134625 defer></script><script src=/cis527/js/theme.js?1737134625 defer></script><script src=/cis527/js/tele-scroll.js?1737134625 defer></script></body></html>