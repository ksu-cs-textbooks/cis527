<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Moving from in-house to online."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Cloud :: CIS 527 Textbook"><meta name=twitter:description content="Moving from in-house to online."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/5-the-cloud/"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="The Cloud :: CIS 527 Textbook"><meta property="og:description" content="Moving from in-house to online."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="The Cloud :: CIS 527 Textbook"><meta itemprop=description content="Moving from in-house to online."><meta itemprop=datePublished content="2018-08-24T10:53:05-05:00"><meta itemprop=dateModified content="2023-08-10T17:06:42-05:00"><meta itemprop=wordCount content="5"><title>The Cloud :: CIS 527 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis527/5-the-cloud/ rel=canonical type=text/html title="The Cloud :: CIS 527 Textbook"><link href=/cis527/5-the-cloud/index.xml rel=alternate type=application/rss+xml title="The Cloud :: CIS 527 Textbook"><link href=/cis527/5-the-cloud/tele.html rel=alternate type=text/html title="The Cloud :: CIS 527 Textbook"><link href=/cis527/5-the-cloud/embed.html rel=alternate type=text/html title="The Cloud :: CIS 527 Textbook"><link href=/cis527/css/fontawesome-all.min.css?1731425495 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fontawesome-all.min.css?1731425495 rel=stylesheet></noscript><link href=/cis527/css/nucleus.css?1731425495 rel=stylesheet><link href=/cis527/css/auto-complete.css?1731425495 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/auto-complete.css?1731425495 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar.min.css?1731425495 rel=stylesheet><link href=/cis527/css/fonts.css?1731425495 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fonts.css?1731425495 rel=stylesheet></noscript><link href=/cis527/css/theme.css?1731425495 rel=stylesheet><link href=/cis527/css/theme-auto.css?1731425495 rel=stylesheet id=R-variant-style><link href=/cis527/css/chroma-auto.css?1731425495 rel=stylesheet id=R-variant-chroma-style><link href=/cis527/css/variant.css?1731425495 rel=stylesheet><link href=/cis527/css/print.css?1731425495 rel=stylesheet media=print><link href=/cis527/css/format-print.css?1731425495 rel=stylesheet><script src=/cis527/js/variant.js?1731425495></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.index_js_url="/cis527/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis527/css/custom.css?1731425495 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis527/5-the-cloud/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>The Cloud</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis527/4-directory-services/13-azurevms/ title="Creating Azure VMs (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis527/5-the-cloud/01-introduction/ title="Introduction (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 5</div><h1 id=the-cloud>The Cloud</h1><p>Moving from in-house to online.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of The Cloud</h1><article class=default><header class=headline></header><h1 id=introduction>Introduction</h1><a href="https://www.youtube.com/watch?v=2lQCCmMtIu8">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/5-the-cloud/01-introduction-slides/>Slides</a></strong></li><li><strong><a href=https://education.github.com/pack rel=external target=_blank>GitHub Student Developer Pack</a></strong></li></ul><h4 id=video-transcript>Video Transcript</h4><p>Welcome to Module 5! In this module, we&rsquo;ll learn all about one of the hottest topics in system administration today: the cloud! Many enterprises today are in the process of moving their operations to the cloud, or may have already completely done so. However, some organizations may not find it feasible to use the cloud for their operations, and we&rsquo;ll discuss some of those limitations.</p><p>For the lab assignment, you&rsquo;ll create a few cloud systems and learn how to configure them for security and usability, We&rsquo;ll also start creating some cloud resources for an organization, which we&rsquo;ll continue working with in Lab 6.</p><p>As a sidenote, this lab involves working with resources on the cloud, and will require you to sign up and pay for those services. In general, your total cost should be low, usually around $20 total. If you haven&rsquo;t already, you can sign up for the GitHub Student Developer Pack, linked in the resources below this video, to get discounts on most of these items. If you have any concerns about using these services, please contact me to make alternative arrangements! While I highly recommend working with actual cloud services in this course, there are definitely other ways to complete this material.</p><p>As always, if you have any questions or run into issues, please post in the course discussion forums to get help. Good luck!</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=the-cloud-overview>The Cloud Overview</h1><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>TODO <em>As of 2020, both KSIS and HRIS have moved to the cloud, leaving very few K-State resources hosted directly on campus. This video will be updated in future semesters to reflect that change. -Russ</em></p></div></div><a href="https://www.youtube.com/watch?v=Tzo7N-boVJ4">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/5-the-cloud/02-the-cloud-overview-slides/>Slides</a></strong></li><li><a href=http://en.wikipedia.org/wiki/Cloud_computing rel=external target=_blank>Cloud Computing</a> on Wikipedia</li><li><a href=https://www.informationweek.com/software/information-management/the-cloud-electric-generator-analogy/d/d-id/1075830 rel=external target=_blank>The Cloud/Electric Generator Analogy</a> by Roger Smith from InformationWeek</li><li><a href="http://www.nicholascarr.com/?page_id=21/" rel=external target=_blank>The Big Switch: Rewiring the World from Editson to Google</a> by Nicholas Carr</li><li><a href=http://en.wikipedia.org/wiki/Virtual_private_network rel=external target=_blank>Virtual Private Network</a> on Wikipedia</li><li><a href=http://en.wikipedia.org/wiki/Service-oriented_architecture rel=external target=_blank>Service Oriented Architecture</a> on Wikipedia</li><li><a href=https://aws.amazon.com/blogs/aws/lots-of-bits/ rel=external target=_blank>Lots of Bits</a> by Jeff Barr on AWS News Blog</li><li><a href=http://www.rightscale.com/blog/enterprise-cloud-strategies/animotos-facebook-scale rel=external target=_blank>Animotos Facebook Scale-Up</a> by Thorsten von Eicken from RightScale</li></ul><h4 id=video-transcript>Video Transcript</h4><p>To begin this module, let&rsquo;s take a few minutes to discuss its major topic, the cloud. At this point, some of you may be wondering what exactly I&rsquo;m talking about when I refer to the cloud. My hope is that, by the end of this video, you&rsquo;ll have a much clearer mental picture of exactly what the cloud is and how it is related to all of the things we&rsquo;ve been working with in this class so far.</p><p>Without giving too much of the answer away, I always like to refer to this comic strip from XKCD when defining the cloud. Take a minute to read it and ponder what it says before continuing with this video.</p><p>To start, one way you can think of cloud computing is the applications and resources that you are able to access in the cloud. It could be an email address, social media website, finance tracking application, or even a larger scale computing and storage resource. All of those could be part of the cloud. To access them, we use the devices available to us, such as our computers, laptops, tablets, phones, but even our TVs, game consoles, and media players all access and use the cloud.</p><p>One of the core concepts underlying the cloud is the centralization of resources. This is not a new idea by any stretch of the imagination. In fact, many comparisons have been made between the growth of large electric power plants and the growth of the cloud. Here, you can see both of those worlds colliding, as this picture shows Amazon&rsquo;s founder, Jeff Bezos, standing in front of an old electric generator from the 1890s at a beer brewery in Belgium.</p><p>In the early days of electricity, if a company wanted to use electricity in their factory, they usually had to purchase a power generator such as this one and produce their own. Companies really liked this approach, as they could be completely in control of their costs and production, and didn&rsquo;t have to worry about failures and problems that they couldn&rsquo;t resolve themselves.</p><p>Generating electricity is also a very inefficient process, but it can be made much more efficient by scaling up. A single company may not use all of the electricity they generate all the time, and any issues with the generator could cause the whole operation to slow down until it is resolved. But, if many companies could band together and share their electrical systems, the process can be much more efficient and the power supply more secure than each company could provide on their own.</p><p>It was during this time that several companies were formed to do just that: provide a large scale power generation and distribution network. Many companies were initially hesitant to give up their generators, fearing that they would be at the mercy of someone else for the power to run their operations, and that such a large scale system wasn&rsquo;t sustainable in the long run. However, their fears proved to be false, and within a few decades nearly all of them had switched to the growing power grid.</p><p>For K-State, most of our electricity comes from Jeffrey Energy Center near Wamego, KS. It is capable of generating over 2 gigawatts of power, enough to power over one million homes. For most of us, we don&rsquo;t even take the time to think about where our electricity comes from, we just take it for granted that it will be there when we need it, and that there is more than enough of it to go around.</p><p>The cloud was developed for many of those same reasons. This story is detailed in depth in the book &ldquo;The Big Switch&rdquo; by Nicholas Carr. I encourage you to check it out if you are interested in the history of the cloud.</p><p>The concept of a cloud got its start all the way back in the 1950s with the introduction of time sharing on mainframe computers. This allowed many users to share the same computer, with each running her or his programs when the others were busy writing or debugging. Later on, many networking diagrams started to use a cloud symbol to denote unknown networks, leading to the name &ldquo;the cloud&rdquo; referring to any unknown resource on the internet.</p><p>In the 1990s, large businesses started connecting their branch offices with virtual private networks, or VPNs. In this way, a branch office in New York could access shared files and resources from the main office in California. Over time, the physical location of the resources became less and less important - if it could be in California, why couldn&rsquo;t it just be anywhere? By this point, people were ready to adopt the cloud into their lives.</p><p>The explosion in popularity came with the rise of Web 2.0 after the dot-com bubble burst, but also in 2006 with the introduction of Amazon&rsquo;s Elastic Compute Cloud, or EC2. Originally, companies who wanted to have a website or process large amounts of data would purchase large computing systems and place them directly in their own offices. They would also have to hire staff to manage and maintain those systems, as well as deal with issues such as power and cooling. Over time, they also started to realize that they may not be making efficient use of those systems, as many of them would remain idle during slower business periods. At the same time, larger companies with idle computing resources realized they could sell those resources to others in order to recoup some of their costs, and possibly even make a nice profit from it. Other companies realized that they could make money by providing some of those resources as a service to others, such as web hosting and email.</p><p>Amazon was one such company. Since they were primarily in the retail business at that time, they had to build a system capable of handling the demands of the busy retail seasons. However, most of the time those resources were idle, and they simply cost the company money to maintain them. So, Amazon decided to sell access to those computing resources to other companies for a small fee, letting them use the servers that Amazon didn&rsquo;t need for most of the year. They stumbled into a gold mine. This graph shows the total bandwidth used by Amazon&rsquo;s global websites, and then the bandwidth for Amazon Web Services, part of their cloud computing offerings. Less than a year after it launched, Amazon was using more bandwidth selling cloud resources to others than their own website used, typically one of the top 10 websites in the world. Some people have referred to this graph as the &ldquo;hockey stick&rdquo; graph, showing the steep incline and growth of the cloud. Other companies quickly followed suit, and the cloud as we know it today was born.</p><p>For many cloud systems today, we use an architecture known as a &ldquo;service-oriented&rdquo; architecture. In essence, a cloud company could build their system out of a variety of services, either hosted by themselves or another cloud provider. For example, a social media site might have their own web application code, but the website itself is hosted by Amazon Web Services, and the data is stored in Google&rsquo;s Firebase. In addition, their authentication would be handled by many different third-parties through OAuth, and even their code and testing is handled via GitHub, Travis and Jenkins. By combining all of those services together, a company can thrive without ever owning even a single piece of hardware. Many start-ups today are doing just this in order to quickly grow and keep up with new technologies.</p><p>According to the National Institute of Standards and Technology, or NIST, there are a few primary characteristics that must be met in order for a computer system to be considered a &ldquo;cloud&rdquo; system. First, it must have on-demand, self-service for customers. That means that any customer can request resources as needed on their own, without any direct interaction with the hosting company. Secondly, that resource must be available broadly over the internet, not just within a smaller subnetwork. In addition, the system should take advantage of resource pooling, meaning that several users can be assigned to the same system, allowing for better scaling of those resources. On top of that, systems in the cloud should allow for rapid elasticity, allowing users to scale up and down as needed, sometimes at a moment&rsquo;s notice. Finally, since users may be scaling up and down often, the service should be sold on a measured basis, meaning that users only pay for the resources they use.</p><p>Beyond that, there are a few other reasons that cloud computing is a very important resource for system administrators today. First, cloud computing resources are location independent. They could be located anywhere in the world, and as long as they are connected to the internet, they can be accessed from anywhere. Along with resource pooling, most cloud providers practice multi-tenancy, meaning that multiple users can share the same server. Since most users won&rsquo;t use all of a server&rsquo;s computing resources all the time, it is much cheaper to assign several different users to the same physical system in order to reduce costs. Also, in many ways a cloud system can be more reliable than a self-hosted one. For cloud systems, it is much simpler for a larger organization to shift resources around to avoid hardware failures, whereas a smaller organization may not have the budget to maintain a full backup system. We&rsquo;ve already discussed the scalability and elasticity, but for many organizations who are hoping to grow quickly, this is a very important factor in their decision to host resources in the cloud. Finally, no discussion of the cloud would be complete without talking about security. In some ways, the cloud could be more secure, as cloud providers typically have entire teams dedicated to security, and they are able to easily keep up with the latest threats and software updates. However, by putting a system on the cloud, it could become a much easier target for hackers as well.</p><p>One of the best examples demonstrating the power of the cloud is the story of Animoto. Animoto is a website that specializes in creating video montages from photos and other sources. In 2008, their service exploded in popularity on Facebook, going from 25,000 users to 250,000 users in three days. Thankfully, they had already configured their system to use the automatic scaling features of AWS, so they were able to handle the increased load. At the peak, they were configuring 40 new cloud instances for their render farm each minute, which was receiving more than 450 render requests per minute. Each render operation would take around 10 minutes to complete. Compare that to a traditional enterprise: there is no way a traditional company would be able to purchase and configure 40 machines a minute, and even if it was possible, the costs would be astronomical. For Animoto, the costs scaled pretty much linearly with their user base, so they were able to continue providing their service without worrying about the costs. Pretty cool, right?</p><p>When dealing with the cloud, there are many different service models. Some of the most common are Software as a Service, Infrastructure as a Service, and Platform as a Service. Many times you&rsquo;ll see these as initialisms such as SaaS, IaaS, and PaaS, respectively. This diagram does an excellent job of showing the difference between these models. First, if you decide to host everything yourself, you have full control and management of the system. It is the most work, but provides the most flexibility. Moving to Infrastructure as a Service, you use computing resources provided by a cloud provider, but you are still responsible for configuring and deploying your software on those services. AWS and DigitalOcean are great examples of Infrastructure as a Service. Platform as a Service is a bit further into the cloud, where you just provide the application and data, but the rest of the underlying system is managed by the cloud provider. Platforms such as Salesforce and Heroku are great examples here. Finally, Software as a Service is the situation where the software itself is managed by the cloud provider. Facebook, GMail, and Mint are all great examples of Software as a Service - you are simply using their software in the cloud.</p><p>In the past, there was a great analogy comparing these models to the different ways you could acquire pizza. You could make it at home, do take and bake, order delivery, or just go out and eat pizza at your favorite pizza restaurant. However, a few commentators recently pointed out a flaw in this model. Can you find it? Look at the Infrastructure as a Service model, for take and bake pizza. In this instance, you are getting pizza from a vendor, but then providing all of the hardware yourself. Isn&rsquo;t that just the opposite of how the cloud is supposed to work?</p><p>They propose this different model for looking at it. Instead of getting the pizza and taking it home, what if you could make your own pizza, then use their oven to bake it? It in this way, you maintain the ultimate level of customizability that many organizations want when they move to the cloud, without having the hassle of dealing with maintaining the hardware and paying the utility bills associated with it. That&rsquo;s really what the cloud is about - you get to make the decisions about the parts you care about most, such as the toppings, but you don&rsquo;t have to deal with the technical details of setting up the ovens and baking the pizza itself.</p><p>Along with the different service models for the cloud, there are a few different deployment models as well. For example, you might have an instance of a cloud resource that is private to an organization. While this may not meet the NIST definition for a cloud resource, most users in that organization really won&rsquo;t know the difference. A great example of this is Beocat here at K-State. It is available as a free resource to anyone who wants to use it, but in general they don&rsquo;t have to deal with setting up or maintaining the hardware. There are, of course, public clouds as well, such as AWS, DigitalOcean, and many of the examples we&rsquo;ve discussed so far. Finally, there are also hybrid clouds, where some resource are on-site and others are in the cloud, and they are seamlessly connected. K-State itself is a really great example of this. Some online resources are stored on campus, such as KSIS and HRIS, while others are part of the public cloud such as Canvas and Webmail. All together, they make K-State&rsquo;s online resources into a hybrid cloud that students and faculty can use.</p><p>Of course, moving an organization to the cloud isn&rsquo;t simple, and there are many things to be concerned about when looking at the cloud as a possible part of your organization&rsquo;s IT infrastructure. For example, cloud providers may have insecure interfaces and APIs, allowing malicious users to access or modify your cloud resources without your knowledge. You could also have data loss or leakage if your cloud systems are configured incorrectly. In addition, if the service provider experiences a major hardware failure, you might be unable to recover for several days while they resolve the problem. For example, several years ago K-State&rsquo;s email system experienced just such a hardware failure, and it was nearly a week before full email access was restored across campus. Unfortunately, this happened about two weeks before finals, so it was a very stressful time for everyone involved.</p><p>There are also many security concerns. One of those is the possibility of a side-channel attack. In essence, this involves a malicious person who is using the same cloud provider as you. Once they set up their cloud system, they configure it in such a way as to scan nearby hardware and network connections, trying to get access to sensitive data from inside the cloud provider&rsquo;s network itself. The recent Spectre and Meltdown CPU vulnerabilities are two great examples of side-channel attacks.</p><p>Also, if you are storing data on a cloud provider&rsquo;s hardware, you may have to deal with legal data ownership issues as well. For example, if the data from a United States-based customer is stored on a server in the European Union, which data privacy laws apply? What if the data is encrypted before it is sent to the EU? What if the company is based on Japan? Beyond that, if there is a problem, you won&rsquo;t have physical control of the servers or the data. If your cloud hosting provider is sold or goes out of business, you may not even be able to access your data directly. Finally, since cloud providers host many different organizations on the same hardware, you might become a bigger target for hackers. It is much more likely for a hacker to attack AWS then a small organization. So, there are many security concerns to consider when moving to the cloud.</p><p>In addition, there are a few roadblocks that may prevent your organization from being able to fully embrace the cloud. You should carefully consider each of these as you are evaluating the cloud and how useful it would be for you. For example, does the cloud provide the appropriate architecture for your application? Are you able to integrate the cloud with your existing resources? Will the change require lots of work to retrain your employees and reshape business practices to take full advantage of the cloud? I highly encourage you to read some of the linked resources below this video to find great discussions of the cloud and how it fits into an organization&rsquo;s IT infrastructure.</p><p>Regardless, many organizations are currently moving toward the cloud, and the rate of adoption is increasing each year. This infographic gives some of the predictions and trends for the cloud from 2015. For me, the big takeaways from this data is that companies are devoting more and more of their IT budgets toward the cloud, but they are hoping to turn that into cost-savings down the road. At the same time, their biggest concern moving to the cloud is finding people with enough experience to manage it properly while avoiding some of the security pitfalls along the way. So, learning how to work with the cloud will help you build a very valuable skill in the IT workplace of the future.</p><p>So, back to the question from the beginning of this video: what is the cloud? According to Esteban Kolsky, a cloud marketing consultant, the cloud is really a term for many things. In one way, the cloud is the internet itself, and all of the resources available on it. From Amazon to Yelp and everything in between, each of those websites and applications provides a service to us, their consumers. At the same time, the cloud is a delivery model, or a way to get information, applications, and data into the hands of the people who need it. This class itself is being delivered via the cloud, from that point of view at least. Finally, the cloud can also be seen as a computing architecture. For many organizations today, instead of worrying about the details of their physical hardware setup, they can just use &ldquo;the cloud&rdquo; as their computing architecture, and discuss the advantages and disadvantages of that model just like any other system.</p><p>For me, I like to think of the cloud as just a point of view. From the consumer&rsquo;s perspective, any system that they don&rsquo;t have to manage themselves is the cloud. For a system administrator, it&rsquo;s not so easy. For example, for many of us, we can consider the K-State CS Linux servers as the cloud, as they are always available, online, and we don&rsquo;t have to manage them. For our system administrator, however, they are his or her systems to manage, and are definitely not the cloud. Similarly, for Amazon, AWS is just another service to manage. So, I think that the cloud, as a term, really just represents your point of view of the system in question and how closely you have to manage it.</p><p>What about you? If you have any thoughts or comments on how you&rsquo;d define the cloud, I encourage you to post them in the course discussion forums.</p><p>In the next videos, we&rsquo;ll dive into how to set up and configure your first cloud resources, using DigitalOcean as our Infrastructure as a Service provider.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=assignment>Assignment</h1><h3 id=lab-5---the-cloud>Lab 5 - The Cloud</h3><h4 id=instructions>Instructions</h4><p>Create <strong>two</strong> cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.</p><p>If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p><em>To be more blunt - this specification may be purposefully designed to be vague, and it is your responsibility to ask questions about any vagaries you find. Once you begin the grading process, you cannot go back and change things, so be sure that your machines meet the expected specification regardless of what is written here. &ndash;Russ</em></p></div></div><p>Also, to complete many of these items, you may need to refer to additional materials and references not included in this document. System administrators must learn how to make use of available resources, so this is a good first step toward that. Of course, there&rsquo;s always <a href=http://www.google.com rel=external target=_blank>Google</a>!</p><h4 id=time-expectation>Time Expectation</h4><p>This lab may take anywhere from <strong>1 - 6 hours</strong> to complete, depending on your previous experience working with these tools and the speed of the hardware you are using. Configuring cloud systems is very time-consuming the first time through the process, but it will be much more familiar by the end of this course.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p><em>This lab involves working with resources on the cloud, and will require you to sign up and pay for those services. In general, your total cost should be low, usually around $20 total. If you haven&rsquo;t already, you can sign up for the <a href=https://education.github.com/pack rel=external target=_blank>GitHub Student Developer Pack</a> to get discounts on most of these items.</em></p><p><em>You can get $200 credit at DigitalOcean using this link: <a href=https://try.digitalocean.com/freetrialoffer/ rel=external target=_blank>https://try.digitalocean.com/freetrialoffer/</a></em></p><p><em>You can register a .me domain name for free using Namecheap at this link: <a href=https://nc.me/ rel=external target=_blank>https://nc.me/</a></em></p><p><em>If you have any concerns about using these services, please contact me to make alternative arrangements! &ndash;Russ</em></p></div></div><hr><h3 id=task-0-create-2-droplets>Task 0: Create 2 Droplets</h3><p>Create <strong>TWO</strong> droplets on DigitalOcean. As you set up your droplets, use the following settings:</p><ul><li>Choose the Ubuntu 24.04 x64 distribution as the droplet image</li><li>Select the smallest droplet size ($4-6/mo - you may have to click around and click an arrow to see the smallest option)</li><li>Select any United States region - make sure both are in the same region!</li><li>Enable Virtual Private Cloud (VPC) Networking and Monitoring (this should be the default)</li><li>You may add any existing SSH keys you&rsquo;ve already configured with DigitalOcean during droplet creation</li><li>Droplet names:<ul><li><code>cis527&lt;your eID>-frontend</code></li><li><code>cis527&lt;your eID>-backend</code></li></ul></li></ul><p>The rest of this assignment will refer to those droplets as <strong>FRONTEND</strong> and <strong>BACKEND</strong>, respectively.</p><h4 id=resources>Resources</h4><ul><li><a href=https://www.digitalocean.com/docs/droplets/how-to/create/ rel=external target=_blank>How to Create a Droplet from the DigitalOcean Control Panel</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/docs/networking/vpc/ rel=external target=_blank>Virtual Private Cloud (VPC)</a> from DigitalOcean (replaced private networking)</li></ul><hr><h3 id=task-1-configure-droplets>Task 1: Configure Droplets</h3><p>Perform these configuration steps on both droplets, unless otherwise noted:</p><ol><li>Create a cis527 user with administrative (root or sudo) privileges<div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p><strong>DO NOT REUSE THE USUAL PASSWORD ON THIS ACCOUNT!</strong> Any system running in the cloud should have a very secure password on each account. Make sure it is a strong yet memorable password, as you&rsquo;ll need it to run any commands using <code>sudo</code>.</p></div></div></li><li>Install all system updates</li><li>Ensure the timezone is set to UTC</li><li>Enable the firewall. Configure the firewall on both systems to allow connections to the following:<ul><li>incoming port 22 (SSH)</li><li>incoming port 80 (HTTP)</li><li>incoming port 443 (HTTP via TLS)</li></ul></li></ol><h4 id=resources-1>Resources</h4><ul><li><a href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04 rel=external target=_blank>Initial Server Setup with Ubuntu 22.04</a> from DigitalOcean (works for 24.04)</li><li><a href=https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands rel=external target=_blank>UFW Essentials: Common Firewall Rules and Commands</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-set-up-time-synchronization-on-ubuntu-20-04 rel=external target=_blank>How To Set Up Time Synchronization on Ubuntu 20.04</a> from DigitalOcean (works on Ubuntu 22.04)</li></ul><hr><h3 id=task-2-ssh-configuration>Task 2: SSH Configuration</h3><p>Configure your SSH servers and SSH keys as described here:</p><ol><li>You can access the <strong>FRONTEND</strong> droplet using the virtual terminal in DigitalOcean. If you want to log in via SSH from your local computer (optional):<ol><li>On your own computer or a local VM, generate a set of SSH keys if you have not already.</li><li>Add the public key from your computer to the cis527 account on <strong>FRONTEND</strong>. This should allow you to log in with that key.</li></ol></li><li>Add the <a href=/cis527/files/id_rsa_grading.pub>grading SSH key</a> to the cis527 account on <strong>FRONTEND</strong>.</li><li>On the cis527 account on <strong>FRONTEND</strong>, generate a set of SSH keys with no passphrase.</li><li>Add the public key from the cis527 account on <strong>FRONTEND</strong> to the cis527 account on <strong>BACKEND</strong>. This should allow you to log in with that key</li><li>On the cis527 account on <strong>FRONTEND</strong>, create an SSH config file such that a user could simply type <code>ssh backend</code> to connect to the <strong>BACKEND</strong> droplet.<div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p>Make sure you use the private networking IP address for <strong>BACKEND</strong> in your config file. Otherwise, it will be blocked by the firewall.</p></div></div></li><li>Once all of the keys are in place, disable password authentication via SSH on both systems.</li></ol><p>After doing these steps, you be able to access the cis527 account on <strong>FRONTEND</strong> via SSH using your SSH key or the grading SSH key, and you should be able to access <strong>BACKEND</strong> using the SSH key present on the cis527 account on <strong>FRONTEND</strong>.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p><em>You may contact me once you have installed the grading SSH key to confirm that it works correctly. I&rsquo;d be happy to test it before grading. &ndash;Russ</em></p></div></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>If you are working on campus, you will not be able to use SSH to connect to your <strong>FRONTEND</strong> droplet since outgoing SSH is blocked by K-State. The ability to log in via SSH to <strong>FRONTEND</strong> using your key will not be graded, but we&rsquo;ll use the grading key for testing on our end.</p><p>Instead, you can use the Access tab in DigitalOcean to access a virtual console for your droplet. This allows you to connect via SSH through a web browser.</p><p>You should ensure that you can access the <strong>BACKEND</strong> server from <strong>FRONTEND</strong> using SSH with the correct SSH keys.</p></div></div><h4 id=resources-2>Resources</h4><ul><li><strong><a href=/cis527/x-extras/02-ssh/>Extras - SSH</a></strong></li><li><a href=https://www.hostinger.com/tutorials/ssh-tutorial-how-does-ssh-work rel=external target=_blank>How Does SSH Work</a> from Hostinger</li><li><a href=https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys rel=external target=_blank>SSH Essentials: Working with SSH Servers, Clients and Keys</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-22-04 rel=external target=_blank>How to Set Up SSH Keys on Ubuntu 22.04</a> from DigitalOcean</li><li><a href=https://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/ rel=external target=_blank>Simplify Your Life With an SSH Config File</a> from Nerderati</li></ul><hr><h3 id=task-3a-install-apache-on-backend>Task 3A: Install Apache on <strong>BACKEND</strong></h3><p>Install the Apache web server on <strong>BACKEND</strong>. By default, the webserver should serve files from the <code>/var/www/html</code> directory. Place a simple HTML file named <code>index.html</code> in that directory on <strong>BACKEND</strong>. You may use the contents below as an example. Please modify the file appropriately to make it clear which server it is placed on.</p><p>Do not configure virtual hosts at this time, as that will be covered in Task 5.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>CIS 527 Backend<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>This is my CIS 527 Backend Server!<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span></span></span></code></pre></div><p>To test your system, you should be able to enter the public IP address of your <strong>BACKEND</strong> droplet in a web browser and be presented with the appropriate file.</p><h4 id=resources-3>Resources</h4><ul><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-22-04 rel=external target=_blank>How To Install the Apache Web Server on Ubuntu 22.04</a> from DigitalOcean</li></ul><hr><h3 id=task-3b-install-docker-on-frontend>Task 3B: Install Docker on <strong>FRONTEND</strong></h3><p>Install the Docker client, Docker engine, and Docker compose on the droplet named <strong>FRONTEND</strong>. Make sure you test your setup using the <a href=https://hub.docker.com/_/hello-world rel=external target=_blank>Hello World</a> image to confirm it is working.</p><h4 id=resources-4>Resources</h4><ul><li><a href=https://docs.docker.com/engine/install/ubuntu/ rel=external target=_blank>Install Docker Engine on Ubuntu</a> from Docker</li><li><a href=https://docs.docker.com/compose/install/linux/ rel=external target=_blank>Install Docker Compose Plugin</a> from Docker</li></ul><hr><h3 id=task-4-domain-names--dns>Task 4: Domain Names & DNS</h3><p>Register and configure a domain name, and add your new droplets to that domain.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p><em>If you already have your own domain name, you are welcome to use it for this portion of the lab. It should not conflict with any existing configuration, as long as you are managing your own DNS records. If not, you may need to perform some additional configuration. If you don&rsquo;t have a domain name yet, this would be a great chance to get one registered. <a href=https://nc.me rel=external target=_blank>Namecheap</a> will allow you to register a <code>.me</code> domain for free for one year as a student. If you register a domain name, I highly recommend enrolling in WhoisGuard to protect your personal information. It should be enabled for you automatically through Namecheap. If you have any concerns about registering a domain name, or would like to explore options for completing this portion without registering or using a public domain name, please contact me. &ndash;Russ</em></p></div></div><p>Configure the DNS settings for your domain name as follows:</p><ol><li>If you are using a new domain, make sure it is configured to use your registrar&rsquo;s DNS servers. You may also configure it to use DigitalOcean&rsquo;s nameservers, and configure your DNS settings through DigitalOcean.</li><li>Add an A record for host <code>cis527alpha</code> that points to the public IP address of <strong>FRONTEND</strong>.</li><li>Add an A record for host <code>cis527bravo</code> that points to the public IP address of <strong>FRONTEND</strong>.</li><li>Add an A record for host <code>cis527charlie</code> that points to the public IP address of <strong>BACKEND</strong>.</li></ol><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>After updating your domain&rsquo;s DNS settings, you may have to wait up to 24 hours for the changes to propagate across the internet due to DNS caching. You may be able to speed this up by restarting your computer and network devices, or by using 3rd party DNS services such as OpenDNS or Google DNS instead of your ISP&rsquo;s DNS servers. However, in most cases it is better to just be patient and wait than to try and get around it. &ndash;Russ</em></p></div></div><p>To test your new DNS settings, you should be able to enter <code>http://cis527charlie.&lt;yourdomain>.&lt;tld></code> in a web browser to access your backend server running Apache. For example, if your domain name is <code>cis527.me</code>, you would visit <code>http://cis527charlie.cis527.me</code>. Since we haven&rsquo;t configured a server for frontend yet, we aren&rsquo;t able to test it at this time.</p><h4 id=resources-5>Resources</h4><ul><li><a href=https://docs.digitalocean.com/products/networking/dns/ rel=external target=_blank>DNS Overview</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-point-to-digitalocean-nameservers-from-common-domain-registrars#registrar-namecheap rel=external target=_blank>How to Point to DigitalOcean Nameservers from Common Domain Registrars</a> from DigitalOcean</li></ul><hr><h3 id=task-5a-configure-apache-virtual-hosts>Task 5A: Configure Apache Virtual Hosts</h3><p>Now that your domain name is working, configure an appropriate virtual host in Apache on <strong>BACKEND</strong>. In general, you can follow Step 5 of the guide linked below, but replace <code>example.com</code> with your server&rsquo;s full domain name, such as <code>cis527charlie.cis527.me</code> in the example from Task 4. You&rsquo;ll also need to copy the sample HTML file from Task 3 to the appropriate directory as configured in your virtual host. Make sure you disable the default site configuration when you enable the new site.</p><p>Finally, you can test your virtual host configuration using the same URL given in Task 4 above.</p><h4 id=resources-6>Resources</h4><ul><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-22-04 rel=external target=_blank>How To Install the Apache Web Server on Ubuntu 22.04</a> from DigitalOcean</li></ul><hr><h3 id=task-5b-configure-docker-reverse-proxy>Task 5B: Configure Docker Reverse Proxy</h3><p>On <strong>FRONTEND</strong>, create a <code>docker-compose.yml</code> file in the home directory of the <code>cis527</code> user that will create the following infrastructure in Docker:</p><ul><li>Set up two Docker containers running simple web servers.<ul><li>You may either use the <a href=https://hub.docker.com/r/jwilder/whoami rel=external target=_blank>whoami</a> image from the example, or set up two <a href=https://hub.docker.com/_/nginx rel=external target=_blank>Nginx</a> containers. If you use Nginx, you&rsquo;ll need to configure it to host different static content in each container (so it is easy to tell which one is which). See the documentation for how to set this up. Basically, there needs to be an obvious way to tell that you are reaching the correct container.</li><li>These containers should only be connected to an internal Docker network. They should <strong>NOT</strong> have direct access to the internet, nor should they have any mapped ports.</li></ul></li><li>Set up a reverse proxy in Docker to handle connections from the outside world (on port 80) to the appropriate containers.<ul><li>You may use either <a href=https://hub.docker.com/_/nginx rel=external target=_blank>Nginx</a>, <a href=https://hub.docker.com/r/nginxproxy/nginx-proxy rel=external target=_blank>Nginx-proxy</a>, or <a href=https://hub.docker.com/_/traefik rel=external target=_blank>Traefik Proxy</a> as shown in the lab module.</li><li>This container should be connected to both the default Docker network as well as the internal network that is connected to the other two containers.</li><li>You should configure one web server container to have hostname <code>cis527alpha.&lt;yourdomain>.&lt;tld></code> and the other should have <code>cis527bravo.&lt;yourdomain>.&lt;tld></code>.</li><li>Once configured, you should be able to visit those URLs in a browser and clearly see information coming from the correct Docker container.</li></ul></li></ul><h4 id=resources-7>Resources</h4><ul><li><a href=/cis527/5a-containers/08-reverse-proxy/>Reverse Proxy</a></li></ul><hr><h3 id=task-6-public-key-certificates>Task 6: Public Key Certificates</h3><p>Obtain and install a public key certificate for your Apache server on <strong>BACKEND</strong>. The simplest way to do so is to use Certbot from Let&rsquo;s Encrypt.</p><p>When you install the certificates, direct Certbot to redirect HTTP traffic to HTTPS for your server.</p><p>Once it is complete, you can test your certificates using the same URL given in Task 4 above. It should automatically redirect you from HTTP to HTTPS. You may have to clear the cache in your web browser if it does not work correctly. When you access the site, use your web browser to verify that the SSL certificate is present and valid.</p><p>You <strong>DO NOT</strong> have to configure public key certificates on <strong>FRONTEND</strong> using a reverse proxy. This can be done, but it is a bit more difficult than using Certbot since it requires manual steps or additional configuration. Feel free to attempt it on your own!</p><h4 id=resources-8>Resources</h4><ul><li><a href=https://certbot.eff.org/ rel=external target=_blank>Certbot</a> from the Electronic Frontier Foundation (EFF)</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-22-04 rel=external target=_blank>How To Secure Apache with Let&rsquo;s Encrypt on Ubuntu 22.04</a> from DigitalOcean</li></ul><hr><h3 id=task-7-schedule-a-grading-time>Task 7: Schedule A Grading Time</h3><p>Contact the instructor and schedule a time for interactive grading. You may continue with the next module once grading has been completed.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=cloud-resource-setup>Cloud Resource Setup</h1><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>TODO <em>This video was recorded for Ubuntu 18.04, but works for Ubuntu 22.04 as well. When creating a droplet, simply select the newest version of Ubuntu LTS. This video shows an older version of the DigitalOcean UI, but should be similar to what you see today. &ndash;Russ</em></p></div></div><a href="https://www.youtube.com/watch?v=UfqT889Vp2I">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/5-the-cloud/04-cloud-resource-setup-slides/>Slides</a></strong></li><li><strong><a href=https://education.github.com/pack rel=external target=_blank>Student Developer Pack</a> from GitHub Education</strong></li><li><strong><a href=https://www.digitalocean.com/referral-program/ rel=external target=_blank>Referral Program</a> from DigitalOcean</strong></li><li><strong><a href=/cis527/x-extras/02-ssh/>Extras - SSH</a></strong></li><li><strong><a href=/cis527/x-extras/06-windows-subsystem-for-linux/>Extras - Windows Subsystem for Linux</a></strong></li><li><a href=https://www.digitalocean.com/docs/droplets/how-to/create/ rel=external target=_blank>How to Create a Droplet from the DigitalOcean Control Panel</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/an-introduction-to-cloud-config-scripting rel=external target=_blank>An Introduction to Cloud-Config Scripting</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04 rel=external target=_blank>Initial Server Setup with Ubuntu 22.04</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/docs/networking/vpc/ rel=external target=_blank>Virtual Private Cloud (VPC)</a> from DigitalOcean (replaced private networking)</li><li><a href=https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands rel=external target=_blank>UFW Essentials: Common Firewall Rules and Commands</a> from DigitalOcean</li><li><a href=https://www.hostinger.com/tutorials/ssh-tutorial-how-does-ssh-work rel=external target=_blank>How Does SSH Work</a> from Hostinger</li><li><a href=https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys rel=external target=_blank>SSH Essentials: Working with SSH Servers, Clients and Keys</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-22-04 rel=external target=_blank>How to Set Up SSH Keys on Ubuntu 22.04</a> from DigitalOcean</li><li><a href=https://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/ rel=external target=_blank>Simplify Your Life With an SSH Config File</a> from Nerderati</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-22-04 rel=external target=_blank>How To Add Swap Space on Ubuntu 22.04</a> from DigitalOcean <em>(not recommended)</em></li></ul><h4 id=video-transcript>Video Transcript</h4><p>For the rest of this module, you&rsquo;ll be working with DigitalOcean to create and configure online cloud resources. I chose DigitalOcean primarily because of its ease of use compared to other providers such as AWS, as well as its continuing popularity and great user documentation.</p><p>DigitalOcean was first founded in 2011 by Ben and Moisey Uretsky. They felt that most hosting companies of the time were targeting large enterprises, leaving many smaller software developers and startups behind. DigitalOcean was one of the first hosting providers to offer virtual machines exclusively on solid state storage, giving them a performance edge over many of their peers, while often being cheaper overall. Currently, they are the 3rd largest hosting provider in the world, with 12 worldwide datacenters serving over 1 million customers.</p><p>In this video, we&rsquo;ll discuss the first steps for getting your first cloud server, referred to as a &ldquo;droplet&rdquo; on DigitalOcean, configured and secured. Let&rsquo;s get to it!</p><p>First, if you haven&rsquo;t signed up for the GitHub Education Student Developer Pack, I highly encourage you to do so. Among many other perks included in the pack is a $50 credit for new DigitalOcean users. So, if you haven&rsquo;t used DigitalOcean before, or would like to create a new account for this class, you should take advantage of that resource. In total, the entire class should use less than half of that credit as long as you don&rsquo;t get behind, so you&rsquo;ll have plenty left over for other projects. Finally, if you have a friend or colleague already using DigitalOcean, you can contact them for their referral URL before you sign up to do them a solid favor, netting you a $10 sign-up credit, and they&rsquo;ll get a $25 credit once you spend $25 at DigitalOcean. It&rsquo;s a win-win for everyone involved!</p><p>Once you are logged in, you&rsquo;ll be ready to create your first droplet. I&rsquo;m going to walk through the steps here and talk through some of the options, just so you know what is available here.</p><p>First, you&rsquo;ll be prompted to select an image. DigitalOcean offers many different types of images, including Linux distributions, containers, and one-click applications. The last two options are really handy if you need just a particular service or type of machine, but in our case, we&rsquo;ll select the Ubuntu distribution. Currently, DigitalOcean offers all LTS versions of Ubuntu that are still supported. We&rsquo;ll choose the &ldquo;Ubuntu 20.04 x64&rdquo; option.</p><p>Next, you&rsquo;ll need to select a droplet size. Droplets on DigitalOcean are sized by the amount of memory they offer, as well as the number of virtual CPUs available and the size of the storage disk. There are many different options to fit a variety of needs. For this class, we&rsquo;ll select the cheapest option, which has 1 GB of memory, 1 virtual CPU, and 25 GB of storage space. It is more than enough for our needs, and only costs $5/month.</p><p>DigitalOcean also provides the option to have automatically created backups of your droplets for just an additional fee. I won&rsquo;t enable that option, but you are welcome to do so if you&rsquo;d like to have that feature available.</p><p>Similarly, they also offer the ability to have your storage volumes separate from your droplets. This is handy if you&rsquo;ll be building or rebuilding your droplets and want to make sure the stored data is unaffected. We won&rsquo;t be using this option for this course.</p><p>Below that, you&rsquo;ll be able to choose your datacenter region. In general, it is best to select a region close to you and where you&rsquo;ll be accessing these droplets. So, I&rsquo;d recommend selecting one of the New York or San Francisco options. If you are creating multiple droplets, as you will for this class, make sure they are in the same datacenter region so they are able to communicate with one another internally.</p><p>There are a few other options you can enable. The first is private networking, which allows droplets in the same datacenter region to communicate on a private network that is internal to DigitalOcean&rsquo;s datacenter. This is great if you&rsquo;ll be storing data on one droplet and accessing it via another, as you use the private network to protect that connection from eavesdropping.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>Private networking has been replaced by Virtual Private Cloud (VPC) networking, but it works effectively the same.</p></div></div><p>Next, you can enable IPv6 access to the droplet. Depending on your network infrastructure, you may or may not find this useful. We won&rsquo;t be enabling it in this course.</p><p>The user data option allows you to provide some initial configuration information to your droplet using the <code>cloud-init</code> program. If you are creating many droplets from scratch that all need the same configuration, this can be a very powerful tool. However, for this course we&rsquo;ll be performing our configuration manually, so we won&rsquo;t be using this right now.</p><p>Finally, DigitalOcean offers advanced droplet monitoring at no extra charge. Let&rsquo;s enable that option here, and later we&rsquo;ll look at the information it collects for us.</p><p>You can also add SSH keys directly to your droplet. If you do so, the system will be configured to prevent SSH login via password, and you won&rsquo;t receive the root password via email from DigitalOcean. If you have already configured an SSH key with DigitalOcean, you can add it to your droplet here, but if not, I&rsquo;ll walk you through the steps to do that later in this video.</p><p>Lastly, you can create multiple droplets with the same settings. For the lab, you&rsquo;ll need to create two droplets, named <strong>FRONTEND</strong> and <strong>BACKEND</strong>. For this example, however, I&rsquo;m just going to create one, and name it <strong>EXAMPLE</strong>. As part of the lab, you&rsquo;ll have to extrapolate what I demonstrate here on a single droplet to your setup with multiple droplets.</p><p>Finally, I can click the &ldquo;Create&rdquo; button to create my droplet. After a few seconds, you should see the IP address of your droplet in your dashboard. Let&rsquo;s click on it to see additional information about the droplet.</p><p>At the top of the page, you&rsquo;ll see your droplet&rsquo;s public IP address, as well as the private IP address for the internal network. Notice that the private IP address begins with a 10, which is one of the reserved network segments we discussed in Module 3. On the left of the page, you&rsquo;ll see several options you can explore. For example, clicking the &ldquo;Access&rdquo; option will allow you to launch a virtual console to connect to your server. This is very handy if you accidentally lock yourself out of the droplet via SSH. Of course, you&rsquo;ll need to actually know a password for an account on the system to log in via the console. Thankfully, if you forget your root password, there is a button below to reset that password and have it emailed to you.</p><p>For this example, however, let&rsquo;s use SSH to connect to our droplet. I&rsquo;m going to use one of my Ubuntu VMs from the earlier labs for this process, but you are welcome to use tools from your own host machine instead of running it in a VM. Mac and Linux users have easy access to SSH via the terminal already. For Windows users, I recommend using the Windows Subsystem for Linux to get access to SSH through Ubuntu installed directly on Windows. See the video on WSL in the Extras Module for more information on installing and configuring that application.</p><p>To connect, you&rsquo;ll use a command similar to this one:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh root@&lt;ip_address&gt;</span></span></code></pre></div><p>where <code>&lt;ip_address></code> is the public IP address of your droplet. When prompted, use the password for the <code>root</code> account you should have received via email from DigitalOcean. If everything works correctly, you should now be logged in as the <code>root</code> user of your droplet.</p><p>Of course, if you&rsquo;ve been paying attention to this class, you should know that it is a very bad idea to use the <code>root</code> account directly on a system. That goes double for working in the cloud! So, the first thing we should do is create a new user named <code>cis527</code>. As you&rsquo;ll recall from Module 1, you can do so using the <code>adduser</code> command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>adduser cis527</span></span></code></pre></div><p>It will ask you a few simple questions about that user, and then create that user for you. You&rsquo;ll need to also give that user administrative privileges:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>usermod -a -G sudo cis527</span></span></code></pre></div><p>Once that is done, we should log out of the <code>root</code> account and log in as the new account. So, let&rsquo;s exit for now:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>exit</span></span></code></pre></div><p>Back on our local machine, we&rsquo;ll need to set up some SSH keys so that we can log in securely. If you&rsquo;d like to learn more about this process, please review the SSH video in the Extras Module.</p><p>First, if you haven&rsquo;t already, you&rsquo;ll need to create a set of SSH keys on this system:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-keygen -t rsa -b <span class=m>4096</span></span></span></code></pre></div><p>Then, once the key is created, you can copy it to your DigitalOcean droplet using a command similar to this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-copy-id cis527@&lt;ip_address&gt;</span></span></code></pre></div><p>where <code>&lt;ip_address></code> is the public IP address of your droplet. You&rsquo;ll be asked to provide the password for the <code>cis527</code> account you just created, and then it will install your SSH key for that user. Finally, you can log in to the system using SSH:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh cis527@&lt;ip_address&gt;</span></span></code></pre></div><p>If everything works correctly, you should not be asked for your password at all, unless you put a passphrase on your SSH key. Of course, at this point you could also create an SSH config file to make this process even easier - the SSH video in the Extras module has details for how to go about doing that.</p><p>Once you&rsquo;ve created your new user and switched to that account, there are a few important security steps you should take to make sure your droplet is properly secured. First, you should configure the firewall to only allow the ports you intend to use on this system. For example, you might allow port <code>80</code> for HTTP traffic, port <code>443</code> for HTTPS traffic, and port <code>22</code> for SSH traffic. In addition, you could restrict the IP addresses that are able to access certain ports. For this example droplet, I&rsquo;m going to enable those three ports:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow <span class=m>22</span>
</span></span><span class=line><span class=cl>sudo ufw allow <span class=m>80</span>
</span></span><span class=line><span class=cl>sudo ufw allow <span class=m>443</span></span></span></code></pre></div><p>Then, I can enable the firewall:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw enable</span></span></code></pre></div><p>and check the status using:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw status</span></span></code></pre></div><p>For the lab assignment, your firewall configuration will be a bit more complex, so make sure you read the assignment carefully before enabling the firewall. If you end up locking yourself out of the system, remember that you can use the console through the DigitalOcean website to get in and fix problems with your firewall configuration.</p><p>In addition, I recommend securing your SSH server by disabling password authentication and root login. You can do so by editing the SSH configuration file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /etc/ssh/sshd_config</span></span></code></pre></div><p>SSH servers on the internet receive sometimes hundreds or event thousands of login attempts per day from hackers trying to exploit systems with weak passwords. If your system doesn&rsquo;t even accept passwords, it is just one less way they can potentially get in.</p><p>Also, you can change the port that the SSH server is listening on. This is a little bit of &ldquo;security by obscurity,&rdquo; which isn&rsquo;t really security by itself, but it can definitely help cut down on those malicious login attempts. The lab assignment directs you to do just this. Of course, make sure you update your firewall configuration accordingly when you make this change. Once you&rsquo;ve made your changes, you can restart the SSH server:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart ssh</span></span></code></pre></div><p>Lastly, you may want to perform steps such as updating the timezone of your server and configuring the Network Time Protocol (NTP) client to make sure the system&rsquo;s time is synchronized properly.</p><p>One other step that you may come across in many guides is enabling swap. Swap in Linux allows you to effectively use more RAM than what is available on your system. This is especially handy if you are dealing with large datasets that won&rsquo;t fit in RAM. The desktop version of Ubuntu typically does this automatically, but many cloud providers such as DigitalOcean disable this feature. Since they are in the business of providing cloud resources, in general they will just want you to scale your resources accordingly to have enough RAM available instead of using swap. In addition, using swap on a solid-state drive can degrade performance and shorten the life of the drive. So, I don&rsquo;t recommend enabling swap on your DigitalOcean droplets at all, unless you find a particular use case that would make it worthwhile.</p><p>With that information, you should be ready to configure and secure your first cloud server. Next, we&rsquo;ll look at how to access a cloud resource using a domain name and configuring that resource accordingly.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=domains--virtual-hosts>Domains & Virtual Hosts</h1><a href="https://www.youtube.com/watch?v=mPlPMOpnvjE">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/5-the-cloud/05-domains-virtual-hosts-slides/>Slides</a></strong></li><li><strong><a href=/cis527/3-core-networking-services/11-dns/>Core Networking Services - DNS</a></strong></li><li><strong><a href=https://education.github.com/pack rel=external target=_blank>Student Developer Pack</a> from GitHub Education</strong></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-22-04 rel=external target=_blank>How To Install the Apache Web Server on Ubuntu 22.04</a> from DigitalOcean</li><li><a href=https://docs.digitalocean.com/products/networking/dns/ rel=external target=_blank>DNS Overview</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-point-to-digitalocean-nameservers-from-common-domain-registrars#registrar-namecheap rel=external target=_blank>How to Point to DigitalOcean Nameservers from Common Domain Registrars</a> from DigitalOcean</li></ul><h4 id=video-transcript>Video Transcript</h4><p>Now that you&rsquo;ve set up and configured your first cloud server, let&rsquo;s discuss how to make that resource easily accessible to you and your organization.</p><p>In Module 3, we discussed the Domain Name System, or DNS, as the &ldquo;phonebook of the internet.&rdquo; It contains a list of domain names and the associated IP addresses for each one. We already have the IP address of our cloud server, now we must add our own entry to the domain name space as well.</p><p>When you register for a domain, you&rsquo;ll typically be registering for a second-level domain name, which is one step below a top-level domain, or TLD, such as <code>.com</code>, <code>.org</code>, and <code>.net</code>, among others. In this example, <code>wikipedia</code> is the second-level domain name below the <code>.org</code> TLD.</p><p>To see it a bit more clearly, here is a diagram showing the breakdown of a common web Uniform Resource Locator, or URL. A URL is written with the top-level domain at the end, and then working backwards to forwards you can see the full hierarchy of the address in the domain name space. At the front is the protocol used to access that resource. In our case, we&rsquo;ll be registering a domain name, and then creating a few subdomains for our cloud resources.</p><p>For this lab assignment, you&rsquo;ll be asked to register a domain name. I&rsquo;ll be using Namecheap for my example website, since it is the domain registrar I&rsquo;ve been using for my personal sites for some time. There are many other registrars out there on the internet, and each one offers different services and prices. You are welcome to use any registrar you like for this lab. Once again, the GitHub Student Developer Pack is an excellent resource, and one of the discounts offered is a free <code>.me</code> domain through Namecheap for one year. Honestly, if you don&rsquo;t already have a personal domain name, now is a great time to register one!</p><p>When registering a domain name, the most important thing to think about, first of all, is the name itself. Most domain registrars offer a search feature to see which domains are available and what the price is. You&rsquo;ll also notice that the same domain name may be offered for wildly different prices under different TLDs. So, you&rsquo;ll have to consider your choice of name and TLD carefully.</p><p>In addition, you can register the same second-level domain name under a variety of top-level domains, though each one comes at an addition cost, both in terms of price and management. Many large enterprises choose to do this to prevent &ldquo;cybersquatting,&rdquo; where another user registers a similar domain name, hoping to profit on it in some way. For example, Google owns many different domain names related to <code>google.com</code>, including <code>gogle.com</code>, <code>goolge.com</code>, and <code>googlr.com</code> in order to make sure that users who type the domain name slightly incorrectly still reach the correct website.</p><p>Once you&rsquo;ve purchased your domain name, you&rsquo;ll have a choice of how the DNS configuration is hosted. For many users, they are only planning on using the domain name with a particular website hosting service, such as WordPress or GitHub Pages. In that case, you can set up your domain to point to your host&rsquo;s nameservers, and they&rsquo;ll manage everything for you.</p><p>However, you may want to use this domain name for a variety of uses. In that case, I highly recommend managing your DNS settings yourself. You can choose to use your registrar&rsquo;s built-in DNS hosting, which is what I&rsquo;ll do in this example. Many cloud providers, such as DigitalOcean, also offer a hosted DNS service that you can use for this feature. In general, I&rsquo;ve always kept my domain names and cloud hosting separate, just to add a bit more resiliency in case one provider or the other has a problem.</p><p>Finally, whenever you register a domain name, you are legally required to provide contact information, including your name, mailing address, and phone number, for the Whois service, a public service that provides information about all registered domains. In many cases, that would be your own personal information, which would be posted publicly along with the domain name by your registrar. For many individuals, that could create a major privacy and identity theft concern.</p><p>Thankfully, many domain registrars offer a privacy service that will replace your contact information with their own in the Whois database. In essence, they post their information publicly on your behalf, and then they will send any official communication to you directly. It helps prevent your personal information from being publicly available. In the case of Namecheap, their WhoisGuard service does just that, and as of this writing it is available free of charge for any users who register a domain name through their service. I highly recommend using one of these services to protect your private information when you register a domain name for your own personal use.</p><p>Let&rsquo;s take a look at how to register and configure a domain name. As I mentioned, I&rsquo;ll be using Namecheap for this example, but there are many other registrars out there that you can use. First, I&rsquo;ll use their domain name search tool to see if a particular domain name is available. Let&rsquo;s search for <code>cis527</code> and see what&rsquo;s out there.</p><p>As you can see, that domain name is available on a variety of TLDs, and at a variety of prices as well, ranging from less than $1 to more than $60 per year. The price can fluctuate wildly depending on the demand and popularity of a particular TLD. Once you choose your domain name and TLD, you can work through your registrar to register and pay for the domain. You&rsquo;ll also be asked to provide them with the appropriate information for the Whois service.</p><p>Once you&rsquo;ve registered your domain name, you can usually configure it through your registrar&rsquo;s website. Most importantly, you&rsquo;ll be able to define where the nameservers for your domain are located. As we discussed above, I recommend using your registrar&rsquo;s nameservers or the nameservers of your cloud provider so you can manage the DNS settings yourself. If you are using a particular website hosting service, they may have instructions for configuring this section to point to their nameservers.</p><p>Since I&rsquo;m using Namecheap&rsquo;s DNS service, I can view the DNS settings right here as well. Looking at these settings, you&rsquo;ll see that I have several A records already configured for this domain name. Each of these A records could point to a different cloud resource or server that I manage. However, you&rsquo;ll notice that they all point to the same IP address. So, what&rsquo;s going on here?</p><p>On my cloud server, I&rsquo;m using the Apache web server. You&rsquo;ll be using the same software on your own servers in the lab assignment. Thankfully, Apache, as well as most other web servers, has a unique feature that allows you to host multiple websites on the same IP address. This allows you make much more efficient use of your resources. Instead of having one droplet per website you manage, you can host many websites on the same droplet, and they can all share the same computing resource and bandwidth. If you are only hosting very small websites that don&rsquo;t get much traffic, this is a great option.</p><p>In Apache, you can do this by configuring &ldquo;virtual hosts&rdquo; on the server. A virtual host defines a domain name and matches it with a folder storing the website&rsquo;s files. When an incoming request comes to the server, it analyzes the domain name requested in the packet, and then finds the appropriate website to display. Because of this, it is very important to have your DNS settings set correctly for your domain. If you try to access this server by its IP address alone, you&rsquo;ll generally only be able to see one of the websites it has available.</p><p>To configure your system to use virtual hosts, there are a couple of steps. First, in your DNS configuration, you&rsquo;ll need to add new A records for each website you&rsquo;d like to host. For this example, I&rsquo;ll just use the names <code>foo</code> and <code>bar</code>. In each A record, I&rsquo;ll set the IP address to be the public address of my web server.</p><p>Once I save my changes, that record will be updated in my registrar&rsquo;s DNS servers. However, due to the large amount of caching and redundancy in the worldwide DNS network, it could take up to 24 hours for the changes to fully propagate. In general, you can avoid some of those issues by restarting your system to clear the DNS cache, using 3rd party DNS servers such as OpenDNS or Google DNS, and not querying this DNS entry right away so that the DNS servers don&rsquo;t cache an invalid entry. However, in many cases you&rsquo;ll simply have to wait until it starts working before you can continue, and there isn&rsquo;t a whole lot you can do to make it go faster.</p><p>Next, on my DigitalOcean droplet, I&rsquo;ll install Apache if I haven&rsquo;t already:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install apache2</span></span></code></pre></div><p>and then create a folder to store the first website:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mkdir -p /var/www/foo/html</span></span></code></pre></div><p>To make it really simple to see which website is which, I&rsquo;ll simply place a file that folder, giving the name of the site:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /var/www/foo/html/index.html</span></span></code></pre></div><p>Now, I&rsquo;ll need to configure a virtual host file for that website:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /etc/apache2/sites-available/foo.russfeld.me.conf</span></span></code></pre></div><p>The <code>/etc/apache2/sites-available/</code> directory stores all of the available site configuration files for Apache by convention. Of course, you&rsquo;ll need to update the filename to match your domain name. In that file, I&rsquo;ll place the following information, which I&rsquo;ve adapted from the DigitalOcean guide on installing Apache linked in the resources section below this video:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-apache data-lang=apache><span class=line><span class=cl><span class=nt>&lt;VirtualHost</span> <span class=s>foo.russfeld.me:80</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nb>ServerAdmin</span> admin@russfeld.me
</span></span><span class=line><span class=cl>    <span class=nb>ServerName</span> foo.russfeld.me
</span></span><span class=line><span class=cl>    <span class=nb>DocumentRoot</span> <span class=sx>/var/www/foo/html</span>
</span></span><span class=line><span class=cl>    <span class=nb>ErrorLog</span> ${APACHE_LOG_DIR}/error.log
</span></span><span class=line><span class=cl>    <span class=nb>CustomLog</span> ${APACHE_LOG_DIR}/access.log combined
</span></span><span class=line><span class=cl><span class=nt>&lt;/VirtualHost&gt;</span></span></span></code></pre></div><p>Then, I&rsquo;ll save and close the file. Finally, I&rsquo;ll need to deactivate the default website, and activate the new site:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo a2dissite 000-default
</span></span><span class=line><span class=cl>sudo a2ensite foo.russfeld.me</span></span></code></pre></div><p>Once I&rsquo;ve activated it, I can check for any configuration errors:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apache2ctl configtest</span></span></code></pre></div><p>If it passes, I can restart the Apache service to reload my changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart apache2</span></span></code></pre></div><p>I&rsquo;ll do these same steps for the other site, named <code>bar</code>, as well. The DigitalOcean guide for installing Apache includes much more in-depth information about this process, so I encourage you to read it carefully to learn even more about how to configure and work with Apache.</p><p>Once I&rsquo;ve done that, I can test my virtual host configuration and see if it works. To do this, I&rsquo;ll open a web browser and navigate to <code>http://foo.russfeld.me</code> and see if it takes me to the correct website. I can also try <code>http://bar.russfeld.me</code> to test the other website. As you can see, they both work correctly.</p><p>This is just a brief introduction to setting up your own domain name and configuring your cloud resources to use that domain. In the next few lab assignments, you&rsquo;ll be configuring several virtual hosts similar to these. If you run into issues getting it to work, I encourage you to post a question in the course discussion forums.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=certificates>Certificates</h1><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>TODO <em>The video below installs certbot from a PPA, but Ubuntu 22.04 includes certbot in the universe repositories. Refer to the instructions on the <a href=https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu rel=external target=_blank>DigitalOcean website</a> for updated instructions. &ndash;Russ</em></p></div></div><a href="https://www.youtube.com/watch?v=E0Fq6gqFPe8">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/5-the-cloud/06-certificates-slides/>Slides</a></strong></li><li><strong><a href=/cis527/3-core-networking-services/15-security/>Core Networking Services - Security</a></strong></li><li><a href=https://en.wikipedia.org/wiki/Public_key_certificate rel=external target=_blank>Public Key Certificate</a> from Wikipedia</li><li><a href=https://certbot.eff.org/ rel=external target=_blank>Certbot</a> from the Electronic Frontier Foundation (EFF)</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-22-04 rel=external target=_blank>How To Secure Apache with Let&rsquo;s Encrypt on Ubuntu 22.04</a> from DigitalOcean</li></ul><h4 id=video-transcript>Video Transcript</h4><p>So far, we&rsquo;ve created a cloud server, a domain name, and connected the two so our users can access our cloud resources. However, we haven&rsquo;t done anything to secure the connection between our users and our cloud system, which means that any information sent via HTTP to and from our server can be intercepted and read by a malicious third party. As you&rsquo;ll recall, in Module 3 we showed how simple it is to do just that using Wireshark.</p><p>To secure our connections, we want to use HTTPS, which is simply HTTP using TLS to create a secured and encrypted tunnel. We&rsquo;ve already discussed TLS a bit in Module 3, so feel free to refer to that video if you need a quick refresher of what TLS is and how it works.</p><p>As part of the TLS handshake, each system exchanges security information, such as a public key certificate, that is used to verify each other&rsquo;s identity and construct a shared encryption key for the connection. It is very simple to create one of those certificates on your system, and then instruct your web server to use that certificate to create a secure connection. Those certificates are sometimes referred to as &ldquo;SSL Certificates&rdquo; or &ldquo;TLS Certificates&rdquo; as well.</p><p>However, since you created that certificate yourself, it is known as a &ldquo;self-signed&rdquo; certificate, and really can&rsquo;t be used to confirm your identity directly. For example, you could easily create a certificate that says this system is the server for <code>amazon.com</code>, but that wouldn&rsquo;t be true. So, how can we use those certificates to confirm a system&rsquo;s identity?</p><p>The solution is to use a &ldquo;chain of trust&rdquo; to verify the certificate. Each web browser and operating system has a set of root certificates installed which belong to several trusted entities, called certificate authorities, or CAs, from across the world. They, in turn, can issue intermediate certificates to others acting on their behalf. To validate that intermediate certificate, the root CA signs it using their own certificate. This signature can easily be verified to make sure it is genuine. Then, the intermediate certificates can be used to sign certificates for a website or cloud resource.</p><p>When your web browser receives a certificate from a website, it can look at the signatures and verify the &ldquo;chain of trust&rdquo; that authenticates the certificate. In most web browsers, you can view this information by clicking on the lock icon next to the URL in the address bar. For example, the certificate for Wikipedia is currently signed by a certificate from &ldquo;GlobalSign Organization Validation CA,&rdquo; which in turn is signed by the &ldquo;GlobalSign Root CA&rdquo; certificate.</p><p>In essence, your web browser says &ldquo;Well, I trust GlobalSign Root CA&rsquo;s certificate, and they say they trust GlobalSign Organization Validation CA&rsquo;s certificate, and the Wikipedia certificate was signed by that certificate, so it must be correct.&rdquo;</p><p>So, as the administrator of resources in the cloud, it is in your best interest to not only use HTTPS to secure your web traffic, but you should also provide a valid certificate that has been signed by a trusted root CA. This helps ensure that your users can trust that the system they are connecting to is the correct one.</p><p>Unfortunately, obtaining certificates could be expensive in the past, depending on your needs. Many times you would need to obtain these certificates through your domain registrar, or directly from a variety of certificate authorities on the internet. While those are still options, and in many cases for a large enterprise they are the best options, there is a better way for us to secure our websites.</p><p>The Internet Security Research Group created Let&rsquo;s Encrypt, a free certificate authority that allows the owner of a domain name to request a security certificate free of charge. To make it even easier, the Electronic Frontier Foundation, or EFF, created Certbot, a free tool that helps you configure and secure your websites using Let&rsquo;s Encrypt. So, let&rsquo;s see how easy it is to do just that on our cloud server.</p><p>I&rsquo;m going to quickly walk through the DigitalOcean guide for using Let&rsquo;s Encrypt on Apache, which is linked below this video in the resources section. Feel free to refer to that guide for additional information and discussion about this process.</p><p>First, I&rsquo;ll need to install Certbot by adding the appropriate APT repository and installing the package:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo add-apt-repository ppa:certbot/certbot
</span></span><span class=line><span class=cl>sudo apt install python-certbot-apache</span></span></code></pre></div><p>Next, I&rsquo;ll need to make sure that the configuration file for my website is stored correctly and has the correct information. For example, if the website I would like to secure is <code>foo.russfeld.me</code>, my configuration file should be stored in <code>/etc/apache2/sites-available/foo.russfeld.me.conf</code>, and inside that file should be a line for <code>ServerName foo.russfeld.me</code>. Make sure that all three are correct before continuing.</p><p>In addition, you&rsquo;ll need to make sure your firewall is configured to allow HTTPS traffic on port 443 through the firewall.</p><p>Finally, you can use Certbot to request a certificate for your website. For my example site, the command would be this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo certbot --apache -d foo.russfeld.me</span></span></code></pre></div><p>If you&rsquo;d like to create a certificate for more than one website, you can include them with additional <code>-d</code> flags at the end of this command.</p><p>Certbot may ask you a few questions as it requests your security certificates, including your email address. At the end, it will ask you to choose if you&rsquo;d like to have your site automatically redirected to HTTPS. I always recommend enabling this option, so that anyone who visits your site will be automatically secured.</p><p>That&rsquo;s all there is to it! At this point, I recommend clearing the cache in your web browser to make sure it doesn&rsquo;t have any cached information from that website. Then, you can visit your website in your browser, and it should automatically redirect you to the HTTPS protocol. You can then examine the certificate to make sure it is valid.</p><p>There is really no excuse in this day and age for having a website without a valid, authenticated security certificate, since it is so simple and easy to do. As a system administrator, you should strive to make sure every system you manage is properly secured, and this is one important part of that process.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=scaling--high-availability>Scaling & High Availability</h1><a href="https://www.youtube.com/watch?v=bYYt0SxQ7MY">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/5-the-cloud/07-scaling-high-availability-slides/>Slides</a></strong></li><li><a href=https://www.digitalocean.com/docs/droplets/resources/metadata/ rel=external target=_blank>An Introduction to Droplet Metadata</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/docs/droplets/how-to/resize/ rel=external target=_blank>How to Resize Droplets</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-automate-the-scaling-of-your-web-application-on-digitalocean-1604 rel=external target=_blank>How to Automate the Scaling of Your Web Application on DigitalOcean Ubuntu 16.04 Droplets</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/docs/networking/load-balancers/ rel=external target=_blank>Load Balancers</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/what-is-high-availability rel=external target=_blank>What is High Availability?</a> from DigitalOcean</li><li><a href=https://aws.amazon.com/autoscaling/ rel=external target=_blank>AWS Auto Scaling</a> from Amazon Web Services</li><li>Netflix Case Study<ul><li><a href=http://highscalability.com/blog/2017/12/11/netflix-what-happens-when-you-press-play.html rel=external target=_blank>Netflix: What Happens When You Press Play?</a> from High Scalability Blog</li><li><a href=https://medium.com/netflix-techblog/scryer-netflixs-predictive-auto-scaling-engine-a3f8fc922270 rel=external target=_blank>Scryer: Netflix&rsquo;s Predictive Auto Scaling Engine</a> from Netflix Technology Blog</li><li><a href=https://media.netflix.com/en/company-blog/completing-the-netflix-cloud-migration rel=external target=_blank>Completing the Cloud Migration</a> from Netflix</li><li><a href=https://insights.sei.cmu.edu/devops/2015/04/devops-case-study-netflix-and-the-chaos-monkey.html rel=external target=_blank>DevOps Case Study: Netflix and the Chaos Monkey</a> from DevOps Blog at CMU Software Engineering Institute</li><li><a href=https://medium.com/netflix-techblog/chaos-engineering-upgraded-878d341f15fa rel=external target=_blank>Chaos Engineering Upgraded</a> from Netflix Technology Blog</li></ul></li></ul><h4 id=video-transcript>Video Transcript</h4><p>One of the major selling points of the cloud is its rapid elasticity, or the ability of your cloud resources to grow and shrink as needed to handle your workload. In this video, you&rsquo;ll learn a bit more about how to configure your cloud resources to be elastic, as well as some of the many design decisions and tradeoffs you&rsquo;ll face when building a cloud system.</p><p>First, let&rsquo;s talk a bit about scalability. If you have a cloud system, and find that it does not have enough resources to handle your workloads, there are generally two ways you can solve that problem. The first is to scale vertically, which involves adding more CPU and RAM resources to your cloud systems. Effectively, you are getting a bigger, more powerful computer to perform your work. The other option is to scale horizontally by configuring additional cloud systems to increase the number of resources you have available. In this instance, you are just adding more computers to your organization. In many cases, your decision of which way to grow may depend on the type of work you are performing as well as the performance limitations of the hardware. If you are dealing with a large number of website users, you may want to scale horizontally so you have more web servers available. If you are performing large calculations or working with big databases, it may be easier to scale vertically in order to keep everything together on the same system.</p><p>In the case of DigitalOcean, you can scale both horizontally and vertically with ease. To scale horizontally, you&rsquo;ll simply add more droplets to your cloud infrastructure. You may also need to add additional items such as a load balancer to route incoming traffic across multiple droplets. For vertical scaling, you can easily resize your droplets via the DigitalOcean control panel or their API. Unfortunately, to resize a droplet it will need to be rebooted, so you&rsquo;ll have to deal with a bit of downtime unless you have some existing infrastructure for high availability. We&rsquo;ll discuss that a bit later in this video.</p><p>Unfortunately, DigitalOcean does not support any automated scaling features at this time. However, they do offer a tutorial online for how to build your own scripts to monitor your droplet usages and provision additional droplets if you&rsquo;d like to scale horizontally. This diagram shows what such a setup might look like. It has a frontend resource with a load balancer as well as a script to manage scaling, and a number of backend web servers to handle the incoming requests. If you are interested in learning about scaling in DigitalOcean, I encourage you to check out the tutorial linked in the resources section below the video.</p><p>One major feature that sets Amazon Web Services apart from DigitalOcean is the ability to perform automatic scaling of AWS instances. Through their control panel, it is very simple to set up a scaling plan to optimize your use of AWS resources to match your particular needs in the cloud. Since AWS is primarily targeted at large enterprise customers, it has many of these features available to help them manage large workloads in the cloud. I&rsquo;ve also linked to information about Auto Scaling in AWS in the resources section below the video if you&rsquo;d like to learn more.</p><p>Finally, beyond scaling, you should also consider how to design your systems for high availability when dealing with the cloud. In many organizations, your overall goal is to make your cloud resources available all of the time, without any noticeable errors or downtime. To do that, however, requires quite a bit of planning and an advanced architecture to make it all work properly. Here is a simple example setup from DigitalOcean, showing how you can use six cloud resources to build a simple, highly available system.</p><p>First, there are two load balancers. One is acting as the primary, and is assigned to a floating IP address. The secondary load balancer has a connection to the primary, allowing it to monitor the health of the system. If the secondary load balancer detects an error with the primary, it will switch the floating IP to point to itself to handle incoming requests. This change can happen almost automatically, so the users will not experience much downtime at all. Behind the load balancer is two application servers. The load balancers can forward requests to either application server, but they will, of course, detect if one server is down and route all requests to the other server instead. Finally, each application server is attached to a backend database server, each of which are replicated from the other to maintain data consistency. With this setup, as long as both systems of the same type don&rsquo;t fail at the same time, the application should always be available to the users.</p><hr><p>In the updated assignment for Lab 5, you are asked to create a load balancer between your DigitalOcean droplets to split HTTP traffic between the frontend and backend droplets. Once that is properly set up and configured, you should be able to visit the IP address of the load balancer and see the homepage of one of the two droplets. Then, if you constantly refresh that page, it should swap between the two servers as shown here.</p><p>Unfortunately, due to the way we have configured other parts of this lab, it is prohibitively difficult to configure this load balancer to properly handle HTTPS traffic. This is mainly because we are using an external registrar for our domain name so that DigitalOcean cannot manage the domain, and the certificates we are getting from certbot are tied to the actual domain name and not a wildcard. In a production system, we would probably change one of these two things to allow us to send properly secured HTTPS traffic through the load balancer. But, for now, we won&rsquo;t worry about that.</p><hr><p>To put it all together, let&rsquo;s look at a quick case study for how to build an effective computing architecture in the cloud. Netflix is one of the pioneers in this area, and arguably has one of the most advanced and robust cloud infrastructures on the internet today.</p><p>As you know, Netflix has grown by leaps and bounds over the past decade. This graph shows their total monthly streaming video hours from 2008 through 2015. Since that time, it has continued to grow at an even faster rate. In fact, today Netflix is the platform of choice for viewing TV content among most Americans, beating out basic cable and broadcast TV. As Netflix moved into the streaming video arena, they suffered a few major setbacks and outages in their data centers in 2008, prompting them to move to the cloud. As of January 2016, their service is hosted entirely from the cloud, primarily through Amazon Web Services and their own content delivery network, named Netflix Open Connect.</p><p>Of course, moving to the cloud brings its own challenges. This graph shows the daily traffic for five days across Netflix&rsquo;s systems. As you can see, the traffic varies widely throughout the day, peaking and then quickly dropping. To handle this level of traffic, Netflix has a couple of options. They could, of course, scale their system to handle the highest peaks of traffic, and let it set idle during the dips. However, since the cloud should be very elastic, that is a very inefficient use of resources and could end up costing the company a fortune.</p><p>In addition, since the traffic peaks and dips so quickly, a reactive scaling approach may not work. According to their technology blog, it can take up to 45 minutes to provision a new cloud resource in their infrastructure, so by the time it is ready to go the traffic may have increased even more. In short, they&rsquo;d never be able to catch up.</p><p>So, Netflix developed Scryer, a predictive scaling tool for their cloud infrastructure. Scryer analyzes traffic patterns and builds a prediction of what the traffic will be in the future, allowing Netflix to proactively scale their resources up before the increase in traffic happens, allowing them to instantly be available when they are needed.</p><p>This graph shows the workload predicted by Scryer for a single day as well as the scaling plan that came from that prediction. Netflix has used this to not only improve their performance, but reduce the costs as well.</p><p>Of course, scaling is just one piece of the puzzle when it comes to handling large cloud workloads. Many large websites employ high levels of caching, as well as the use of a content distribution network, to lessen the load on their actual cloud infrastructures and reduce the need for scaling. In the case of a content distribution network, or CDN, those websites store their data closer to the users, sometimes directly in the datacenters of internet service providers across the globe. Netflix is no different, and in many cases Netflix has stored content representing 80% or more of its workload directly in the networks of local ISPs. So, while Netflix has all of the data stored on their cloud systems, those systems are usually more involved in sending data to the local content distribution centers than actual individual users.</p><p>Finally, Netflix was a pioneer in the area of chaos engineering, or building their systems to expect failure. As they moved into the cloud, they developed tools such as &ldquo;Chaos Monkey,&rdquo; &ldquo;Latency Monkey,&rdquo; and even &ldquo;Chaos Gorilla,&rdquo; all part of their &ldquo;Simian Army&rdquo; project, to wreak havoc on their systems. Each of those tools would randomly cause issues with their actual production cloud systems, including shutting down a node, introducing artificial latency, or, in the case of Chaos Gorilla, even cutting off an entire zone. By doing so, Netflix essentially forced itself to build systems that were highly tolerant of failures, to the point that consumers wouldn&rsquo;t even notice if an entire zone went offline.</p><p>In fact, these graphs show just such an event, as simulated by Chaos Gorilla. The top shows global traffic, while the bottom shows traffic during the same time period for both the eastern and western US zones. During the test, traffic to the western zone was blocked, resulting in a large amount of traffic being rerouted to the eastern zone. Looking at the graphs, you can clearly see the switchover in the smaller graphs below, but the global graph stayed steady, meaning that users worldwide wouldn&rsquo;t have even noticed a blip in service.</p><p>While this may be an extreme example of planning for failures, it goes to show the depth to which Netflix has designed their cloud infrastructure to be both highly scalable to handle fluctuating demand, and highly available to mitigate failures and outages. I&rsquo;ve included a whole section of related reading for this Netflix case study in the resources section below the video if you&rsquo;d like to know more about these topics.</p><p>So, as you move forward and continue designing systems for the cloud, here are a few design considerations I feel that you should think about. First, do you plan on scaling out, or scaling up? In addition, is it better to scale predictively, or reactively. Also, does your system need to be designed for high availability, or is it better to save money and simplify the design at the expense of having a bit of downtime once in a while? Finally, no matter what design you choose, you should always be planning for the inevitable failures and outages, and testing any failover procedures you have in case they do happen. Just like the fire drills you might remember from school, it&rsquo;s much better to practice for emergency situations that never happen than to have to deal with an emergency you haven&rsquo;t prepared for in the first place.</p><p>That&rsquo;s all for Module 5! In Module 6, you&rsquo;ll continue building both cloud systems as well as enterprise networks as we deal with application servers. In the meantime, you should have everything you need to complete Lab 5. As always, if you have any questions, feel free to post in the course discussion forums to get help. Good luck!</p><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis527/commit/84061ea45bef3eaeed1adfe99c235e8c52dcaff8>Aug 10, 2023</a></p></div></div><script src=/cis527/js/clipboard.min.js?1731425495 defer></script><script src=/cis527/js/perfect-scrollbar.min.js?1731425495 defer></script><script src=/cis527/js/theme.js?1731425495 defer></script></body></html>