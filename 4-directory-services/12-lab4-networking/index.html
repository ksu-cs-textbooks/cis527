<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="CIS 527 Textbook">
<meta name="author" content="Russell Feldhausen">

    <link rel="icon" href="https://ksu-cs-textbooks.github.io/cis527/images/favicon.png" type="image/png">

    <title>Lab 4 Networking Diagrams :: CIS 527 Textbook</title>

    
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/nucleus.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/fontawesome-all.min.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/hybrid.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/featherlight.min.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/perfect-scrollbar.min.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/auto-complete.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/atom-one-dark-reasonable.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/theme.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/tabs.css?1657900740" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/hugo-theme.css?1657900740" rel="stylesheet">
    
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/theme-purple.css?1657900740" rel="stylesheet">
    
    
    
    

    <script src="https://ksu-cs-textbooks.github.io/cis527/js/jquery-3.3.1.min.js?1657900740"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    

     
    
<script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  
    window.addEventListener('load', (event) => {
        document.querySelectorAll("mjx-container").forEach(function(x){
          x.parentElement.classList += 'has-jax'})
      });
  
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body class="" data-url="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/12-lab4-networking/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      

CIS 527 | CC 510<br>System Administration<br><br>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://ksu-cs-textbooks.github.io/cis527/js/lunr.min.js?1657900740"></script>
<script type="text/javascript" src="https://ksu-cs-textbooks.github.io/cis527/js/auto-complete.js?1657900740"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/ksu-cs-textbooks.github.io\/cis527\/";
    
</script>
<script type="text/javascript" src="https://ksu-cs-textbooks.github.io/cis527/js/search.js?1657900740"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='https://ksu-cs-textbooks.github.io/cis527/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/0-introduction/" title="Course Information" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/0-introduction/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>0. </b>Course Information
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/1-secure-workstations/" title="Secure Workstations" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/1-secure-workstations/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>1. </b>Secure Workstations
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/2-configuration-management/" title="Configuration Management" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/2-configuration-management/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>2. </b>Configuration Management
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/3-core-networking-services/" title="Core Networking Services" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/3-core-networking-services/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>3. </b>Core Networking Services
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/4-directory-services/" title="Directory Services" class="dd-item
        parent
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/">
        
        
          
          <i class="fas fa-angle-down fa-fw"></i>
          
        
          <b>4. </b>Directory Services
          

      </a>
    
      
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/01-introduction/" title="Introduction" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/01-introduction/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        1. Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/02-directory-services-overview/" title="Directory Services Overview" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/02-directory-services-overview/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        2. Directory Services Overview
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/03-assignment/" title="Assignment" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/03-assignment/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        3. Assignment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/04-windows-active-directory-installation/" title="Windows Active Directory Installation" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/04-windows-active-directory-installation/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        4. Windows Active Directory Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/05-windows-client-configuration/" title="Windows Client Configuration" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/05-windows-client-configuration/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        5. Windows Client Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/06-windows-group-policy/" title="Windows Group Policy" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/06-windows-group-policy/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        6. Windows Group Policy
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/07-ubuntu-ldap-installation/" title="Ubuntu LDAP Installation" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/07-ubuntu-ldap-installation/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        7. Ubuntu LDAP Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/08-ubuntu-client-configuration/" title="Ubuntu Client Configuration" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/08-ubuntu-client-configuration/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        8. Ubuntu Client Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/09-linux-client-on-windows-domain/" title="Linux Client on Windows Domain" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/09-linux-client-on-windows-domain/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        9. Linux Client on Windows Domain
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/10-windows-client-on-linux-domain/" title="Windows Client on Linux Domain" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/10-windows-client-on-linux-domain/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        10. Windows Client on Linux Domain
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/11-adds-netbios/" title="AD and NETBIOS Names" class="dd-item ">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/11-adds-netbios/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        11. AD and NETBIOS Names
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4-directory-services/12-lab4-networking/" title="Lab 4 Networking Diagrams" class="dd-item active">
        <a href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/12-lab4-networking/">
        <i class="fas fa-angle-down fa-fw" style="color: transparent;"></i>
        12. Lab 4 Networking Diagrams
        
        </a>
    </li>
     
  
 

            
          
            
            
          
            
            
          
            
            
          
        
        </ul>
      
    </li>
    
  
 

          
          




 
  
    
    <li data-nav-id="/5-the-cloud/" title="The Cloud" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>5. </b>The Cloud
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/5a-containers/" title="Containers" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/5a-containers/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>5.A </b>Containers
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/6-application-servers/" title="Application Servers" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/6-application-servers/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>6. </b>Application Servers
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/7-backups-monitoring-devops/" title="Backups, Monitoring &amp; DevOps" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/7-backups-monitoring-devops/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>7. </b>Backups, Monitoring &amp; DevOps
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/8-final-project/" title="Final Project" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/8-final-project/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>8. </b>Final Project
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/9-wrap-up/" title="Wrap Up" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/9-wrap-up/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>9. </b>Wrap Up
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/x-extras/" title="Extras" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/x-extras/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>X. </b>Extras
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/y-announcements/" title="Announcements" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/y-announcements/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>Y. </b>Announcements
          

      </a>
    
  
 

          
          




 
  
    
    <li data-nav-id="/z-instructor-resources/" title="Instructor Resources" class="dd-item
        
        
        
        ">
      <a href="https://ksu-cs-textbooks.github.io/cis527/z-instructor-resources/">
        
        
          
          <i class="fas fa-angle-right fa-fw"></i>
          
        
          <b>Z. </b>Instructor Resources
          

      </a>
    
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built using <a href="http://gohugo.io/">Hugo</a> and <a href="https://github.com/russfeld/ksucs-hugo-theme">ksucs-hugo-theme</a>.</p>

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; margin: .5rem auto" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</a>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                  <div id="top-github-link">
                    <a id="themelink" class="github-link" title='Toggle Light or Dark Mode' href="#">
                      <i class="fas fa-moon"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                    <a class="github-link" title='Teleprompter View' href="tele.html" target="blank">
                      <i class="fas fa-tv"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                    <a class="github-link" title='Embed this page' href="embed.html" target="blank">
                      <i class="fas fa-expand-arrows-alt"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                
                  
                  
                  
                    <a class="github-link" title='Edit this page' href="https://gitlab.cs.ksu.edu/cis-527/cis527online/-/tree/master/content4-directory-services/12-lab4-networking.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  
                
                  </div>
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='https://ksu-cs-textbooks.github.io/cis527/'>Homepage</a> > <a href='https://ksu-cs-textbooks.github.io/cis527/4-directory-services/'>Directory Services</a> > Lab 4 Networking Diagrams
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#after-lab-3">After Lab 3</a></li>
        <li><a href="#starting-lab-4-with-a-working-lab-3-solution">Starting Lab 4 with a Working Lab 3 Solution</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Lab 4 Networking Diagrams
            </h1>
          

        


<p>Here are some helpful networking diagrams to better explain the desired state before and after the end of Lab 4. In all of these diagrams, I am using a sample network with the IP address <code>192.168.40.0</code>. You will have to adapt the IPs to match your network configuration. In addition, each network address will need to be updated with your unique eID as directed in the lab assignment.</p>
<h3 id="after-lab-3">After Lab 3</h3>
<p><img src="../../images/net-afterlab3.png" alt="After Lab 3"></p>
<p>Once you&rsquo;ve completed all of Lab 3, your network diagram should resemble the one shown above. Recall that all systems are currently configured to get DHCP and DNS information from your Ubuntu VM labelled Server, so in general it must be running at all times for this network to function. In addition, the Ubuntu VM labelled Server does not use itself for DNS, but still uses the VMare built-in DNS server, though you may have configured an alternate entry so it can refer to itself for DNS as well. This is the most likely starting point for this lab if you completed Lab 3.</p>
<h3 id="starting-lab-4-with-a-working-lab-3-solution">Starting Lab 4 with a Working Lab 3 Solution</h3>
<p><img src="../../images/net-beforelab4working3.png" alt="Before Lab 4 with Working Lab 3"></p>
<p>This diagram shows what an ideal network setup would look like, provided you have a working Lab 3 solution. In Lab 4, most of the changes required to get from the final Lab 3 network to this configuration are spread across multiple tasks. However, here are the major highlights:</p>
<ol start="0">
<li><strong>VMware NAT Network</strong> - the built-in DHCP server should still be disabled as it was in Lab 3.</li>
<li><strong>Ubuntu Server VM</strong> - now uses itself as a primary DNS entry, with an alternate entry set to the VMware DNS server (Lab 4, Task 4). Must be able to resolve <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code></li>
<li><strong>Ubuntu Client VM</strong> - no changes, still gets both DNS and DHCP from the Ubuntu Server VM (Lab 4, Task 5). Must be able to resolve <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code></li>
<li><strong>Windows Server VM</strong> - new VM (Lab 4, Task 1). Should have a static IP address of <code>192.168.40.42</code> and a primary static DNS entry pointing to itself, with an alternate entry set to the Ubuntu Server VM or the VMware DNS server (Lab 4, Task 2). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Windows 10 VM</strong> - now has a static DNS entry to point to the Windows Server VM, with an alternate entry set to the Ubuntu Server VM or the VMware DNS server (Lab 4, Task 3). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Ubuntu Client VM - Windows Snapshot</strong> - when configuring the Ubuntu Client VM to connect to Windows Active Directory, it should have a static DNS entry pointing to the Windows Server VM, with an alternate entry set to the Ubuntu Server VM or the VMware DNS server (Lab 4, Task 6). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
</ol>
<p>This is the ideal setup for a this lab, but it depends on a fully working Lab 3 solution. In addition, you&rsquo;ll need to keep the Ubuntu Server VM running at all times, which may present a problem on systems that struggle to run multiple VMs concurrently. So, below I discuss two alternative options.</p>
<h4 id="lab-4-alternative-network-setup---option-1-static-dns-entries">Lab 4 Alternative Network Setup - Option 1 (Static DNS Entries)</h4>
<p><img src="../../images/net-beforelab4alt1.png" alt="Before Lab 4 Alternate 1"></p>
<p>In this diagram, we are bypassing the DHCP server configured in Lab 3, and reverting our network back to using the VMware DHCP server. In addition, we are avoiding using our own DNS server running on the Ubuntu Server VM unless absolutely necessary. So, the following changes are made to the network from Lab 3:</p>
<ol start="0">
<li><strong>VMware NAT Network</strong> - the built-in DHCP server must be re-enabled if it was disabled in Lab 3.</li>
<li><strong>Ubuntu Server VM</strong> - now uses itself as a primary DNS entry, with an alternate entry set to the VMware DNS server (Lab 4, Task 4). The DHCP server that was configured in Lab 3 is disabled using <code>sudo systemctl disable isc-dhcp-server</code>. Must still be able to resolve <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code></li>
<li><strong>Ubuntu Client VM</strong> - now gets a DHCP address from VMware. We must set a primary static DNS entry to point to the Ubuntu Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 5). Must be able to resolve <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code></li>
<li><strong>Windows Server VM</strong> - new VM (Lab 4, Task 1). Should have a static IP address of <code>192.168.40.42</code> and a primary static DNS entry pointing to itself, with an alternate entry set to the the VMware DNS server (Lab 4, Task 2). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Windows 10 VM</strong> - now has a static DNS entry to point to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 3). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Ubuntu Client VM - Windows Snapshot</strong> - when configuring the Ubuntu Client VM to connect to Windows Active Directory, it should have a static DNS entry pointing to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 6). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
</ol>
<p>In effect, each system that is getting automatic IP addresses is now using the VMware DHCP server. However, since that DHCP server does not give the correct DNS addresses, we must set static DNS entries on <strong>everything</strong>, with the Ubuntu Server VM and Ubuntu Client VM pointing to the DNS server running on the Ubuntu Server VM, and the Windows Server, Windows 10 Client, and the Ubuntu Client VM&rsquo;s Windows Snapshot pointing to the DNS server running on the Windows Server (after Active Directory is installed). In addition, each of those systems should have an alternate DNS entry that points to the VMware DNS server, allowing them to still access the internet properly.</p>
<p>However, if you are still having issues with your DNS entries or DNS servers not working correctly, fear not! There is one more alternative option available to you.</p>
<h4 id="lab-4-alternative-network-setup---option-2-hosts-file-entries">Lab 4 Alternative Network Setup - Option 2 (Hosts File Entries)</h4>
<p><img src="../../images/net-beforelab4alt2.png" alt="Before Lab 4 Alternate 2"></p>
<p>In this diagram, we are bypassing the DHCP server configured in Lab 3, and reverting our network back to using the VMware DHCP server. In addition, we are avoiding using our own DNS server running on the Ubuntu Server VM unless absolutely necessary. Finally, we are adding entries to the <code>hosts</code> file on each system to bypass DNS completely, ensuring that we can still complete this lab even if our DNS systems are not working at all. So, the following changes are made to the network from Lab 3:</p>
<ol start="0">
<li><strong>VMware NAT Network</strong> - the built-in DHCP server must be re-enabled if it was disabled in Lab 3.</li>
<li><strong>Ubuntu Server VM</strong> - now uses itself as a primary DNS entry, with an alternate entry set to the VMware DNS server (Lab 4, Task 4). The DHCP server that was configured in Lab 3 is disabled using <code>sudo systemctl disable isc-dhcp-server</code>. Must still be able to resolve <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code>. If it cannot, add an entry to the <code>/etc/hosts</code> file that links <code>192.168.40.41</code> to <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Ubuntu Client VM</strong> - now gets a DHCP address from VMware. We must set a primary static DNS entry to point to the Ubuntu Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 5). Must be able to resolve <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code>. If it cannot, add an entry to the <code>/etc/hosts</code> file that links <code>192.168.40.41</code> to <code>ldap.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Windows Server VM</strong> - new VM (Lab 4, Task 1). Should have a static IP address of <code>192.168.40.42</code> and a primary static DNS entry pointing to itself, with an alternate entry set to the the VMware DNS server (Lab 4, Task 2). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>. If it cannot, you are better off just rebuilding your AD server - this should always work on a working AD server!</li>
<li><strong>Windows 10 VM</strong> - now has a static DNS entry to point to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 3). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>. If it cannot, add an entry to the <code>C:\Windows\System32\drivers\etc\hosts</code> file that links <code>192.168.40.42</code> to <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
<li><strong>Ubuntu Client VM - Windows Snapshot</strong> - when configuring the Ubuntu Client VM to connect to Windows Active Directory, it should have a static DNS entry pointing to the Windows Server VM, with an alternate entry set to the VMware DNS server (Lab 4, Task 6). Once the Active Directory server is installed, it should be able to resolve <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>. If it cannot, add an entry to the <code>/etc/hosts</code> file that links <code>192.168.40.42</code> to <code>ad.cis527&lt;your eID&gt;.cs.ksu.edu</code>.</li>
</ol>
<p>In essence, we still configure each system with the correct static DNS entries. However, as a fallback in case those DNS entries are not working properly, we can use entries in the <code>hosts</code> file to bypass DNS completely and guarantee that we&rsquo;re always going to get to the correct system.</p>
<p>This is a very useful workaround, and while an <em>ideal</em> network in the real world shouldn&rsquo;t require it, many times system administrators include entries in the <code>hosts</code> file to ensure that systems can still be used in the event of DNS failure. Otherwise, an innocuous DNS failure could prevent users from even logging on to the system, either via LDAP or Active Directory.</p>
<p>As shown in the diagram above, the only DNS entry that <strong>must</strong> work is the Windows Server VM must be able to use itself for DNS. If that does not work, then most likely your Active Directory configuration failed and you will need to try again. Windows Active Directory relies heavily on DNS to function properly. I&rsquo;ve not ever had this happen in my experience, so I highly doubt this failure case will be common.</p>
<p>You can find more information about how to edit your hosts file at <a href="https://www.ionos.com/digitalguide/server/configuration/hosts-file/" target="_blank">this resource</a>.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://ksu-cs-textbooks.github.io/cis527/4-directory-services/11-adds-netbios/" title="AD and NETBIOS Names"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/" title="The Cloud" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/clipboard.min.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/perfect-scrollbar.min.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/perfect-scrollbar.jquery.min.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/jquery.sticky.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/featherlight.min.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/highlight.pack.js?1657900740"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/modernizr.custom-3.6.0.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/learn.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/hugo-learn.js?1657900740"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/themer.js?1657900740"></script>

    
        
            <script src="https://ksu-cs-textbooks.github.io/cis527/mermaid/mermaid.js?1657900740"></script>
        
        <script>
            var mer_theme = localStorage.getItem('theme');
            if(mer_theme !== 'dark'){
                mer_theme = 'neutral'
            }
            mermaid.initialize({ 
                startOnLoad: true,
                'securityLevel': 'loose', 
                'theme': mer_theme });
        </script>
    

    

    
    

    
<script 
src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/quizdown.js">
</script>
<script 
src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/extensions/quizdownKatex.js">
</script>
<script 
src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/extensions/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
  </body>
</html>

