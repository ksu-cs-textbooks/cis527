<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Lab 7 - Backups, Monitoring & DevOps Instructions Create two cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Assignment :: CIS 527 Textbook"><meta name=twitter:description content="Lab 7 - Backups, Monitoring & DevOps Instructions Create two cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/7-backups-monitoring-devops/04-assignment/"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="Assignment :: CIS 527 Textbook"><meta property="og:description" content="Lab 7 - Backups, Monitoring & DevOps Instructions Create two cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Backups, Monitoring & DevOps"><meta property="article:modified_time" content="2024-11-15T12:40:47-06:00"><meta itemprop=name content="Assignment :: CIS 527 Textbook"><meta itemprop=description content="Lab 7 - Backups, Monitoring & DevOps Instructions Create two cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.
If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill."><meta itemprop=dateModified content="2024-11-15T12:40:47-06:00"><meta itemprop=wordCount content="1877"><title>Assignment :: CIS 527 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis527/7-backups-monitoring-devops/04-assignment/ rel=canonical type=text/html title="Assignment :: CIS 527 Textbook"><link href=/cis527/7-backups-monitoring-devops/04-assignment/index.xml rel=alternate type=application/rss+xml title="Assignment :: CIS 527 Textbook"><link href=/cis527/7-backups-monitoring-devops/04-assignment/tele.html rel=alternate type=text/html title="Assignment :: CIS 527 Textbook"><link href=/cis527/7-backups-monitoring-devops/04-assignment/embed.html rel=alternate type=text/html title="Assignment :: CIS 527 Textbook"><link href=/cis527/css/fontawesome-all.min.css?1731696098 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fontawesome-all.min.css?1731696098 rel=stylesheet></noscript><link href=/cis527/css/nucleus.css?1731696098 rel=stylesheet><link href=/cis527/css/auto-complete.css?1731696098 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/auto-complete.css?1731696098 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar.min.css?1731696098 rel=stylesheet><link href=/cis527/css/fonts.css?1731696098 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fonts.css?1731696098 rel=stylesheet></noscript><link href=/cis527/css/theme.css?1731696098 rel=stylesheet><link href=/cis527/css/theme-auto.css?1731696098 rel=stylesheet id=R-variant-style><link href=/cis527/css/chroma-auto.css?1731696098 rel=stylesheet id=R-variant-chroma-style><link href=/cis527/css/variant.css?1731696098 rel=stylesheet><link href=/cis527/css/print.css?1731696098 rel=stylesheet media=print><link href=/cis527/css/format-print.css?1731696098 rel=stylesheet><script src=/cis527/js/variant.js?1731696098></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.index_js_url="/cis527/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis527/css/custom.css?1731696098 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis527/7-backups-monitoring-devops/04-assignment/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis527/7-backups-monitoring-devops/><span itemprop=name>Backups, Monitoring & DevOps</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Assignment</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis527/7-backups-monitoring-devops/03-itil/ title="ITIL (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis527/7-backups-monitoring-devops/05-monitoring/ title="Monitoring (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=assignment>Assignment</h1><h3 id=lab-7---backups-monitoring--devops>Lab 7 - Backups, Monitoring & DevOps</h3><h4 id=instructions>Instructions</h4><p>Create <strong>two</strong> cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.</p><p>If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p><em>To be more blunt - this specification may be purposefully designed to be vague, and it is your responsibility to ask questions about any vagaries you find. Once you begin the grading process, you cannot go back and change things, so be sure that your machines meet the expected specification regardless of what is written here. &ndash;Russ</em></p></div></div><p>Also, to complete many of these items, you may need to refer to additional materials and references not included in this document. System administrators must learn how to make use of available resources, so this is a good first step toward that. Of course, there&rsquo;s always <a href=http://www.google.com rel=external target=_blank>Google</a>!</p><h4 id=time-expectation>Time Expectation</h4><p>This lab may take anywhere from <strong>1 - 6 hours</strong> to complete, depending on your previous experience working with these tools and the speed of the hardware you are using. Working with each of these items can be very time-consuming the first time through the process, but it will be much more familiar by the end of this course.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p><em>This lab involves working with resources on the cloud, and will require you to sign up and pay for those services. In general, your total cost should be low, usually around $20 total. If you haven&rsquo;t already, you can sign up for the <a href=https://education.github.com/pack rel=external target=_blank>GitHub Student Developer Pack</a> to get discounts on most of these items. If you have any concerns about using these services, please contact me to make alternative arrangements! &ndash;Russ</em></p></div></div><hr><h3 id=task-0-droplets--virtual-machines>Task 0: Droplets & Virtual Machines</h3><p>For this lab, you will continue to use the two DigitalOcean droplets from Labs 5 and 6, labelled <strong>FRONTEND</strong> and <strong>BACKEND</strong>, respectively. This assignment assumes you have completed all steps in the previous labs successfully; if not, you should consult with the instructor to resolve any existing issues before continuing.</p><hr><h3 id=task-1-backup-ubuntu-web-application>Task 1: Backup Ubuntu Web Application</h3><p>For this task, you will perform the steps to create a backup of the web application installed on your Ubuntu droplet in Lab 6. To complete this item, prepare an archive file (<code>.zip</code>, <code>.tar</code>, <code>.tgz</code> or equivalent) containing the following items:</p><ol><li>Website data and configuration files for the web application. This should NOT include the entire application, just the relevant configuration and data files that were modified after installation. For Docker installations, any information required to recreate the Docker environment, such as a Docker Compose file, should also be included.</li><li>Relevant Apache or Nginx configuration files (virtual hosts, reverse proxy, etc.)</li><li>A complete MySQL server dump of the appropriate MySQL database. It should contain enough information to recreate the database schema and all data.</li><li>Clear, concise instructions in a README file for restoring this backup on a new environment. Assume the systems in that new environment are configured as directed in Lab 5. These instructions would be used by yourself or a system administrator of similar skill and experience to restore this application - that is, you don&rsquo;t have to pedantically spell out how to perform every step, but you should provide enough information to easily reinstall the application and restore the backup with a minimum of effort and research.</li></ol><h4 id=resources>Resources</h4><ul><li><a href=https://www.howtogeek.com/248780/how-to-compress-and-extract-files-using-the-tar-command-on-linux/ rel=external target=_blank>How to Compress and Extract Files using the tar Command on Linux</a> from How-To Geek</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-import-and-export-databases-and-reset-a-root-password-in-mysql rel=external target=_blank>How to Import and Export Databases and Reset a Root Password in MySQL</a> from DigitalOcean</li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-backup-mysql-databases-on-an-ubuntu-vps rel=external target=_blank>How To Backup MySQL Databases on an Ubuntu VPS</a> from DigitalOcean (steps should still be valid for 24.04)</li></ul><hr><h3 id=task-2-ubuntu-monitoring>Task 2: Ubuntu Monitoring</h3><p>For this task, you will set up Checkmk to monitor your servers.</p><ol><li>Configure the Ubuntu droplet named <strong>FRONTEND</strong> as the primary host for Checkmk.</li><li>Then, add the <strong>FRONTEND</strong> and <strong>BACKEND</strong> droplets as two monitored hosts</li><li>Send the URL of the Checkmk dashboard and the password in your grading packet. Make sure that both <strong>FRONTEND</strong> and <strong>BACKEND</strong> are appearing in the data.</li></ol><p>Of course, you may need to modify your firewall configuration to allow incoming connections for this to work! <strong>If your firewall is disabled and/or not configured, there will be a deduction of up to 10% of the total points on this lab</strong></p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>As always, you may have to deal with Apache virtual hosts and firewalls for this setup. In addition, you may want to add a new A record to your domain name for this site, and request an SSL certificate via CertBot. &ndash;Russ</em></p></div></div><h4 id=resources-1>Resources</h4><ul><li><a href=https://www.digitalocean.com/community/tutorials/how-to-monitor-server-health-with-checkmk-on-ubuntu-20-04 rel=external target=_blank>How to Monitor Server Health with Checkmk on Ubuntu 20.04</a> (should work for 24.04 as well - make sure you install the correct version)</li></ul><hr><h3 id=task-3-devops>Task 3: DevOps</h3><p>Setup an automatically deployed Git repository on your Ubuntu droplet. For this task, perform the following.</p><h4 id=option-1---cs-gitlab>Option 1 - CS GitLab</h4><ol><li>Create a GitLab repository on the <a href=https://gitlab.cs.ksu.edu/ rel=external target=_blank>K-State CS GitLab</a> instance. That repository must be public and clonable via HTTPS without any authenication. Unfortunately K-State blocks cloning repositories via SSH.</li><li>Clone that repository on your own system, and verify that you can make changes, commit them, and push them back to the server.</li><li>Clone that repository into a web directory on your Ubuntu droplet named <strong>BACKEND</strong>. You can use the default directory first created in Lab 5 (it should be <code>cis527charlie</code> in your DNS).</li><li>Create a Bash script that will simply use the <code>git pull</code> command to get the latest content from the Git repository in the current directory.</li><li>Install and configure <a href=https://github.com/adnanh/webhook rel=external target=_blank>webhook</a> on your Ubuntu droplet named <strong>BACKEND</strong>. It should listen for all incoming webhooks from GitLab that match a secret key you choose. When a hook is received, it should run the Bash script created earlier.</li><li>Configure a webhook in your GitLab repository for all Push events using that same secret key and the URL of webhook on your server. You may need to make sure your domain name has an A record for the default hostname <code>@</code> pointing to your <strong>BACKEND</strong> server.</li><li>To test this setup, you should be able to push a change to the GitLab repository, and see that change reflected on the website automatically.</li><li>For offline grading, add the instructor (@russfeld) to the repository as maintainers, and submit the repository and URL where the files can be found in your grading packet. Provided the webhook works correctly, they should be able to see a pushed change to the repository update the website.</li></ol><p>Of course, you may need to modify your firewall configuration to allow incoming connections for Webhook! <strong>If your firewall is disabled and/or not configured, there will be a deduction of up to 10% of the total points on this lab</strong></p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>In the video I use SSH to connect to GitLab, but that is no longer allowed through K-State&rsquo;s firewall. You&rsquo;ll need to create a public repository and clone it using HTTPS without authentication for this to work. Alternatively, you can use Option 2 below to configure this through GitHub instead.&ndash;Russ</em></p></div></div><h4 id=option-2---github>Option 2 - GitHub</h4><ol><li>Create a GitHub repository on the <a href=https://github.com/ rel=external target=_blank>GitHub</a> instance. That repository may be public or private. If private, the repository should be set up to be cloned via SSH.</li><li>Clone that repository on your own system, and verify that you can make changes, commit them, and push them back to the server.</li><li>Clone that repository into a web directory on your Ubuntu droplet named <strong>BACKEND</strong>. You can use the default directory first created in Lab 5 (it should be <code>cis527charlie</code> in your DNS).</li><li>Create a Bash script that will simply use the <code>git pull</code> command to get the latest content from the Git repository in the current directory.</li><li>Install and configure <a href=https://github.com/adnanh/webhook rel=external target=_blank>webhook</a> on your Ubuntu droplet named <strong>BACKEND</strong>. It should listen for all incoming webhooks from GitHub that match a secret key you choose. When a hook is received, it should run the Bash script created earlier.</li><li>Configure a webhook in your GitHub repository for all Push events using that same secret key and the URL of webhook on your server. You may need to make sure your domain name has an A record for the default hostname <code>@</code> pointing to your <strong>BACKEND</strong> server.</li><li>Alternatively, you may configure a GitHub Action to send the webhook. I recommend using <a href=https://github.com/marketplace/actions/workflow-webhook-action rel=external target=_blank>Workflow Webhook Action</a> or <a href=https://github.com/fjogeleit/http-request-action rel=external target=_blank>HTTP Request Action</a>.</li><li>To test this setup, you should be able to push a change to the GitHub repository, and see that change reflected on the website automatically.</li><li>For offline grading, add the instructor (@russfeld) to the repository as maintainers, and submit the repository and URL where the files can be found in your grading packet. Provided the webhook works correctly, they should be able to see a pushed change to the repository update the website.</li></ol><p>Of course, you may need to modify your firewall configuration to allow incoming connections for Webhook! <strong>If your firewall is disabled and/or not configured, there will be a deduction of up to 10% of the total points on this lab</strong></p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p><em>Since the Webhook process runs as the <code>root</code> user on <strong>BACKEND</strong>, you&rsquo;ll need to make sure a set of SSH keys exist in the <code>root</code> user&rsquo;s home folder <code>/root/.ssh/</code> and add the public key from that directory to your <a href=https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account rel=external target=_blank>GitHub account</a>. You should then use the root account (use <code>sudo su -</code> to log in as root) to run <code>git pull</code> from the appropriate directory on <strong>BACKEND</strong> at least once so you can accept the SSH fingerprint for the GitHub server. This helps ensure that <code>root</code> can properly run the script. &ndash;Russ</em></p></div></div><h4 id=resources-2>Resources</h4><ul><li><strong><a href=/cis527/x-extras/07-git/>Extras - Git</a></strong></li><li><a href=https://github.com/adnanh/webhook rel=external target=_blank>webhook</a> on GitHub</li><li><a href=https://github.com/adnanh/webhook/blob/master/docs/Hook-Examples.md rel=external target=_blank>webhook Hook Examples</a> on GitHub</li><li><a href=https://docs.gitlab.com/ee/user/project/integrations/webhooks.html rel=external target=_blank>GitLab Webhooks</a> on GitLab Documentation</li><li><a href=https://docs.github.com/en/webhooks/using-webhooks/creating-webhooks rel=external target=_blank>GitHub Webbooks</a> on GitHub Documentation.</li></ul><hr><h3 id=task-4-submit-files>Task 4: Submit Files</h3><p>This lab may be graded completely offline. To do this, submit the following items via Canvas:</p><ol start=2><li><strong>Task 1</strong>: An archive file containing a README document as well as any files or information needed as part of the backup of the Ubuntu web application installed in Lab 6.</li><li><strong>Task 2</strong>: The URL and password of your Checkmk instance, clearly showing data from both <strong>FRONTEND</strong> and <strong>BACKEND</strong>.</li><li><strong>Task 3</strong>: A GitLab/GitHub repository URL and a URL of the website containing those files. Make sure the instructor is added to the repository as maintainers. They should be able to push to the repository and automatically see the website get updated.</li></ol><p>If you are able to submit all 4 of the items above, you do not need to schedule a grading time. The instructor or TA will contact you for clarification if there are any questions on your submission.</p><p>For Tasks 2 - 3, you may also choose to do interactive grading, especially if you were unable to complete it and would like to receive partial credit.</p><h3 id=task-5-schedule-a-grading-time>Task 5: Schedule A Grading Time</h3><p>If you are not able to submit information for all 3 tasks for offline grading, you may contact the instructor and schedule a time for interactive grading. You may continue with the next module once grading has been completed.</p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis527/commit/0b7d66654d0e33fe087b8d3d327e408896e2092a>Nov 15, 2024</a></p></div></div><script src=/cis527/js/clipboard.min.js?1731696098 defer></script><script src=/cis527/js/perfect-scrollbar.min.js?1731696098 defer></script><script src=/cis527/js/theme.js?1731696098 defer></script></body></html>