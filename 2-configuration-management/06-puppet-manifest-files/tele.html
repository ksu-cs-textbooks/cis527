<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ
YouTube Video Resources Slides Configuration Management 101: Writing Puppet Manifests from DigitalOcean Language: Visual Index from Puppet Language: Basics from Puppet Video Script Now, let’s take a look at how we can use Puppet to create defined configurations to be applied to our systems."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Puppet Manifest Files :: CIS 527 Textbook"><meta name=twitter:description content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ
YouTube Video Resources Slides Configuration Management 101: Writing Puppet Manifests from DigitalOcean Language: Visual Index from Puppet Language: Basics from Puppet Video Script Now, let’s take a look at how we can use Puppet to create defined configurations to be applied to our systems."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/2-configuration-management/06-puppet-manifest-files/"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="Puppet Manifest Files :: CIS 527 Textbook"><meta property="og:description" content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ
YouTube Video Resources Slides Configuration Management 101: Writing Puppet Manifests from DigitalOcean Language: Visual Index from Puppet Language: Basics from Puppet Video Script Now, let’s take a look at how we can use Puppet to create defined configurations to be applied to our systems."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Configuration Management"><meta property="article:modified_time" content="2024-06-27T15:05:08-05:00"><meta itemprop=name content="Puppet Manifest Files :: CIS 527 Textbook"><meta itemprop=description content="Puppet Learning VM Deprecated As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I’ll keep these videos up for demonstration purposes. –Russ
YouTube Video Resources Slides Configuration Management 101: Writing Puppet Manifests from DigitalOcean Language: Visual Index from Puppet Language: Basics from Puppet Video Script Now, let’s take a look at how we can use Puppet to create defined configurations to be applied to our systems."><meta itemprop=dateModified content="2024-06-27T15:05:08-05:00"><meta itemprop=wordCount content="853"><title>Puppet Manifest Files :: CIS 527 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis527/2-configuration-management/06-puppet-manifest-files/ rel=canonical type=text/html title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/2-configuration-management/06-puppet-manifest-files/index.xml rel=alternate type=application/rss+xml title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/2-configuration-management/06-puppet-manifest-files/index.print.html rel=alternate type=text/html title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/2-configuration-management/06-puppet-manifest-files/embed.html rel=alternate type=text/html title="Puppet Manifest Files :: CIS 527 Textbook"><link href=/cis527/css/fontawesome-all.min.css?1722976079 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fontawesome-all.min.css?1722976079 rel=stylesheet></noscript><link href=/cis527/css/nucleus.css?1722976079 rel=stylesheet><link href=/cis527/css/auto-complete.css?1722976079 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/auto-complete.css?1722976079 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar.min.css?1722976079 rel=stylesheet><link href=/cis527/css/fonts.css?1722976079 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/css/fonts.css?1722976079 rel=stylesheet></noscript><link href=/cis527/css/theme.css?1722976079 rel=stylesheet><link href=/cis527/css/theme-auto.css?1722976079 rel=stylesheet id=R-variant-style><link href=/cis527/css/chroma-auto.css?1722976079 rel=stylesheet id=R-variant-chroma-style><link href=/cis527/css/variant.css?1722976079 rel=stylesheet><link href=/cis527/css/print.css?1722976079 rel=stylesheet media=print><script src=/cis527/js/variant.js?1722976079></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.index_js_url="/cis527/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis527/css/custom.css?1722976079 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis527/2-configuration-management/06-puppet-manifest-files/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=puppet-manifest-files>Puppet Manifest Files</h1><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Puppet Learning VM Deprecated</div><div class=box-content><p><em>As of 2023, the Puppet Learning VM is no longer being maintained. The videos below demonstrate some of the features of Puppet, which can also be done on your Ubuntu VM after installing Puppet Agent. Unfortunately, it is not easily possible to simulate an enterprise Puppet setup without this VM, so I&rsquo;ll keep these videos up for demonstration purposes.</em> &ndash;Russ</p></div></div><a href="https://www.youtube.com/watch?v=3QFCLHACFIM">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/2-configuration-management/06-puppet-manifest-files-slides/>Slides</a></strong></li><li><a href=https://www.digitalocean.com/community/tutorials/configuration-management-101-writing-puppet-manifests rel=external target=_blank>Configuration Management 101: Writing Puppet Manifests</a> from DigitalOcean</li><li><a href=https://puppet.com/docs/puppet/latest/lang_visual_index.html rel=external target=_blank>Language: Visual Index</a> from Puppet</li><li><a href=https://puppet.com/docs/puppet/latest/puppet_language.html rel=external target=_blank>Language: Basics</a> from Puppet</li></ul><h4 id=video-script>Video Script</h4><p>Now, let&rsquo;s take a look at how we can use Puppet to create defined configurations to be applied to our systems. In Puppet, we refer to those defined configurations as manifest files. Each manifest file defines a set of resources to be configured on the system. Then, the Puppet Agent tool compares the configuration defined in the manifest file and the system&rsquo;s current configuration, making changes as needed to the system until they match. In addition, each manifest file should be written in a way that it can be repeatedly applied to a system, since it is only defining the configuration desired and not the steps to accomplish it. This makes Puppet a very powerful tool for managing system configuration across a variety of systems and platforms.</p><p>When you apply a manifest file, Puppet will go through a compilation process to convert the manifest file into a catalog. When working in a larger organization with a Puppet master server containing several manifest files, this allows the system to distill all of that information into a single place. We&rsquo;ll talk a bit more about that when we look at a master/agent setup using Puppet.</p><p>Now, let&rsquo;s create our first Puppet Manifest files. Once again, I&rsquo;m using the Learning Puppet VM during the <code>hello_puppet</code> quest, but you can follow along on your own Windows or Linux VM as well. I&rsquo;ll use SSH to connect to the <code>hello.puppet.vm</code> node, then make sure the Puppet Agent is installed.</p><p>To make this process simpler, I&rsquo;m also going to install the Nano text editor. For most beginners, I feel that Nano is the easiest command-line text editor to learn, though it may not be the most powerful. If you are familiar with Vim, feel free to use it as it is already installed on this system. Since the Learning Puppet VM is using CentOS as its Linux distribution of choice, the command to install packages is a bit different than on Ubuntu. To install Nano, type the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo yum install nano</span></span></code></pre></div><p>Now, let&rsquo;s open a new text file using Nano, called <code>manifest.pp</code>. In that file, we can define a file resource as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-pp data-lang=pp><span class=line><span class=cl><span class=kt>file</span><span class=w> </span><span class=cm>{ &#39;/tmp/testfile&#39;:
</span></span></span><span class=line><span class=cl><span class=cm>  ensure =&gt; &#39;file&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  content =&gt; &#39;Manifest File!&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  mode =&gt; &#39;0644&#39;
</span></span></span><span class=line><span class=cl><span class=cm>}</span></span></span></code></pre></div><p>Once you have created that file, press <kbd>CTRL</kbd>+<kbd>X</kbd>, then <kbd>Y</kbd>, then <kbd>ENTER</kbd> to save and close the file in Nano. Then, you can apply the file using this command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo puppet apply manifest.pp</span></span></code></pre></div><p>It should successfully apply, and give you a message that the file was created. You can then use either</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo puppet resource file /tmp/testfile</span></span></code></pre></div><p>or</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ls -l /tmp/testfile</span></span></code></pre></div><p>to verify that the file exists and has the correct permissions. You can also view the file&rsquo;s contents using</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /tmp/testfile</span></span></code></pre></div><p>It&rsquo;s that easy! Most of the attributes displayed when you use the puppet resource command are configurable in a manifest file, so you can use puppet resource to determine how a system is currently configured, then copy the desired attributes into a manifest file to define that configuration. Let&rsquo;s add a few more things to our manifest:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-pp data-lang=pp><span class=line><span class=cl><span class=k>package</span><span class=w> </span><span class=cm>{  &#39;nano&#39;:
</span></span></span><span class=line><span class=cl><span class=cm>  ensure =&gt; &#39;present&#39;
</span></span></span><span class=line><span class=cl><span class=cm>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>user<span class=w> </span><span class=cm>{ &#39;cis527&#39;:
</span></span></span><span class=line><span class=cl><span class=cm>  ensure =&gt; &#39;present&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  shell =&gt; &#39;/bin/zsh&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  home =&gt; &#39;/home/cis527&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  managehome =&gt; true
</span></span></span><span class=line><span class=cl><span class=cm>}</span></span></span></code></pre></div><p>Once you&rsquo;ve edited a manifest file, you can verify that your syntax is correct using the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>puppet parser validate manifest.pp</span></span></code></pre></div><p>If you have any errors in your manifest file, it will give you the approximate line and column number. Be careful about your use of colons, commas, quotes, and brackets. As with any programming language, Puppet is very particular about the correct use of syntax.</p><p>Now, let&rsquo;s apply that manifest and see what happens:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo puppet apply manifest.pp</span></span></code></pre></div><p>Since the Nano package is already installed, it probably won&rsquo;t do much at this point. However, it should create the cis527 user. We can verify that it worked by switching to that user account. First, we&rsquo;ll need to set a password for it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo passwd cis527</span></span></code></pre></div><p>Then, we can use that password and the switch user command to log in as that user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>su cis527</span></span></code></pre></div><p>If all goes well, our terminal should change to show that we are logged in as the cis527 user. Of course, it is possible to define the desired password in the manifest file, but that is something you&rsquo;ll have to figure out on your own as you complete Lab 2. (I can&rsquo;t give everything away, can I?)</p><p>Before moving on to the next video, I encourage you to play around with this temporary manifest file a bit and see what other changes you can make to the resources we&rsquo;ve defined, or what other resources you can use here.</p><footer class=footline></footer></article></div></main></div></div><script src=/cis527/js/clipboard.min.js?1722976079 defer></script><script src=/cis527/js/perfect-scrollbar.min.js?1722976079 defer></script><script src=/cis527/js/theme.js?1722976079 defer></script><script src=/cis527/js/tele-scroll.js?1722976079 defer></script></body></html>