<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="YouTube Video Resources Slides Email on Wikipedia Simple Mail Transfer Protocol (SMTP) on Wikipedia Post Office Protocol (POP3) on Wikipedia Internet Message Access Protocol (IMAP) on Wikipedia Why You May Not Want to Run Your Own Mail Server from DigitalOcean Video Transcript In this video, we’ll look at one more set of application layer protocols, the ones for sending and receiving electronic mail, or email.
Email was developed in the early days of the ARPANET, and was originally built as an extension to the existing File Transfer Protocol or FTP. Using these email protocols, a user on one system could send a message to a user on another system. Email was originally designed to be a text-only format, but the later introduction of the Multipurpose Internet Mail Extensions, or MIME, allowed emails to include additional content such as HTML markup, images, and more."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis527/images/hero.png"><meta name=twitter:title content="Email Protocols :: CIS 527 Textbook"><meta name=twitter:description content="YouTube Video Resources Slides Email on Wikipedia Simple Mail Transfer Protocol (SMTP) on Wikipedia Post Office Protocol (POP3) on Wikipedia Internet Message Access Protocol (IMAP) on Wikipedia Why You May Not Want to Run Your Own Mail Server from DigitalOcean Video Transcript In this video, we’ll look at one more set of application layer protocols, the ones for sending and receiving electronic mail, or email.
Email was developed in the early days of the ARPANET, and was originally built as an extension to the existing File Transfer Protocol or FTP. Using these email protocols, a user on one system could send a message to a user on another system. Email was originally designed to be a text-only format, but the later introduction of the Multipurpose Internet Mail Extensions, or MIME, allowed emails to include additional content such as HTML markup, images, and more."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis527/3-core-networking-services/14-email-protocols/index.html"><meta property="og:site_name" content="CIS 527 Textbook"><meta property="og:title" content="Email Protocols :: CIS 527 Textbook"><meta property="og:description" content="YouTube Video Resources Slides Email on Wikipedia Simple Mail Transfer Protocol (SMTP) on Wikipedia Post Office Protocol (POP3) on Wikipedia Internet Message Access Protocol (IMAP) on Wikipedia Why You May Not Want to Run Your Own Mail Server from DigitalOcean Video Transcript In this video, we’ll look at one more set of application layer protocols, the ones for sending and receiving electronic mail, or email.
Email was developed in the early days of the ARPANET, and was originally built as an extension to the existing File Transfer Protocol or FTP. Using these email protocols, a user on one system could send a message to a user on another system. Email was originally designed to be a text-only format, but the later introduction of the Multipurpose Internet Mail Extensions, or MIME, allowed emails to include additional content such as HTML markup, images, and more."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Core Networking Services"><meta property="article:modified_time" content="2024-06-27T15:05:08-05:00"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis527/images/hero.png"><meta itemprop=name content="Email Protocols :: CIS 527 Textbook"><meta itemprop=description content="YouTube Video Resources Slides Email on Wikipedia Simple Mail Transfer Protocol (SMTP) on Wikipedia Post Office Protocol (POP3) on Wikipedia Internet Message Access Protocol (IMAP) on Wikipedia Why You May Not Want to Run Your Own Mail Server from DigitalOcean Video Transcript In this video, we’ll look at one more set of application layer protocols, the ones for sending and receiving electronic mail, or email.
Email was developed in the early days of the ARPANET, and was originally built as an extension to the existing File Transfer Protocol or FTP. Using these email protocols, a user on one system could send a message to a user on another system. Email was originally designed to be a text-only format, but the later introduction of the Multipurpose Internet Mail Extensions, or MIME, allowed emails to include additional content such as HTML markup, images, and more."><meta itemprop=dateModified content="2024-06-27T15:05:08-05:00"><meta itemprop=wordCount content="1060"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis527/images/hero.png"><title>Email Protocols :: CIS 527 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis527/3-core-networking-services/14-email-protocols/index.html rel=canonical type=text/html title="Email Protocols :: CIS 527 Textbook"><link href=/cis527/3-core-networking-services/14-email-protocols/index.xml rel=alternate type=application/rss+xml title="Email Protocols :: CIS 527 Textbook"><link href=/cis527/3-core-networking-services/14-email-protocols/tele.html rel=alternate type=text/html title="Email Protocols :: CIS 527 Textbook"><link href=/cis527/3-core-networking-services/14-email-protocols/embed.html rel=alternate type=text/html title="Email Protocols :: CIS 527 Textbook"><link href=/cis527/css/auto-complete/auto-complete.min.css?1756490104 rel=stylesheet><script src=/cis527/js/auto-complete/auto-complete.min.js?1756490104 defer></script><script src=/cis527/js/search-lunr.min.js?1756490104 defer></script><script src=/cis527/js/search.min.js?1756490104 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis527/searchindex.en.js?1756490104"</script><script src=/cis527/js/lunr/lunr.min.js?1756490104 defer></script><script src=/cis527/js/lunr/lunr.stemmer.support.min.js?1756490104 defer></script><script src=/cis527/js/lunr/lunr.multi.min.js?1756490104 defer></script><script src=/cis527/js/lunr/lunr.en.min.js?1756490104 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis527/fonts/fontawesome/css/fontawesome-all.min.css?1756490104 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis527/fonts/fontawesome/css/fontawesome-all.min.css?1756490104 rel=stylesheet></noscript><link href=/cis527/css/perfect-scrollbar/perfect-scrollbar.min.css?1756490104 rel=stylesheet><link href=/cis527/css/theme.min.css?1756490104 rel=stylesheet><link href=/cis527/css/format-print.min.css?1756490104 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/3-core-networking-services/14-email-protocols/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis527",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis527/css/custom.css?1756490104 rel=stylesheet></head><body class="mobile-support print" data-url=/cis527/3-core-networking-services/14-email-protocols/index.html><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable 3-core-networking-services" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=email-protocols>Email Protocols</h1><a href="https://www.youtube.com/watch?v=lcg43SAJv5Q">YouTube Video</a><h4 id=resources>Resources</h4><ul><li><strong><a href=/cis527/3-core-networking-services/14-email-protocols-slides/index.html>Slides</a></strong></li><li><a href=https://en.wikipedia.org/wiki/Email rel=external target=_blank>Email</a> on Wikipedia</li><li><a href=https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol rel=external target=_blank>Simple Mail Transfer Protocol (SMTP)</a> on Wikipedia</li><li><a href=https://en.wikipedia.org/wiki/Post_Office_Protocol rel=external target=_blank>Post Office Protocol (POP3)</a> on Wikipedia</li><li><a href=https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol rel=external target=_blank>Internet Message Access Protocol (IMAP)</a> on Wikipedia</li><li><a href=https://www.digitalocean.com/community/tutorials/why-you-may-not-want-to-run-your-own-mail-server rel=external target=_blank>Why You May Not Want to Run Your Own Mail Server</a> from DigitalOcean</li></ul><h4 id=video-transcript>Video Transcript</h4><p>In this video, we&rsquo;ll look at one more set of application layer protocols, the ones for sending and receiving electronic mail, or email.</p><p>Email was developed in the early days of the ARPANET, and was originally built as an extension to the existing File Transfer Protocol or FTP. Using these email protocols, a user on one system could send a message to a user on another system. Email was originally designed to be a text-only format, but the later introduction of the Multipurpose Internet Mail Extensions, or MIME, allowed emails to include additional content such as HTML markup, images, and more.</p><p>To send and receive email across the internet, there are a number of protocols involved. First, the Simple Mail Transfer Protocol (SMTP) is used to send mail from an email client to a server, and then between the servers until it reaches its desired recipient. Once there, the recipient can use either the Post Office Protocol (POP3), the Internet Message Access Protocol (IMAP), Microsoft&rsquo;s Exchange ActiveSync, or any number of webmail clients to actually view the email.</p><p>On an email server itself, there are several pieces of software involved in sending and receiving email. First, the Mail Transfer Agent (MTA) is responsible for SMTP connections, and is primarily used to send and receive email from other email servers. Next, the Mail Delivery Agent (MDA) will receive email from the MTA destined for users on this server, and will route it to the appropriate mailbox. Finally, there are any number of ways to get the email from the mailbox to the user, using the POP3, IMAP, or any number of other protocols. Or, as is often the case today, the user can simply view the email in a web browser, using a webmail client.</p><p>To see how email is routed through the internet, here is a nice diagram from Wikipedia showing the process. When Alice wants to send an email to Bob, she must first compose the email and send it to her local MTA using the SMTP protocol. Then, the MTA will use a DNS lookup to find the MX entry for Bob&rsquo;s email domain, which is <code>b.org</code> in this example. Then, the MTA can send that email to Bob&rsquo;s MTA, which will then pass it along to the MDA on that system, placing it in Bob&rsquo;s mailbox. Finally, Bob can then use a protocol such as POP3 to read the email from his mailbox onto his computer.</p><p>As with many other application layer protocols, several of the core email protocols are text-based as well, and can easily be done by hand using <code>telnet</code>. This slide shows what it would look like to use <code>telnet</code> to receive email using the POP3 protocol. However, most email servers today require the use of a secure protocol when accessing an email account, so it is difficult to perform this activity today.</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cis527@cis527russfeldpuppet:~$ telnet mail.servergrove.com <span style=color:#ae81ff>110</span>
</span></span><span style=display:flex><span>Trying 69.195.222.232...
</span></span><span style=display:flex><span>Connected to mail.servergrove.com.
</span></span><span style=display:flex><span>Escape character is <span style=color:#e6db74>&#39;^]&#39;</span>.
</span></span><span style=display:flex><span>+OK POP3 ready
</span></span><span style=display:flex><span>USER test@beattieunioncemetery.org
</span></span><span style=display:flex><span>+OK
</span></span><span style=display:flex><span>PASS uns3cur3
</span></span><span style=display:flex><span>+OK logged in.
</span></span><span style=display:flex><span>STAT
</span></span><span style=display:flex><span>+OK <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>5580</span>
</span></span><span style=display:flex><span>RETR <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>+OK <span style=color:#ae81ff>4363</span> octets follow.
</span></span><span style=display:flex><span>Received: <span style=color:#f92672>(</span>qmail <span style=color:#ae81ff>11929</span> invoked from network<span style=color:#f92672>)</span>; <span style=color:#ae81ff>26</span> Feb <span style=color:#ae81ff>2016</span> 16:16:14 +0000
</span></span><span style=display:flex><span>Received-SPF: none <span style=color:#f92672>(</span>no valid SPF record<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Received: from mx-mia-1.servergrove.com <span style=color:#f92672>(</span>69.195.198.246<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  by sg111.servergrove.com with SMTP; <span style=color:#ae81ff>26</span> Feb <span style=color:#ae81ff>2016</span> 16:15:43 +0000
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>DELE <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>+OK message <span style=color:#ae81ff>2</span> deleted
</span></span><span style=display:flex><span>QUIT
</span></span><span style=display:flex><span>+OK Bye-bye.</span></span></code></pre></div><p>However, many SMTP servers still support sending email via an unsecured connection. This is mainly because there are several older devices such as printers, copiers, network devices, and security devices that are all designed to send alerts via email. Those older devices are difficult if not impossible to upgrade, so many system administrators are forced to use an unsecured SMTP server to accept those notification emails. So, we can use one of those to perform this quick test and see how it works.</p><p>For this example, I will connect to the K-State CS Linux servers, as the server we are using will only accept emails from a limited number of systems, including these servers. In addition, it will only accept email sent to a limited number of domains. Both of these protections are in place to limit the amount of unsolicited SPAM email that could be sent using this server.</p><p>First, I&rsquo;ll use <code>telnet</code> to connect to the email server on port 25, the well-known port for SMTP:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>telnet smtp.cs.ksu.edu <span style=color:#ae81ff>25</span></span></span></code></pre></div><p>Then, I&rsquo;ll need to establish a connection with it, send my email, and close the connection. To make it easier to see below, I&rsquo;ve prefixed the messages from the server and my telnet client with <code>###</code>:</p><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>### Trying 129.130.10.29...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Connected to daytona.cs.ksu.edu.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Escape character is &#39;^]&#39;.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 220 daytona.cis.ksu.edu ESMTP Postfix (Debian/GNU)</span>
</span></span><span style=display:flex><span>HELO daytona.cs.ksu.edu
</span></span><span style=display:flex><span><span style=color:#75715e>### 250 daytona.cis.ksu.edu</span>
</span></span><span style=display:flex><span>MAIL FROM: testuser@ksu.edu
</span></span><span style=display:flex><span><span style=color:#75715e>### 250 2.1.0 Ok</span>
</span></span><span style=display:flex><span>RCPT TO: russfeld@ksu.edu
</span></span><span style=display:flex><span><span style=color:#75715e>### 250 2.1.5 Ok</span>
</span></span><span style=display:flex><span>DATA
</span></span><span style=display:flex><span><span style=color:#75715e>### 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span>
</span></span><span style=display:flex><span>From: <span style=color:#e6db74>&#34;Russell Feldhausen&#34;</span>
</span></span><span style=display:flex><span>To: <span style=color:#e6db74>&#34;Test&#34;</span>
</span></span><span style=display:flex><span>Date: Fri, <span style=color:#ae81ff>6</span> September <span style=color:#ae81ff>2018</span> 10:00:00 -0700
</span></span><span style=display:flex><span>Subject: Test Message
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>This is a test! Hope it Works!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span><span style=color:#75715e>### 250 2.0.0 Ok: queued as 827D23FDD1</span>
</span></span><span style=display:flex><span>QUIT
</span></span><span style=display:flex><span><span style=color:#75715e>### 221 2.0.0 Bye</span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Connection closed by foreign host.</span></span></span></code></pre></div><p>Once I have completed that process, I should receive the email in my inbox shortly. You&rsquo;ll notice that there are many things interesting about this email. First, my email client reports the correct date and time that it was received, but at the top of the email itself it gives a different timestamp for when it was sent. Additionally, even though I used my own email address as the recipient, in the email header I listed the name &ldquo;Test&rdquo; as the recipient, which is what appears in the email client.</p><p>I hope that this example clearly demonstrates how easy it is to spoof any part of an email. The email servers and protocols themselves don&rsquo;t enforce many rules at all, so it is easy to abuse the system, leading to the large amount of SPAM email we receive on a daily basis. However, I still find it fascinating to see behind the curtains a little at how these protocols are actually structured and how easy it is to work with them.</p><footer class=footline></footer></article></div></main></div><script src=/cis527/js/clipboard/clipboard.min.js?1756490104 defer></script><script src=/cis527/js/perfect-scrollbar/perfect-scrollbar.min.js?1756490104 defer></script><script src=/cis527/js/theme.min.js?1756490104 defer></script></div><script src=/cis527/js/tele-scroll.min.js?1756490104 defer></script></body></html>