




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="CIS 527 Textbook">
    <meta name="author" content="Russell Feldhausen">
    <title>Assignment :: CIS 527 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/index.html" rel="canonical" type="text/html" title="Assignment :: CIS 527 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/index.xml" rel="alternate" type="application/rss+xml" title="Assignment :: CIS 527 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/tele.html" rel="alternate" type="text/html" title="Assignment :: CIS 527 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/embed.html" rel="alternate" type="text/html" title="Assignment :: CIS 527 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/fontawesome-all.min.css?1695851672" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis527/css/fontawesome-all.min.css?1695851672" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/nucleus.css?1695851672" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/auto-complete.css?1695851672" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis527/css/auto-complete.css?1695851672" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/perfect-scrollbar.min.css?1695851672" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/fonts.css?1695851672" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis527/css/fonts.css?1695851672" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/theme.css?1695851672" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/theme-auto.css?1695851672" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/variant.css?1695851672" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/print.css?1695851672" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/format-print.css?1695851672" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/ie.css?1695851672" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/url.js?1695851672"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/variant.js?1695851672"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis527/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis527/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis527/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis527/css/custom.css?1695851672" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="top-tele-link">
            <a class="print-link" title='Teleprompter View' href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/tele.html">
              <i class="fas fa-tv fa-fw"></i>
            </a>
          </div>
          <div id="top-embed-link">
            <a class="print-link" title='Embeddable Version' href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/embed.html">
              <i class="fas fa-expand-arrows-alt fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis527/index.html"><span itemprop="name">CIS 527 Textbook</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/index.html"><span itemprop="name">The Cloud</span></a><meta itemprop="position" content="2"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Assignment</span><meta itemprop="position" content="3"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="assignment">Assignment</h1>

<h3 id="lab-5---the-cloud">Lab 5 - The Cloud</h3>
<h4 id="instructions">Instructions</h4>
<p>Create <strong>two</strong> cloud systems meeting the specifications given below. The best way to accomplish this is to treat this assignment like a checklist and check things off as you complete them.</p>
<p>If you have any questions about these items or are unsure what they mean, please contact the instructor. Remember that part of being a system administrator (and a software developer in general) is working within vague specifications to provide what your client is requesting, so eliciting additional information is a very necessary skill.</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p><em>To be more blunt - this specification may be purposefully designed to be vague, and it is your responsibility to ask questions about any vagaries you find. Once you begin the grading process, you cannot go back and change things, so be sure that your machines meet the expected specification regardless of what is written here. &ndash;Russ</em></p>
</div>
</div>
<p>Also, to complete many of these items, you may need to refer to additional materials and references not included in this document. System administrators must learn how to make use of available resources, so this is a good first step toward that. Of course, there&rsquo;s always <a href="http://www.google.com" target="_blank">Google</a>
!</p>
<h4 id="time-expectation">Time Expectation</h4>
<p>This lab may take anywhere from <strong>1 - 6 hours</strong> to complete, depending on your previous experience working with these tools and the speed of the hardware you are using. Configuring cloud systems is very time-consuming the first time through the process, but it will be much more familiar by the end of this course.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p><em>This lab involves working with resources on the cloud, and will require you to sign up and pay for those services. In general, your total cost should be low, usually around $20 total. If you haven&rsquo;t already, you can sign up for the <a href="https://education.github.com/pack" target="_blank">GitHub Student Developer Pack</a>
 to get discounts on most of these items.</em></p>
<p><em>You can get $100 credit at DigitalOcean using this link: <a href="https://try.digitalocean.com/freetrialoffer/" target="_blank">https://try.digitalocean.com/freetrialoffer/</a>
</em></p>
<p><em>You can register a .me domain name for free using Namecheap at this link: <a href="https://nc.me/" target="_blank">https://nc.me/</a>
</em></p>
<p><em>If you have any concerns about using these services, please contact me to make alternative arrangements! &ndash;Russ</em></p>
</div>
</div>
<hr>
<h3 id="task-0-create-2-droplets">Task 0: Create 2 Droplets</h3>
<p>Create <strong>TWO</strong> droplets on DigitalOcean. As you set up your droplets, use the following settings:</p>
<ul>
<li>Choose the Ubuntu 20.04 x64 distribution as the droplet image</li>
<li>Select the smallest droplet size ($4-6/mo)</li>
<li>Select any United States region</li>
<li>Enable Virtual Private Cloud (VPC) Networking and Monitoring</li>
<li>You may add any existing SSH keys you&rsquo;ve already configured with DigitalOcean during droplet creation</li>
<li>Droplet names:
<ul>
<li><code>cis527&lt;your eID&gt;-frontend</code></li>
<li><code>cis527&lt;your eID&gt;-backend</code></li>
</ul>
</li>
</ul>
<p>The rest of this assignment will refer to those droplets as <strong>FRONTEND</strong> and <strong>BACKEND</strong>, respectively.</p>
<h4 id="resources">Resources</h4>
<ul>
<li><a href="https://www.digitalocean.com/docs/droplets/how-to/create/" target="_blank">How to Create a Droplet from the DigitalOcean Control Panel</a>
 from DigitalOcean</li>
<li><a href="https://www.digitalocean.com/docs/networking/vpc/" target="_blank">Virtual Private Cloud (VPC)</a>
 from DigitalOcean (replaced private networking)</li>
</ul>
<hr>
<h3 id="task-1-configure-droplets">Task 1: Configure Droplets</h3>
<p>Perform these configuration steps on both droplets, unless otherwise noted:</p>
<ol>
<li>Create a cis527 user with administrative (root or sudo) privileges

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p><strong>DO NOT REUSE THE USUAL PASSWORD ON THIS ACCOUNT!</strong> Any system running in the cloud should have a very secure password on each account. Make sure it is a strong yet memorable password, as you&rsquo;ll need it to run any commands using <code>sudo</code>.</p>
</div>
</div></li>
<li>Install all system updates</li>
<li>Change the SSH port to 54321</li>
<li>Ensure the timezone is set to UTC</li>
<li>Enable the firewall. Configure the firewall on both systems to allow connections to the following:
<ul>
<li>incoming port 54321 (SSH)
<ul>
<li><strong>BACKEND ONLY:</strong> filter connections on port 54321 to only allow SSH connections from <strong>FRONTEND</strong> via its <strong>private networking</strong> IP address. You should still allow connections to port 80 and 443 from any address.</li>
</ul>
</li>
<li>incoming port 80 (HTTP)</li>
<li>incoming port 443 (HTTP via TLS)</li>
</ul>
</li>
</ol>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p><em>Many students misconfigure the firewall on the <strong>BACKEND</strong> server to allow SSH connections from the wrong IP addresses or ranges, or include a rule to allow connections from any address. I will be picky about this from now on. &ndash;Russ</em></p>
</div>
</div>
<h4 id="resources-1">Resources</h4>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04" target="_blank">Initial Server Setup with Ubuntu 20.04</a>
 from DigitalOcean</li>
<li><a href="https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands" target="_blank">UFW Essentials: Common Firewall Rules and Commands</a>
 from DigitalOcean</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-time-synchronization-on-ubuntu-18-04" target="_blank">How To Set Up Time Synchronization on Ubuntu 18.04</a>
 from DigitalOcean (works on Ubuntu 20.04)</li>
</ul>
<hr>
<h3 id="task-2-ssh-configuration">Task 2: SSH Configuration</h3>
<p>Configure your SSH servers and SSH keys as described here:</p>
<ol>
<li>On your own computer, generate a set of SSH keys if you have not already.</li>
<li>Add the public key from your computer to the cis527 account on <strong>FRONTEND</strong>. This should allow you to log in with that key.</li>
<li>Add the <a href="https://ksu-cs-textbooks.github.io/cis527/5-the-cloud/03-assignment/../../files/id_rsa_grading.pub">grading SSH key</a>
 to the cis527 account on <strong>FRONTEND</strong> as well.</li>
<li>On the cis527 account on <strong>FRONTEND</strong>, generate a set of SSH keys with no passphrase.</li>
<li>Add the public key from the cis527 account on <strong>FRONTEND</strong> to the cis527 account on <strong>BACKEND</strong>. This should allow you to log in with that key</li>
<li>On the cis527 account on <strong>FRONTEND</strong>, create an SSH config file such that a user could simply type <code>ssh backend</code> to connect to the <strong>BACKEND</strong> droplet.

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>Make sure you use the private networking IP address for <strong>BACKEND</strong> in your config file. Otherwise, it will be blocked by the firewall.</p>
</div>
</div></li>
<li>Once all of the keys are in place, disable password authentication and root login via SSH on both systems.</li>
</ol>
<p>After doing these steps, you should only be able to access the cis527 account on <strong>FRONTEND</strong> via SSH using your SSH key or the grading SSH key, and you should only be able to access <strong>BACKEND</strong> using the SSH key present on the cis527 account on <strong>FRONTEND</strong>.</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p><em>You may contact me once you have installed the grading SSH key to confirm that it works correctly. I&rsquo;d be happy to test it before grading. &ndash;Russ</em></p>
</div>
</div>
<h4 id="resources-2">Resources</h4>
<ul>
<li><strong><a href="https://ksu-cs-textbooks.github.io/cis527/x-extras/02-ssh/">Extras - SSH</a>
</strong></li>
<li><a href="https://www.hostinger.com/tutorials/ssh-tutorial-how-does-ssh-work" target="_blank">How Does SSH Work</a>
 from Hostinger</li>
<li><a href="https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys" target="_blank">SSH Essentials: Working with SSH Servers, Clients and Keys</a>
 from DigitalOcean</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-20-04" target="_blank">How to Set Up SSH Keys on Ubuntu 20.04</a>
 from DigitalOcean</li>
<li><a href="https://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/" target="_blank">Simplify Your Life With an SSH Config File</a>
 from Nerderati</li>
</ul>
<hr>
<h3 id="task-3a-install-apache-on-backend">Task 3A: Install Apache on <strong>BACKEND</strong></h3>
<p>Install the Apache web server on <strong>BACKEND</strong>. By default, the webserver should serve files from the <code>/var/www/html</code> directory. Place a simple HTML file named <code>index.html</code> in that directory on <strong>BACKEND</strong>. You may use the contents below as an example. Please modify the file appropriately to make it clear which server it is placed on.</p>
<p>Do not configure virtual hosts at this time, as that will be covered in Task 5.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;CIS 527 Backend&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h1</span>&gt;This is my CIS 527 Backend Server!&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div><p>To test your system, you should be able to enter the public IP address of your <strong>BACKEND</strong> droplet in a web browser and be presented with the appropriate file.</p>
<h4 id="resources-3">Resources</h4>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-20-04" target="_blank">How To Install the Apache Web Server on Ubuntu 20.04</a>
 from DigitalOcean</li>
</ul>
<hr>
<h3 id="task-3b-install-docker-on-frontend">Task 3B: Install Docker on <strong>FRONTEND</strong></h3>
<p>Install the Docker client, Docker engine, and Docker compose on the droplet named <strong>FRONTEND</strong>. Make sure you test your setup using the <a href="https://hub.docker.com/_/hello-world" target="_blank">Hello World</a>
 image to confirm it is working.</p>
<h4 id="resources-4">Resources</h4>
<ul>
<li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank">Install Docker Engine on Ubuntu</a>
 from Docker</li>
<li><a href="https://docs.docker.com/compose/install/linux/" target="_blank">Install Docker Compose Plugin</a>
 from Docker</li>
</ul>
<hr>
<h3 id="task-4-domain-names--dns">Task 4: Domain Names &amp; DNS</h3>
<p>Register and configure a domain name, and add your new droplets to that domain.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p><em>If you already have your own domain name, you are welcome to use it for this portion of the lab. It should not conflict with any existing configuration, as long as you are managing your own DNS records. If not, you may need to perform some additional configuration. If you don&rsquo;t have a domain name yet, this would be a great chance to get one registered. <a href="https://nc.me" target="_blank">Namecheap</a>
 will allow you to register a <code>.me</code> domain for free for one year as a student. If you register a domain name, I highly recommend enrolling in WhoisGuard to protect your personal information. It should be enabled for you automatically through Namecheap. If you have any concerns about registering a domain name, or would like to explore options for completing this portion without registering or using a public domain name, please contact me. &ndash;Russ</em></p>
</div>
</div>
<p>Configure the DNS settings for your domain name as follows:</p>
<ol>
<li>If you are using a new domain, make sure it is configured to use your registrar&rsquo;s DNS servers. You may also configure it to use DigitalOcean&rsquo;s nameservers, and configure your DNS settings through DigitalOcean.</li>
<li>Add an A record for host <code>cis527alpha</code> that points to the public IP address of <strong>FRONTEND</strong>.</li>
<li>Add an A record for host <code>cis527bravo</code> that points to the public IP address of <strong>FRONTEND</strong>.</li>
<li>Add an A record for host <code>cis527charlie</code> that points to the public IP address of <strong>BACKEND</strong>.</li>
</ol>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p><em>After updating your domain&rsquo;s DNS settings, you may have to wait up to 24 hours for the changes to propagate across the internet due to DNS caching. You may be able to speed this up by restarting your computer and network devices, or by using 3rd party DNS services such as OpenDNS or Google DNS instead of your ISP&rsquo;s DNS servers. However, in most cases it is better to just be patient and wait than to try and get around it. &ndash;Russ</em></p>
</div>
</div>
<p>To test your new DNS settings, you should be able to enter <code>http://cis527charlie.&lt;yourdomain&gt;.&lt;tld&gt;</code> in a web browser to access your backend server running Apache. For example, if your domain name is <code>cis527.me</code>, you would visit <code>http://cis527charlie.cis527.me</code>. Since we haven&rsquo;t configured a server for frontend yet, we aren&rsquo;t able to test it at this time.</p>
<h4 id="resources-5">Resources</h4>
<ul>
<li><a href="https://www.digitalocean.com/docs/networking/dns/overview/" target="_blank">DNS Overview</a>
 from DigitalOcean</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-point-to-digitalocean-nameservers-from-common-domain-registrars#registrar-namecheap" target="_blank">How to Point to DigitalOcean Nameservers from Common Domain Registrars</a>
 from DigitalOcean</li>
</ul>
<hr>
<h3 id="task-5a-configure-apache-virtual-hosts">Task 5A: Configure Apache Virtual Hosts</h3>
<p>Now that your domain name is working, configure an appropriate virtual host in Apache on <strong>BACKEND</strong>. In general, you can follow Step 5 of the guide linked below, but replace <code>example.com</code> with your server&rsquo;s full domain name, such as <code>cis527charlie.cis527.me</code> in the example from Task 4. You&rsquo;ll also need to copy the sample HTML file from Task 3 to the appropriate directory as configured in your virtual host. Make sure you disable the default site configuration when you enable the new site.</p>
<p>Finally, you can test your virtual host configuration using the same URL given in Task 4 above.</p>
<h4 id="resources-6">Resources</h4>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-20-04" target="_blank">How To Install the Apache Web Server on Ubuntu 20.04</a>
 from DigitalOcean</li>
</ul>
<hr>
<h3 id="task-5b-configure-docker-reverse-proxy">Task 5B: Configure Docker Reverse Proxy</h3>
<p>On <strong>FRONTEND</strong>, create a <code>docker-compose.yml</code> file in the home directory of the <code>cis527</code> user that will create the following infrastructure in Docker:</p>
<ul>
<li>Set up two Docker containers running simple web servers.
<ul>
<li>You may either use the <a href="https://hub.docker.com/r/jwilder/whoami" target="_blank">whoami</a>
 image from the example, or set up two <a href="https://hub.docker.com/_/nginx" target="_blank">Nginx</a>
 containers. If you use Nginx, you&rsquo;ll need to configure it to host different static content in each container (so it is easy to tell which one is which). See the documentation for how to set this up. Basically, there needs to be an obvious way to tell that you are reaching the correct container.</li>
<li>These containers should only be connected to an internal Docker network. They should <strong>NOT</strong> have direct access to the internet, nor should they have any mapped ports.</li>
</ul>
</li>
<li>Set up a reverse proxy in Docker to handle connections from the outside world (on port 80) to the appropriate containers.
<ul>
<li>You may use either <a href="https://hub.docker.com/_/nginx" target="_blank">Nginx</a>
, <a href="https://hub.docker.com/r/nginxproxy/nginx-proxy" target="_blank">Nginx-proxy</a>
, or <a href="https://hub.docker.com/_/traefik" target="_blank">Traefik Proxy</a>
 as shown in the lab module.</li>
<li>This container should be connected to both the default Docker network as well as the internal network that is connected to the other two containers.</li>
<li>You should configure one web server container to have hostname <code>cis527alpha.&lt;yourdomain&gt;.&lt;tld&gt;</code> and the other should have <code>cis527bravo.&lt;yourdomain&gt;.&lt;tld&gt;</code>.</li>
<li>Once configured, you should be able to visit those URLs in a browser and clearly see information coming from the correct Docker container.</li>
</ul>
</li>
</ul>
<h4 id="resources-7">Resources</h4>
<ul>
<li><a href="https://ksu-cs-textbooks.github.io/cis527/5a-containers/08-reverse-proxy/">Reverse Proxy</a>
</li>
</ul>
<hr>
<h3 id="task-6-public-key-certificates">Task 6: Public Key Certificates</h3>
<p>Obtain and install a public key certificate for your Apache server on <strong>BACKEND</strong>. The simplest way to do so is to use Certbot from Let&rsquo;s Encrypt.</p>
<p>When you install the certificates, direct Certbot to redirect HTTP traffic to HTTPS for your server.</p>
<p>Once it is complete, you can test your certificates using the same URL given in Task 4 above. It should automatically redirect you from HTTP to HTTPS. You may have to clear the cache in your web browser if it does not work correctly. When you access the site, use your web browser to verify that the SSL certificate is present and valid.</p>
<p>You <strong>DO NOT</strong> have to configure public key certificates on <strong>FRONTEND</strong> using a reverse proxy. This can be done, but it is a bit more difficult than using Certbot since it requires manual steps or additional configuration. Feel free to attempt it on your own!</p>
<h4 id="resources-8">Resources</h4>
<ul>
<li><a href="https://certbot.eff.org/" target="_blank">Certbot</a>
 from the Electronic Frontier Foundation (EFF)</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-20-04" target="_blank">How To Secure Apache with Let&rsquo;s Encrypt on Ubuntu 20.04</a>
 from DigitalOcean</li>
</ul>
<hr>
<h3 id="task-8-schedule-a-grading-time">Task 8: Schedule A Grading Time</h3>
<p>Contact the instructor and schedule a time for interactive grading. You may continue with the next module once grading has been completed.</p>

            <footer class="footline">

            </footer>
          </article>


        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Russell Feldhausen
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cis-527/cis527online/-/commit/70e0b29f5c84e53e6b94fb5b55fa44b49274efa7">Nov 3, 2022</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/clipboard.min.js?1695851673" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/perfect-scrollbar.min.js?1695851673" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis527/js/theme.js?1695851673" defer></script>
  </body>
</html>
